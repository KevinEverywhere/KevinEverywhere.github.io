{"version":3,"sources":["webpack:///./src/components/ExtraEntities.js","webpack:///./src/components/MainExperimental.js","webpack:///./src/components/CameraHolder.js","webpack:///./src/pages/experimental.js"],"names":["ExtraEntities","props","_this","_React$PureComponent","call","this","positionedImageAsset","node","index","arr","vector","level","rot","hPos","vPos","pos","fluid","childImageSharp","distanceBetween","state","Math","floor","length","react_default","a","createElement","AReactImage","key","id","rotation","width","height","position","builtImageAssets","data","allFile","edges","map","builtVideoAssets","video1Pos","video2Pos","fullLength","store","getState","getImages","Fragment","AReactVideo","src","spherical","radius","builtAframeAssets","geometry","color","material","animation","imagesPerSide","numberOfSides","entities","componentDidMount","_this2","__webpack_require__","e","then","t","bind","aframe","setState","catch","error","console","render","React","PureComponent","MainExperimental","_React$Component","loadedContent","aframeLoaded","components","registerComponent","init","_this3","el","addEventListener","document","querySelector","getAttribute","paused","play","pause","oops","cursor","embedded","style","Assets","components_ExtraEntities","Cameras","children","Component","propTypes","timeout","PropTypes","bool","setWrapperRef","func","isRequired","CameraHolder","stopVideo","videoElem","srcObject","getTracks","forEach","track","stop","makeActive","me","assertThisInitialized_default","navigator","mediaDevices","getUserMedia","audio","video","facingMode","stream","getElementById","camera","window","URL","createObjectURL","onloadedmetadata","log","makeInactive","setVideo","srcTarget","activeCamera","active","componentWillUnmount","ExperimentalPage","loading","timeoutId","setTimeout","display","clearTimeout","wrapperRef","Layout","location","className","SmallHeader","GyroController","components_MainExperimental","components_CameraHolder","Instructions","Footer","experimentalFluidImage","experimentalPageQuery"],"mappings":"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","file":"component---src-pages-experimental-js-041df4742321799ad5ce.js","sourcesContent":["import React from 'react'\nimport AReactImage from './AReactImage'\nimport AReactVideo from './AReactVideo'\nimport store from '../state/store';\n\nclass ExtraEntities extends React.PureComponent {\n  constructor(props){\n    super();\n    this.state={\n      distanceBetween:60,\n      imagesPerSide: 40,\n      numberOfSides: 4,\n      entities:null\n    }\n  }\n\n  positionedImageAsset = ( node, index, arr, vector, level ) => {\n    const fluid = node.node.childImageSharp.fluid;\n    let rot, hPos, vPos, pos;\n    let distanceBetween = this.state.distanceBetween;\n    switch(vector){\n      case 'xPos':\n        rot =  index % 2 === 0 ? \"0 180 0\" : \"0 0 0\";\n        vPos = Math.floor(arr.length/4) - Math.floor(index/2);\n        pos =  index % 2 === 0 ?\n          `${distanceBetween * vPos} ${(level * 800)+2} ${distanceBetween}` :\n          `${distanceBetween * vPos} ${(level * 800)+2} ${-distanceBetween}`;\n        return (\n          <AReactImage key={node.node.id} fluid={fluid} rotation={rot} width={distanceBetween} height={distanceBetween} position={pos} />\n        )\n      case 'xNeg':\n        break;\n      case 'zPos':\n        rot =  index % 2 === 0 ? \"0 270 0\" : \"0 90 0\";\n        hPos = Math.floor(arr.length/4) - Math.floor(index/2);\n        distanceBetween = this.state.distanceBetween;\n        pos =  index % 2 === 0 ?\n          `${distanceBetween} ${(level * 800)+2} ${distanceBetween * hPos}` :\n          `${-distanceBetween} ${(level * 800)+2} ${distanceBetween * hPos}`;\n        return (\n          <AReactImage key={node.node.id} fluid={fluid} rotation={rot} width={distanceBetween} height={distanceBetween} position={pos} />\n        )\n      case 'zNeg':\n      default:\n        break;\n    }\n  }\n\n  builtImageAssets = ( vector, level ) => {\n    const imageAssets =this.props.data.allFile.edges.map((node, index, arr) => {\n      if(node && node.node && node.node.childImageSharp && node.node.childImageSharp.fluid){\n        return this.positionedImageAsset(node, index, arr, vector, level);\n      }else{\n        return null;\n      }\n    })\n    return imageAssets;\n  }\n\n  builtVideoAssets = ( vector, level ) => {\n    let video1Pos, video2Pos, rot;\n    let fullLength = store().getState().getImages.length/3;\n    switch(vector){\n      case 'xPos':\n        rot =  index => index % 2 === 0 ? \"0 270 0\" : \"0 90 0\";\n        video1Pos = `${-fullLength * 2 * this.state.distanceBetween} ${(level * 800)+120} 0`;\n        video2Pos = `${fullLength * 2 * this.state.distanceBetween} ${(level * 800)+120} 0`;\n        break;\n      case 'xNeg':\n        break;\n      case 'zPos':\n        rot =  index => index % 2 === 0 ? \"0 180 0\" : \"0 0 0\";\n        video1Pos = `0 ${(level * 800)+120} ${-fullLength * this.state.distanceBetween}`;\n        video2Pos = `0 ${(level * 800)+120} ${fullLength * this.state.distanceBetween}`;\n        break;\n      case 'zNeg':\n      default:\n        break;\n    }\n    return (\n      <>\n      <AReactVideo src=\"#mixVideo\" id=\"mix\" spherical={true} width={400} height={400} radius=\"750\" position={video1Pos} />\n      <AReactVideo src=\"#haightVideo\" id=\"haight\" rotation={rot(1)} width={600} height={340} position={video2Pos} />\n      </>\n    );\n  }\n\n// https://github.com/KevinEverywhere/KevinEverywhere.git\n  builtAframeAssets = () =>  {\n    return (\n      <>\n        <a-sky geometry=\"radius:8000\" color=\"#fff\" src=\"#universe_4096Image\" />\n        <a-image src=\"#earthDegrees\" geometry=\"primitive: sphere; radius: 4000\" material=\"side: double\" position=\"0 0 0\" />\n        <a-image src=\"#eyeChart\" height=\"650\" width=\"300\" position=\"1000 150 0\" rotation=\"0 0 0\" animation=\"property: rotation; to: 0 360 0; loop: true; dur: 10000\" />\n      </>\n    );\n  }\n\n  componentDidMount(){\n    import('aframe')\n      .then((aframe) => {\n        this.setState({\n          entities:(\n              <a-entity>\n                { this.builtImageAssets('xPos', -.1)  }\n                { this.builtImageAssets('zPos', -.1) }\n                { this.builtVideoAssets('xPos', 0) }\n                { this.builtVideoAssets('zPos', 0) }\n                { this.builtAframeAssets() }\n              </a-entity>\n          )})\n      })\n      .catch((error) => console.error(error));\n  }\n  render() {\n    return this.state.entities;\n  }\n}\n\nexport default ExtraEntities\n\n//   <a-plane material=\"opacity:0.31\" un-planned-texture position=\"0 -100 4\" rotation=\"-90 0 0\" width=\"5000\" height=\"5000\" color=\"#111\" />\n","import React from 'react'\nimport PropTypes from 'prop-types'\n// import aframe from 'aframe'\nimport Assets from './Assets'\nimport Cameras from './Cameras'\nimport ExtraEntities from './ExtraEntities'\n\nclass MainExperimental extends React.Component {\n  constructor(props){\n    super();\n    this.state={\n      loadedContent:null,\n      aframeLoaded: null,\n    }\n  }\n  componentDidMount(){\n    import('aframe')\n      .then((aframe) => {\n        if(!!!aframe.components['video-texture']){\n          aframe.registerComponent(\"video-texture\", {\n            init: function() {\n              this.el.addEventListener(\"click\", (e) => {\n                try{\n                  if(document.querySelector(this.el.getAttribute('src')).paused){\n                    document.querySelector(this.el.getAttribute('src')).play()\n                  }else{\n                    document.querySelector(this.el.getAttribute('src')).pause()\n                  }\n                }catch(oops){}\n              })\n            }\n          })\n          this.setState({\n            aframeLoaded: true,\n            loadedContent:(\n              <main>\n                <a-scene cursor=\"rayOrigin: mouse\" embedded style={{width:'100%',height:'100%'}}>\n                  <Assets data={this.props.data} />\n                  <ExtraEntities data={this.props.data} />\n                  <Cameras data={this.props.data} />\n                  { this.props.children }\n                </a-scene>\n              </main>\n            )})\n        }\n      })\n      .catch((error) => console.error(error));\n  }\n  render() {\n    return this.state.loadedContent;\n  }\n}\n\nMainExperimental.propTypes = {\n  timeout: PropTypes.bool,\n  setWrapperRef: PropTypes.func.isRequired,\n}\n\nexport default MainExperimental\n","import React from 'react'\n\nclass CameraHolder extends React.PureComponent {\n  constructor(props){\n    super();\n    this.state={activeCamera:null}\n  }\n  stopVideo=(videoElem) =>{\n    let stream = videoElem.srcObject;\n    let tracks = stream.getTracks();\n    tracks.forEach(function(track) {\n      track.stop();\n    });\n    videoElem.srcObject = null;\n  }\n  makeActive=()=>{\n    const me=this;\n    navigator.mediaDevices.getUserMedia({ audio: true, video: { facingMode: this.props.facingMode }})\n    .then(function(stream) {\n      var video = document.getElementById(me.props.camera);\n      if (\"srcObject\" in video) {\n        video.srcObject=stream;\n      }else{\n        video.src = window.URL.createObjectURL(stream);\n      }\n      video.onloadedmetadata = function(e) {\n        video.play();\n      };\n    })\n    .catch((oops)=>{\n      console.log('bad camera')\n    });\n  }\n  makeInactive=()=>{\n    try{\n      var video = document.getElementById(this.props.camera);\n      this.stopVideo(video);\n    }catch(oops){\n       // video not playing\n    }\n  }\n  // <a-assets>\n  // <video crossOrigin=\"anonymous\" id=\"webcam\" webkit-playsinline=\"true\" playsInline></video>\n  // <video crossOrigin=\"anonymous\" id=\"webcamBack\" webkit-playsinline=\"true\" playsInline></video>\n\n  setVideo=()=>{\n    if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia){\n      const srcTarget = `side:double;src: #${this.props.camera}`\n      this.setState({\n        activeCamera:(\n          <a-entity id={this.props.id} position={this.props.position} rotation={this.props.rotation}>\n            <a-entity position=\"0 2 0\"\n            geometry=\"primitive: plane; width: 240; height:180\"\n            material={srcTarget}></a-entity>\n          </a-entity>\n        )\n      })\n      this.makeActive();\n      if(this.props.active!==true){\n        this.makeInactive();\n      }\n    }\n  }\n  componentWillUnmount(){\n    this.makeInactive();\n  }\n  componentDidMount(){\n    import('aframe')\n      .then(() => {\n        import('aframe-extras')\n          .then(() => {\n            this.setVideo();\n          })\n          .catch((oops)=>{\n            console.log('bad camera')\n          });\n      })\n      .catch((error) => console.error(error));\n    }\n  render() {\n    return this.state.activeCamera\n  }\n}\n\nexport default CameraHolder\n\n// <div class=\"inputdialog\">\n//   <input class=\"biginput\" type=\"file\" accept=\"video/*\" capture=\"camera\">\n// </div>\n","import React from 'react'\nimport { graphql } from 'gatsby'\nimport Layout from '../components/Layout'\nimport GyroController from '../components/GyroController'\nimport SmallHeader from '../components/SmallHeader'\nimport MainExperimental from '../components/MainExperimental'\nimport Footer from '../components/Footer'\nimport CameraHolder from '../components/CameraHolder'\n// import AReactImage from '../components/AReactImage'\n// import { state } from '../components/Assets';\n\nclass ExperimentalPage extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      timeout: false,\n      loading: 'is-loading'\n    }\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n  }\n\n  componentDidMount () {\n    // console.log(state.assets);\n    this.timeoutId = setTimeout(() => {\n      let s=document.querySelector('#instructions').style;\n      s.display='none';\n      this.setState({\n        loading: '',\n      });\n    }, 500);\n  }\n\n  componentWillUnmount () {\n    if (this.timeoutId) {\n        clearTimeout(this.timeoutId);\n    }\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  render() {\n    return (\n      <Layout location={this.props.location}>\n        <div className={`body ${this.state.loading}`}>\n          <div id=\"wrapper\" className=\"page\">\n            <SmallHeader timeout={this.state.timeout} />\n            <GyroController\n              timeout={this.state.timeout}\n              setWrapperRef={this.setWrapperRef}>\n              <MainExperimental\n              timeout={this.state.timeout}\n              data={this.props.data}\n              setWrapperRef={this.setWrapperRef}>\n              <CameraHolder facingMode=\"environment\"\n                position=\"300 20 -300\"\n                rotation=\"0 315 0\"\n                camera=\"webcam\"\n                id=\"cameraRig\"\n               />\n              </MainExperimental>\n              { Instructions() }\n            </GyroController>\n            <Footer timeout={this.state.timeout} />\n          </div>\n          <div id=\"bg\"></div>\n        </div>\n      </Layout>\n    )\n  }\n}\n\nexport default ExperimentalPage\n\n/*\n\n\n{ SingleImage() }\n\n{ EyeChart() }\n\nconst singleImageD = {src:'#earthDegrees'};\nconst eyeChartD = {src:'#eyeChart'};\n\nconst SingleImage = () => <AReactImage spherical=\"true\" fluid={singleImageD} radius=\"4000\" position=\"0 0 0\" rotation=\"0 0 0\" />;\n\nconst EyeChart = () => <AReactImage src=\"#eyeChart\" fluid={eyeChartD} height={650} width={300} position=\"1200 0 0\" rotation=\"0 90 0\" />;\n\n */\n\nconst Instructions = () => {\n  return (\n    <div className=\"content\" id=\"instructions\">\n        <div className=\"inner\">\n          <h3>a device-only experience</h3>\n          <p className=\"singleSpace\">\n            from the center, tilt up or down\n         <br />\n           in one of the four directions\n          <br/>\n            selecting elements at the end\n           </p>\n      </div>\n    </div>\n  );\n}\n\nexport const experimentalFluidImage = graphql`\nfragment experimentalFluidImage on File {\n  childImageSharp {\n    fluid(maxWidth: 1024) {\n      ...GatsbyImageSharpFluid\n    }\n  }\n}\n`;\n\n\nexport const experimentalPageQuery = graphql`\nquery experimentalPageQuery{\n  allFile{\n    edges{\n      node{\n        id\n        ...fluidImage\n      }\n    }\n  }\n}\n`;\n\n/**\n *                <CameraHolder facingMode=\"user\"\n                  position=\"-300 20 -300\"\n                  rotation=\"0 135 0\"\n                  camera=\"webcamFront\"\n                  id=\"cameraRig2\"\n                 />\n\n                 {\n                 // geometry=\"primitive: sphere; radius: 2000\" material=\"opacity:0.5\" position=\"0 0 0\" />}\n                 //              <a-image src=\"#earthDegrees\" geometry=\"primitive: sphere; radius: 2000\" material=\"opacity:0.5\" position=\"0 0 0\" />\n                 //\n                 //              <a-entity geometry={radius} position={props.position} rotation={props.rotation}>\n                 //              <a-image geometry={radius} src={props.fluid.src} position=\"0 0 0\" />\n                 //              </a-entity>\n                 //\n                 //              <a-image geometry={radius} src={props.fluid.src} position=\"0 0 0\" />\n                 }\n*/\n"],"sourceRoot":""}