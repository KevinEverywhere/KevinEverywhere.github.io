{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/core-js/modules/_typed-array.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_typed.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_array-fill.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_typed-buffer.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_to-index.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.repeat.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.sub.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.number.constructor.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.array.last-index-of.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.typed.data-view.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_string-repeat.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_array-copy-within.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.typed.float32-array.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.typed.uint8-array.js","webpack:///./node_modules/aframe-extras/index.js","webpack:///./node_modules/aframe-extras/src/controls/index.js","webpack:///./node_modules/aframe-extras/src/controls/checkpoint-controls.js","webpack:///./node_modules/aframe-extras/src/controls/gamepad-controls.js","webpack:///./node_modules/aframe-extras/lib/GamepadButton.js","webpack:///./node_modules/aframe-extras/lib/GamepadButtonEvent.js","webpack:///./node_modules/aframe-extras/src/controls/keyboard-controls.js","webpack:///./node_modules/aframe-extras/lib/keyboard.polyfill.js","webpack:///./node_modules/aframe-extras/src/controls/touch-controls.js","webpack:///./node_modules/aframe-extras/src/controls/movement-controls.js","webpack:///./node_modules/aframe-extras/src/controls/trackpad-controls.js","webpack:///./node_modules/aframe-extras/src/loaders/index.js","webpack:///./node_modules/aframe-extras/src/loaders/animation-mixer.js","webpack:///./node_modules/aframe-extras/src/loaders/collada-model-legacy.js","webpack:///./node_modules/aframe-extras/lib/ColladaLoader.js","webpack:///./node_modules/aframe-extras/src/loaders/fbx-model.js","webpack:///./node_modules/aframe-extras/lib/FBXLoader.js","webpack:///./node_modules/aframe-extras/src/loaders/gltf-model-legacy.js","webpack:///./node_modules/aframe-extras/lib/fetch-script.js","webpack:///./node_modules/aframe-extras/src/loaders/object-model.js","webpack:///./node_modules/aframe-extras/src/misc/index.js","webpack:///./node_modules/aframe-extras/src/misc/checkpoint.js","webpack:///./node_modules/aframe-extras/src/misc/cube-env-map.js","webpack:///./node_modules/aframe-extras/src/misc/grab.js","webpack:///./node_modules/aframe-extras/src/misc/jump-ability.js","webpack:///./node_modules/aframe-extras/src/misc/kinematic-body.js","webpack:///./node_modules/aframe-extras/src/misc/mesh-smooth.js","webpack:///./node_modules/aframe-extras/src/misc/normal-material.js","webpack:///./node_modules/aframe-extras/src/misc/sphere-collider.js","webpack:///./node_modules/aframe-extras/src/pathfinding/index.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-mesh.js","webpack:///./node_modules/aframe-extras/src/pathfinding/nav-agent.js","webpack:///./node_modules/aframe-extras/src/pathfinding/system.js","webpack:///./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack:///./node_modules/aframe-extras/src/primitives/index.js","webpack:///./node_modules/aframe-extras/src/primitives/a-grid.js","webpack:///./node_modules/aframe-extras/src/primitives/a-hexgrid.js","webpack:///./node_modules/aframe-extras/lib/hex-grid.min.js","webpack:///./node_modules/aframe-extras/lib/default-hex-grid.js","webpack:///./node_modules/aframe-extras/src/primitives/a-ocean.js","webpack:///./node_modules/aframe-extras/src/primitives/a-tube.js"],"names":["LIBRARY","global","fails","$export","$typed","$buffer","ctx","anInstance","propertyDesc","hide","redefineAll","toInteger","toLength","toIndex","toAbsoluteIndex","toPrimitive","has","classof","isObject","toObject","isArrayIter","create","getPrototypeOf","gOPN","f","getIterFn","uid","wks","createArrayMethod","createArrayIncludes","speciesConstructor","ArrayIterators","Iterators","$iterDetect","setSpecies","arrayFill","arrayCopyWithin","$DP","$GOPD","dP","gOPD","RangeError","TypeError","Uint8Array","ArrayProto","Array","$ArrayBuffer","ArrayBuffer","$DataView","DataView","arrayForEach","arrayFilter","arraySome","arrayEvery","arrayFind","arrayFindIndex","arrayIncludes","arrayIndexOf","arrayValues","values","arrayKeys","keys","arrayEntries","entries","arrayLastIndexOf","lastIndexOf","arrayReduce","reduce","arrayReduceRight","reduceRight","arrayJoin","join","arraySort","sort","arraySlice","slice","arrayToString","toString","arrayToLocaleString","toLocaleString","ITERATOR","TAG","TYPED_CONSTRUCTOR","DEF_CONSTRUCTOR","ALL_CONSTRUCTORS","CONSTR","TYPED_ARRAY","TYPED","VIEW","$map","O","length","allocate","LITTLE_ENDIAN","Uint16Array","buffer","FORCED_SET","set","toOffset","it","BYTES","offset","validate","C","speciesFromList","list","fromList","index","result","addGetter","key","internal","get","this","_d","$from","source","i","step","iterator","aLen","arguments","mapfn","undefined","mapping","iterFn","call","next","done","push","value","$of","TO_LOCALE_BUG","$toLocaleString","apply","proto","copyWithin","target","start","every","callbackfn","fill","filter","find","predicate","findIndex","forEach","indexOf","searchElement","includes","separator","map","reverse","middle","Math","floor","some","comparefn","subarray","begin","end","$begin","byteOffset","BYTES_PER_ELEMENT","$slice","$set","arrayLike","src","len","$iterators","isTAIndex","String","$getDesc","$setDesc","desc","configurable","writable","enumerable","S","F","getOwnPropertyDescriptor","defineProperty","$TypedArrayPrototype$","constructor","module","exports","KEY","wrapper","CLAMPED","NAME","GETTER","SETTER","TypedArray","Base","TAC","FORCED","ABV","TypedArrayPrototype","addElement","that","data","v","o","getter","round","setter","$offset","$length","byteLength","klass","$len","b","l","e","iter","Function","prototype","concat","$nativeIterator","CORRECT_ITER_NAME","name","$iterator","G","W","of","from","P","Typed","TypedArrayConstructors","split","endPos","DESCRIPTORS","setToStringTag","PROTOTYPE","WRONG_INDEX","Infinity","BaseBuffer","abs","pow","log","LN2","$BUFFER","$LENGTH","$OFFSET","packIEEE754","mLen","nBytes","m","c","eLen","eMax","eBias","rt","s","unpackIEEE754","nBits","NaN","unpackI32","bytes","packI8","packI16","packI32","packF64","packF32","view","isLittleEndian","intIndex","store","_b","pack","conversion","ArrayBufferProto","j","$setInt8","setInt8","getInt8","setUint8","bufferLength","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","number","repeat","createHTML","cof","inheritIfRequired","$trim","trim","$Number","BROKEN_COF","TRIM","toNumber","argument","third","radix","maxCode","first","charCodeAt","code","digits","parseInt","valueOf","toIObject","$native","NEGATIVE_ZERO","min","defined","count","str","res","n","to","inc","init","AFRAME","registerComponent","schema","enabled","mode","oneOf","animateSpeed","active","checkpoint","isNavMeshConstrained","THREE","Vector3","position","targetPosition","play","pause","setCheckpoint","el","emit","sync","distanceTo","setAttribute","components","updateNavLocation","isVelocityActive","getVelocity","setLength","copy","getAttribute","object3D","getWorldPosition","add","getOffset","sub","GamepadButton","GamepadButtonEvent","controller","debug","camera","type","rotationSensitivity","scene","sceneEl","prevTime","window","performance","now","buttons","rotation","pitch","Object3D","x","degToRad","yaw","y","addBehavior","update","tick","t","dt","updateButtonState","updateRotation","remove","isConnected","dpad","getDpad","joystick0","getJoystick","inputX","inputY","getVelocityDelta","dVelocity","z","isRotationActive","joystick1","lookControls","hasLookControls","pitchObject","yawObject","lookVector","multiplyScalar","max","PI","gamepad","getGamepad","pressed","Object","event","localGamepad","navigator","getGamepads","proxyControls","getButton","getAxis","axes","Vector2","Error","DPAD_RIGHT","DPAD_LEFT","DPAD_UP","DPAD_DOWN","connected","getID","id","assign","FACE_1","FACE_2","FACE_3","FACE_4","L_SHOULDER_1","R_SHOULDER_1","L_SHOULDER_2","R_SHOULDER_2","SELECT","START","VENDOR","details","KeyboardEvent","localKeys","listeners","keydown","onKeyDown","bind","keyup","onKeyUp","blur","onBlur","attachEventListeners","getKeys","KeyW","ArrowUp","KeyA","ArrowLeft","KeyS","ArrowDown","KeyD","ArrowRight","clone","removeEventListeners","addEventListener","removeEventListener","utils","shouldCaptureKeyEvent","hasOwnProperty","console","isPressed","isProxied","getKeyboard","nativeKeyboardEvent","DOM_KEY_LOCATION_STANDARD","DOM_KEY_LOCATION_LEFT","DOM_KEY_LOCATION_RIGHT","DOM_KEY_LOCATION_NUMPAD","STANDARD","LEFT","RIGHT","NUMPAD","contains","ss","os","platform","userAgent","browser","vendor","browser_os","mergeIf","baseTable","select","table","keyCode","keyCodeToInfoTable","keyCap","location","keyIdentifierTable","locationTable","codeToKeyTable","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","OSLeft","OSRight","NumpadEnter","Space","Digit0","shiftKey","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyB","KeyC","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyT","KeyU","KeyV","KeyX","KeyY","KeyZ","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadComma","NumpadSubtract","NumpadDecimal","NumpadDivide","Semicolon","Equal","Comma","Minus","Period","Slash","Backquote","BracketLeft","Backslash","BracketRight","Quote","IntlBackslash","r","keyFixTable","Esc","Nonconvert","Left","Up","Right","Down","Del","Menu","MediaNextTrack","MediaPreviousTrack","SelectMedia","HalfWidth","FullWidth","RomanCharacters","Crsel","Exsel","Zoom","codeTable","k","item","nativeLocation","_","keyInfoForEvent","which","keyInfo","keyLocation","keyIdentifier","entry","define","p","queryKeyCap","locale","toLowerCase","identifyKey","reverseEnabled","bindMethods","direction","addEventListeners","canvasEl","canvas","onTouchStart","onTouchEnd","touches","preventDefault","vector2","quaternion","clampedEnd","dependencies","controls","speed","fly","constrainToNavMesh","velocityCtrl","velocity","heading","Quaternion","navGroup","navNode","hasLoaded","injectControls","prevData","nav","systems","addAgent","removeAgent","updateVelocityCtrl","updateVelocity","lengthSq","getGroup","getNode","clampStep","hasAttribute","control","getPositionDelta","cameraEl","premultiply","applyQuaternion","factor","enableNegX","enablePosX","enableNegZ","enablePosZ","zVel","xVel","onAxisMove","isMoving","canRecordAxis","startingAxisData","handleSwipeAxis","handleTouchAxis","axisData","detail","axis","velX","velZ","absChangeZ","LoopMode","once","LoopOnce","LoopRepeat","pingpong","LoopPingPong","regExpEscape","replace","clip","duration","clampWhenFinished","crossFadeDuration","loop","repetitions","timeScale","_this","model","mixer","activeActions","getObject3D","load","AnimationMixer","action","loopDelta","stopAllAction","changes","diff","stopAction","playAction","setDuration","setLoop","setEffectiveTimeScale","fadeOut","stop","clips","animations","geometry","re","RegExp","match","clipAction","fadeIn","isNaN","ColladaLoader","Component","loader","self","rendererSystem","renderer","colladaModel","traverse","object","isMesh","material","color","applyColorCorrection","emissive","emissiveMap","setObject3D","format","removeObject3D","manager","DefaultLoadingManager","crossOrigin","url","onLoad","onProgress","onError","scope","path","LoaderUtils","extractUrlBase","FileLoader","setPath","text","parse","setResourcePath","resourcePath","options","warn","setCrossOrigin","getElementsByTagName","xml","array","childNodes","child","nodeName","parseStrings","parts","parseFloats","parseFloat","parseInts","parseId","substring","isEmpty","parseAssetUnit","parseAssetUpAxis","textContent","parseLibrary","libraryName","parser","library","elements","buildLibrary","builder","build","getBuild","parseAnimationSampler","inputs","nodeType","semantic","parseAnimationChannel","shift","sid","arraySyntax","memberSyntax","member","indices","sampler","buildAnimation","tracks","channels","samplers","sources","channel","inputId","INPUT","outputId","OUTPUT","createKeyframeTracks","buildAnimationChannel","getAnimation","inputSource","outputSource","time","stride","il","jl","node","nodes","transform","transforms","defaultMatrix","matrix","transpose","keyframes","a","transformAnimationData","prepareAnimationData","uuid","scale","animation","times","positionData","quaternionData","scaleData","keyframe","fromArray","decompose","w","VectorKeyframeTrack","QuaternionKeyframeTrack","property","defaultValue","empty","prev","getPrev","getNext","interpolate","createMissingKeyframes","buildAnimationClip","animationTracks","AnimationClip","getAnimationClip","parseSkin","bindShapeMatrix","parseSource","joints","parseJoints","vertexWeights","parseVertexWeights","vcount","buildController","geometries","skin","weights","jointOffset","JOINT","weightOffset","WEIGHT","jointSource","inverseSource","INV_BIND_MATRIX","jointCount","vertexSkinData","skinIndex","weightId","skinWeight","weight","descending","d","bindMatrix","Matrix4","identity","boneInverse","buildSkin","skinIndices","skinWeights","buildImage","init_from","getImage","images","parseEffectProfileCOMMON","surfaces","parseEffectNewparam","technique","parseEffectTechnique","extra","parseEffectExtra","parseEffectSurface","parseEffectSampler","parameters","parseEffectParameters","parseEffectParameter","opaque","parseEffectParameterTexture","parseEffectParameterTextureExtra","parseEffectParameterTextureExtraTechnique","toUpperCase","parseEffectExtraTechnique","buildEffect","buildMaterial","effect","effects","profile","MeshPhongMaterial","MeshLambertMaterial","MeshBasicMaterial","getTexture","textureObject","image","extension","tgaLoader","textureLoader","getTextureLoader","texture","wrapS","wrapU","RepeatWrapping","ClampToEdgeWrapping","wrapT","wrapV","offsetU","offsetV","repeatU","repeatV","parameter","specular","specularMap","normalMap","lightMap","shininess","transparent","transparency","opacity","double_sided","side","DoubleSide","getMaterial","materials","parseCameraOptics","parseCameraTechnique","parseCameraParameters","buildCamera","optics","PerspectiveCamera","yfov","aspect_ratio","znear","zfar","ymag","xmag","aspectRatio","OrthographicCamera","getCamera","cameras","parseLightTechnique","parseLightParameters","Color","falloffAngle","distance","sqrt","buildLight","light","DirectionalLight","PointLight","SpotLight","AmbientLight","getLight","lights","accessor","parseGeometryVertices","parseGeometryPrimitive","primitive","hasUV","inputname","checkUVCoordinates","primitives","uvsNeedsFix","buildGeometry","vertices","groupedPrimitives","groupPrimitives","primitiveType","buildGeometryType","normal","uv","uv2","BufferGeometry","materialKeys","g","vc","addGroup","input","prevLength","buildGeometryData","addAttribute","Float32BufferAttribute","pushVector","sourceStride","sourceArray","kl","getGeometry","buildKinematicsModel","parseKinematicsTechniqueCommon","parseKinematicsJoint","links","parseKinematicsLink","parseKinematicsJointParameter","limits","zeroPosition","middlePosition","attachments","parseKinematicsAttachment","parseKinematicsTransform","joint","pop","obj","angle","parsePhysicsRigidBody","parsePhysicsTechniqueCommon","inertia","mass","parseKinematicsBindJointAxis","param","tmpJointIndex","jointIndex","substr","buildKinematicsScene","buildTransformList","collada","querySelector","vector","parseNode","instanceCameras","instanceControllers","instanceLights","instanceGeometries","instanceNodes","parseNodeInstance","multiply","makeTranslation","makeRotationAxis","hasNode","skeletons","instances","instance","symbol","buildSkeleton","boneData","sortedBoneData","skeleton","buildBoneHierarchy","visualScenes","children","error","bone","processed","bones","boneInverses","Skeleton","root","isBone","buildNode","objects","instanceCamera","controllers","newObjects","buildObjects","isSkinnedMesh","normalizeSkinWeights","instanceLight","Bone","Group","fallbackMaterial","resolveMaterialBinding","instanceMaterials","LineBasicMaterial","skinning","attributes","LineSegments","Line","SkinnedMesh","Mesh","buildVisualScene","group","getVisualScene","Scene","DOMParser","parseFromString","version","asset","unit","upAxis","parseAsset","TextureLoader","TGALoader","kinematics","kinematicsModels","physicsModels","kinematicsScenes","mesh","element","prepareNodes","rigidBodies","bindJointAxis","setupAnimations","kinematicsModelId","kinematicsSceneId","visualSceneId","kinematicsModel","kinematicsScene","getKinematicsScene","visualScene","jointMap","targetElement","parentVisualElement","parentElement","connect","m0","getJointValue","jointData","setJointValue","visualElement","visualElementName","setupKinematics","parseScene","setFromEuler","Euler","FBXLoader","crossorigin","fbxTree","connections","sceneGraph","FBXTreeParser","GeometryParser","AnimationParser","TextParser","BinaryParser","BinaryReader","littleEndian","dv","FBXTree","getFbxVersion","convertFBXTimeToSeconds","resourceDirectory","setResponseType","setTimeout","itemError","FBXBuffer","CORRECT","convertArrayBufferToString","FBXText","cursor","isFbxFormatASCII","parseConnections","parseImages","textures","parseTextures","parseMaterials","deformers","parseDeformers","geometryMap","connectionMap","Map","Connections","rawConnection","fromID","toID","relationship","parents","parentRelationship","ID","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","base64Content","parseImage","filename","content","fileName","Loader","Handlers","URL","createObjectURL","Blob","textureMap","textureNodes","Texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","Scaling","currentPath","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","setValues","BumpFactor","bumpScale","Diffuse","DiffuseColor","DisplacementFactor","displacementScale","Emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","Opacity","ReflectionFactor","reflectivity","Shininess","Specular","SpecularColor","bumpMap","displacementMap","envMap","EquirectangularReflectionMapping","alphaMap","LayeredTexture","morphTargets","DeformerNodes","Deformer","deformerNode","relationships","attrType","parseSkeleton","geometryID","morphTarget","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","Transform","transformLink","TransformLink","linkMode","Mode","Indexes","Weights","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","modelMap","parseModels","modelNodes","Model","modelNode","setLookAtProperties","connection","parent","bindSkeleton","createAmbientLight","setupMorphMaterials","isGroup","createCamera","createLight","createMesh","createCurve","PropertyBinding","sanitizeNodeName","setModelTransforms","subBone","matrixWorld","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","width","innerWidth","height","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","setFocalLength","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","FarAttenuationEnd","EnableFarAttenuation","InnerAngle","penumbra","OuterAngle","CastShadows","castShadow","vertexColors","VertexColors","FBX_Deformer","geo","linewidth","transformData","eulerOrder","RotationOrder","translation","Lcl_Translation","rotationOffset","RotationOffset","Lcl_Rotation","preRotation","PreRotation","postRotation","PostRotation","Lcl_Scaling","generateTransform","applyMatrix","lookAtTarget","pos","lookAt","bindMatrices","parsePoseNodes","geoConnParent","BindPoseNode","Pose","poseNodes","PoseNode","isArray","poseNode","Node","Matrix","GlobalSettings","ambientColor","AmbientColor","morphAttributes","matUuid","sharedMat","geoNodes","Geometry","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","vertex","applyToBufferAttribute","colors","Uint16BufferAttribute","weightsIndices","normalAttribute","Matrix3","getNormalMatrix","uvs","uvBuffer","mappingType","prevMaterialIndex","materialIndex","startIndex","currentIndex","groups","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","parseUVs","weightTable","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceNormals","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","rawTarget","morphGeoNode","genMorphGeometry","morphGeo","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UV","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","NURBSCurve","order","Order","startKnot","endKnot","degree","knots","KnotVector","controlPoints","pointsValues","Points","Vector4","Form","getPoints","positions","Float32Array","toArray","BufferAttribute","animationClips","rawClips","parseClips","rawClip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","curves","rawCurves","animationCurve","KeyTime","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","getModelAnimTransform","preRotations","postRotations","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","rawTracks","generateTracks","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","interpolateRotations","inverse","euler","quaternionValues","val","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","elem","prevValue","xIndex","yIndex","zIndex","xValue","yValue","zValue","curve","valuesSpan","absoluteSpan","numSubIntervals","nextValue","initialTime","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","nodeAttrs","attrs","parseNodeAttr","currentNode","contentLine","propName","propValue","connProps","rest","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","skip","endOfContent","size","endOffset","getUint64","numProperties","nameLen","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getInt64","getArrayBuffer","arrayLength","encoding","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","Zlib","reader2","Inflate","decompress","low","high","nullByte","decodeText","dataArray","infoObject","tempMat","tempEuler","tempVec","getEulerOrder","makeRotationFromEuler","getInverse","setPosition","enums","a1","a2","promise","fetchScript","loadLoader","loaderPromise","then","GLTFLoader","_this2","gltfModel","removeScript","script","document","getElementById","parentNode","removeChild","fetchScriptInternal","Promise","resolve","reject","timeout","scriptId","Date","ceil","random","createElement","async","createScript","timeoutId","disableTimeout","clearTimeout","ok","firstScript","insertBefore","appendScript","settings","ObjectLoader","targetEl","fire","applyEnvMap","materialNames","needsUpdate","multiple","enableBackground","CubeTextureLoader","object3dsetHandler","oldData","addedMaterialNames","removedMaterialNames","maintainedMaterialNames","setBackground","background","system","physics","GRABBED_STATE","grabbing","hitEl","constraint","onHit","onGripOpen","onGripClose","removeState","removeConstraint","evt","is","addState","CANNON","LockConstraint","body","addConstraint","on","playerHeight","maxJumps","numJumps","beginJump","events","bindings","collide","onCollide","initialVelocity","normalizedVelocity","currentSurfaceNormal","groundNormal","radius","linearDamping","enableSlopes","enableJumps","addComponent","Vec3","Body","fixedRotation","addShape","Sphere","addBody","removeBody","removeComponent","beforeStep","groundBody","groundHeight","contacts","getContacts","maxInterval","contact","bi","ni","negate","bj","dot","projectOnPlane","rj","ri","normalize","raycastToGround","driver","world","gravity","ray","hitNormal","vFrom","vTo","Ray","_updateDirection","intersectBody","hasHit","hitNormalWorld","computeVertexNormals","MeshNormalMaterial","flatShading","applyMaterial","meshPosition","colliderScale","box","distanceMap","state","watch","observer","els","collisions","handleHit","handleHitEnd","MutationObserver","observe","childList","subtree","disconnect","objectEls","querySelectorAll","Box3","colliderRadius","scaleVec","clear","getWorldScale","extent","isEntity","setFromObject","getSize","getCenter","hasLoadedNavMesh","loadNavMesh","navMesh","navMeshGeometry","isBufferGeometry","fromBufferGeometry","updateMatrixWorld","setNavMeshGeometry","vDest","vDelta","vNext","destination","raycaster","Raycaster","getPath","gazeTarget","vCurrent","vWaypoint","subVectors","origin","intersections","intersectObject","getNavMesh","point","Pathfinding","pathfinder","ZONE","registerSystem","agents","Set","setZoneData","createZone","agent","ctrl","groupID","findPath","getClosestNode","endTarget","computeCentroids","faces","centroid","divideScalar","roundNumber","Number","toFixed","sample","mergeVertexIds","u","setPolygonCentroid","vertexIds","cleanPolygon","h","angleTo","neighbours","isConvex","cross","distanceToSquared","isPointInPoly","isVectorInPolygon","triarea2","vequal","scoreFunction","sinkDown","bubbleUp","rescoreElement","cost","visited","closed","cleanUp","heap","search","heuristic","buildZone","_buildNavigationMesh","_buildPolygonGroups","_getSharedVerticesInOrder","portals","mergeVertices","_buildPolygonsFromGeometry","polygons","_buildPolygonNeighbours","faceVertexUvs","left","right","stringPull","zones","getRandomNode","Plane","Triangle","setFromCoplanarPoints","projectPoint","closestPointToPoint","I","registerPrimitive","defaultComponents","mappings","vg","defaultHexGrid","Primitive","fetch","response","json","addMesh","grid","HexGrid","fromJSON","board","Board","generateTilemap","addMaterial","VERSION","TAU","DEG_TO_RAD","RAD_TO_DEG","SQRT3","TILE","ENT","STR","HEX","SQR","ABS","tiles","tileGroup","overlay","finder","AStarFinder","setGrid","setEntityOnTile","cellToPixel","cell","heightOffset","tile","entity","addTile","snapTileToGrid","removeTile","splice","dispose","removeAllTiles","getTileAtCell","cellToHash","cells","snapToGrid","pixelToCell","getRandomTile","Tools","randomInt","generateOverlay","reset","generateTiles","Cell","q","userData","walkable","_calcCost","_priority","_visited","_parent","uniqueID","LinkedList","generateID","equals","cellSize","numCells","extrudeSettings","autogenerated","_createVertex","cellShape","Shape","moveTo","lineTo","autoClose","cellGeo","verticesNeedUpdate","cellShapeGeo","ShapeGeometry","_cellWidth","_cellLength","_hashDelimeter","_directions","_diagonals","_list","_vec3","_cel","_conversionVec","_geoCache","_matCache","TWO_THIRDS","_cubeRound","getCellAt","getNeighbors","getRandomCell","clearPath","generateTile","amount","ExtrudeGeometry","Tile","tileScale","bevelEnabled","bevelSegments","steps","bevelSize","bevelThickness","merge","generateTilePoly","rotateOnAxis","generate","createPointsGeometry","getJSON","callback","cache","toJSON","cos","sin","SqrGrid","_fullCellSize","randomizeRGB","objectType","selected","highlight","structure","_emissive","getHex","setHex","deselect","toggle","free","last","objToNodeMap","sortArray","addNode","swapObjects","showDebug","dump","moveUp","moveDown","_e","_listener","isOnce","context","signal","params","execute","detach","isBound","_destroy","_bindings","_prevParams","dispatch","memorize","_shouldPropagate","validateListener","_registerListener","_indexOfListener","_addBinding","addOnce","removeAll","getNumListeners","halt","forget","Signal","allowDiagonal","heuristicFilter","compare","PathUtil","backtrace","biBacktrace","pathLength","expandPath","smoothenPath","isWalkableAt","compressPath","imageLoader","LoadingManager","ImageLoader","sourceFile","MouseCaster","down","rightDown","pickedObject","selectedObject","allHits","wheel","screenPosition","_camera","_raycaster","_preventDefault","_onDocumentMouseMove","_onDocumentMouseDown","_onDocumentMouseUp","_onMouseWheel","OVER","OUT","DOWN","UP","CLICK","WHEEL","setFromCamera","ctrlKey","clientX","clientY","stopPropagation","wheelDelta","alpha","antialias","clearColor","sortObjects","fog","lightPosition","cameraType","cameraPosition","orthoZoom","minDistance","maxDistance","zoomSpeed","noZoom","WebGLRenderer","setClearColor","container","contolled","OrbitControls","domElement","top","bottom","updateProjectionMatrix","setSize","attachTo","style","setPixelRatio","devicePixelRatio","appendChild","render","updateOrthoZoom","focusOn","SelectionManager","mouse","onSelect","onDeselect","toggleSelection","onMouse","clearSelection","clamp","sign","getShortRotation","isPlainObject","nwf","Performance","elapsedTime","lastChild","radixSort","XMLHttpRequest","onreadystatechange","status","statusText","JSON","responseText","open","setRequestHeader","send","ocean","depth","density","amplitude","amplitudeVariance","speedVariance","PlaneGeometry","waves","ang","amp","shading","FlatShading","vprops","verts","tube","segments","radialSegments","CatmullRomCurve3","TubeGeometry"],"mappings":"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","file":"2-be1be890ad3ca6b09384.js","sourcesContent":["'use strict';\nif (require('./_descriptors')) {\n  var LIBRARY = require('./_library');\n  var global = require('./_global');\n  var fails = require('./_fails');\n  var $export = require('./_export');\n  var $typed = require('./_typed');\n  var $buffer = require('./_typed-buffer');\n  var ctx = require('./_ctx');\n  var anInstance = require('./_an-instance');\n  var propertyDesc = require('./_property-desc');\n  var hide = require('./_hide');\n  var redefineAll = require('./_redefine-all');\n  var toInteger = require('./_to-integer');\n  var toLength = require('./_to-length');\n  var toIndex = require('./_to-index');\n  var toAbsoluteIndex = require('./_to-absolute-index');\n  var toPrimitive = require('./_to-primitive');\n  var has = require('./_has');\n  var classof = require('./_classof');\n  var isObject = require('./_is-object');\n  var toObject = require('./_to-object');\n  var isArrayIter = require('./_is-array-iter');\n  var create = require('./_object-create');\n  var getPrototypeOf = require('./_object-gpo');\n  var gOPN = require('./_object-gopn').f;\n  var getIterFn = require('./core.get-iterator-method');\n  var uid = require('./_uid');\n  var wks = require('./_wks');\n  var createArrayMethod = require('./_array-methods');\n  var createArrayIncludes = require('./_array-includes');\n  var speciesConstructor = require('./_species-constructor');\n  var ArrayIterators = require('./es6.array.iterator');\n  var Iterators = require('./_iterators');\n  var $iterDetect = require('./_iter-detect');\n  var setSpecies = require('./_set-species');\n  var arrayFill = require('./_array-fill');\n  var arrayCopyWithin = require('./_array-copy-within');\n  var $DP = require('./_object-dp');\n  var $GOPD = require('./_object-gopd');\n  var dP = $DP.f;\n  var gOPD = $GOPD.f;\n  var RangeError = global.RangeError;\n  var TypeError = global.TypeError;\n  var Uint8Array = global.Uint8Array;\n  var ARRAY_BUFFER = 'ArrayBuffer';\n  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;\n  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';\n  var PROTOTYPE = 'prototype';\n  var ArrayProto = Array[PROTOTYPE];\n  var $ArrayBuffer = $buffer.ArrayBuffer;\n  var $DataView = $buffer.DataView;\n  var arrayForEach = createArrayMethod(0);\n  var arrayFilter = createArrayMethod(2);\n  var arraySome = createArrayMethod(3);\n  var arrayEvery = createArrayMethod(4);\n  var arrayFind = createArrayMethod(5);\n  var arrayFindIndex = createArrayMethod(6);\n  var arrayIncludes = createArrayIncludes(true);\n  var arrayIndexOf = createArrayIncludes(false);\n  var arrayValues = ArrayIterators.values;\n  var arrayKeys = ArrayIterators.keys;\n  var arrayEntries = ArrayIterators.entries;\n  var arrayLastIndexOf = ArrayProto.lastIndexOf;\n  var arrayReduce = ArrayProto.reduce;\n  var arrayReduceRight = ArrayProto.reduceRight;\n  var arrayJoin = ArrayProto.join;\n  var arraySort = ArrayProto.sort;\n  var arraySlice = ArrayProto.slice;\n  var arrayToString = ArrayProto.toString;\n  var arrayToLocaleString = ArrayProto.toLocaleString;\n  var ITERATOR = wks('iterator');\n  var TAG = wks('toStringTag');\n  var TYPED_CONSTRUCTOR = uid('typed_constructor');\n  var DEF_CONSTRUCTOR = uid('def_constructor');\n  var ALL_CONSTRUCTORS = $typed.CONSTR;\n  var TYPED_ARRAY = $typed.TYPED;\n  var VIEW = $typed.VIEW;\n  var WRONG_LENGTH = 'Wrong length!';\n\n  var $map = createArrayMethod(1, function (O, length) {\n    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);\n  });\n\n  var LITTLE_ENDIAN = fails(function () {\n    // eslint-disable-next-line no-undef\n    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;\n  });\n\n  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {\n    new Uint8Array(1).set({});\n  });\n\n  var toOffset = function (it, BYTES) {\n    var offset = toInteger(it);\n    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');\n    return offset;\n  };\n\n  var validate = function (it) {\n    if (isObject(it) && TYPED_ARRAY in it) return it;\n    throw TypeError(it + ' is not a typed array!');\n  };\n\n  var allocate = function (C, length) {\n    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {\n      throw TypeError('It is not a typed array constructor!');\n    } return new C(length);\n  };\n\n  var speciesFromList = function (O, list) {\n    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);\n  };\n\n  var fromList = function (C, list) {\n    var index = 0;\n    var length = list.length;\n    var result = allocate(C, length);\n    while (length > index) result[index] = list[index++];\n    return result;\n  };\n\n  var addGetter = function (it, key, internal) {\n    dP(it, key, { get: function () { return this._d[internal]; } });\n  };\n\n  var $from = function from(source /* , mapfn, thisArg */) {\n    var O = toObject(source);\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var iterFn = getIterFn(O);\n    var i, length, values, result, step, iterator;\n    if (iterFn != undefined && !isArrayIter(iterFn)) {\n      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {\n        values.push(step.value);\n      } O = values;\n    }\n    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);\n    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {\n      result[i] = mapping ? mapfn(O[i], i) : O[i];\n    }\n    return result;\n  };\n\n  var $of = function of(/* ...items */) {\n    var index = 0;\n    var length = arguments.length;\n    var result = allocate(this, length);\n    while (length > index) result[index] = arguments[index++];\n    return result;\n  };\n\n  // iOS Safari 6.x fails here\n  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });\n\n  var $toLocaleString = function toLocaleString() {\n    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);\n  };\n\n  var proto = {\n    copyWithin: function copyWithin(target, start /* , end */) {\n      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);\n    },\n    every: function every(callbackfn /* , thisArg */) {\n      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars\n      return arrayFill.apply(validate(this), arguments);\n    },\n    filter: function filter(callbackfn /* , thisArg */) {\n      return speciesFromList(this, arrayFilter(validate(this), callbackfn,\n        arguments.length > 1 ? arguments[1] : undefined));\n    },\n    find: function find(predicate /* , thisArg */) {\n      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    findIndex: function findIndex(predicate /* , thisArg */) {\n      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    forEach: function forEach(callbackfn /* , thisArg */) {\n      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    indexOf: function indexOf(searchElement /* , fromIndex */) {\n      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    includes: function includes(searchElement /* , fromIndex */) {\n      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    join: function join(separator) { // eslint-disable-line no-unused-vars\n      return arrayJoin.apply(validate(this), arguments);\n    },\n    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars\n      return arrayLastIndexOf.apply(validate(this), arguments);\n    },\n    map: function map(mapfn /* , thisArg */) {\n      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduce.apply(validate(this), arguments);\n    },\n    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars\n      return arrayReduceRight.apply(validate(this), arguments);\n    },\n    reverse: function reverse() {\n      var that = this;\n      var length = validate(that).length;\n      var middle = Math.floor(length / 2);\n      var index = 0;\n      var value;\n      while (index < middle) {\n        value = that[index];\n        that[index++] = that[--length];\n        that[length] = value;\n      } return that;\n    },\n    some: function some(callbackfn /* , thisArg */) {\n      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    },\n    sort: function sort(comparefn) {\n      return arraySort.call(validate(this), comparefn);\n    },\n    subarray: function subarray(begin, end) {\n      var O = validate(this);\n      var length = O.length;\n      var $begin = toAbsoluteIndex(begin, length);\n      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(\n        O.buffer,\n        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,\n        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)\n      );\n    }\n  };\n\n  var $slice = function slice(start, end) {\n    return speciesFromList(this, arraySlice.call(validate(this), start, end));\n  };\n\n  var $set = function set(arrayLike /* , offset */) {\n    validate(this);\n    var offset = toOffset(arguments[1], 1);\n    var length = this.length;\n    var src = toObject(arrayLike);\n    var len = toLength(src.length);\n    var index = 0;\n    if (len + offset > length) throw RangeError(WRONG_LENGTH);\n    while (index < len) this[offset + index] = src[index++];\n  };\n\n  var $iterators = {\n    entries: function entries() {\n      return arrayEntries.call(validate(this));\n    },\n    keys: function keys() {\n      return arrayKeys.call(validate(this));\n    },\n    values: function values() {\n      return arrayValues.call(validate(this));\n    }\n  };\n\n  var isTAIndex = function (target, key) {\n    return isObject(target)\n      && target[TYPED_ARRAY]\n      && typeof key != 'symbol'\n      && key in target\n      && String(+key) == String(key);\n  };\n  var $getDesc = function getOwnPropertyDescriptor(target, key) {\n    return isTAIndex(target, key = toPrimitive(key, true))\n      ? propertyDesc(2, target[key])\n      : gOPD(target, key);\n  };\n  var $setDesc = function defineProperty(target, key, desc) {\n    if (isTAIndex(target, key = toPrimitive(key, true))\n      && isObject(desc)\n      && has(desc, 'value')\n      && !has(desc, 'get')\n      && !has(desc, 'set')\n      // TODO: add validation descriptor w/o calling accessors\n      && !desc.configurable\n      && (!has(desc, 'writable') || desc.writable)\n      && (!has(desc, 'enumerable') || desc.enumerable)\n    ) {\n      target[key] = desc.value;\n      return target;\n    } return dP(target, key, desc);\n  };\n\n  if (!ALL_CONSTRUCTORS) {\n    $GOPD.f = $getDesc;\n    $DP.f = $setDesc;\n  }\n\n  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {\n    getOwnPropertyDescriptor: $getDesc,\n    defineProperty: $setDesc\n  });\n\n  if (fails(function () { arrayToString.call({}); })) {\n    arrayToString = arrayToLocaleString = function toString() {\n      return arrayJoin.call(this);\n    };\n  }\n\n  var $TypedArrayPrototype$ = redefineAll({}, proto);\n  redefineAll($TypedArrayPrototype$, $iterators);\n  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);\n  redefineAll($TypedArrayPrototype$, {\n    slice: $slice,\n    set: $set,\n    constructor: function () { /* noop */ },\n    toString: arrayToString,\n    toLocaleString: $toLocaleString\n  });\n  addGetter($TypedArrayPrototype$, 'buffer', 'b');\n  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');\n  addGetter($TypedArrayPrototype$, 'byteLength', 'l');\n  addGetter($TypedArrayPrototype$, 'length', 'e');\n  dP($TypedArrayPrototype$, TAG, {\n    get: function () { return this[TYPED_ARRAY]; }\n  });\n\n  // eslint-disable-next-line max-statements\n  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {\n    CLAMPED = !!CLAMPED;\n    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';\n    var GETTER = 'get' + KEY;\n    var SETTER = 'set' + KEY;\n    var TypedArray = global[NAME];\n    var Base = TypedArray || {};\n    var TAC = TypedArray && getPrototypeOf(TypedArray);\n    var FORCED = !TypedArray || !$typed.ABV;\n    var O = {};\n    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];\n    var getter = function (that, index) {\n      var data = that._d;\n      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);\n    };\n    var setter = function (that, index, value) {\n      var data = that._d;\n      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;\n      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);\n    };\n    var addElement = function (that, index) {\n      dP(that, index, {\n        get: function () {\n          return getter(this, index);\n        },\n        set: function (value) {\n          return setter(this, index, value);\n        },\n        enumerable: true\n      });\n    };\n    if (FORCED) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME, '_d');\n        var index = 0;\n        var offset = 0;\n        var buffer, byteLength, length, klass;\n        if (!isObject(data)) {\n          length = toIndex(data);\n          byteLength = length * BYTES;\n          buffer = new $ArrayBuffer(byteLength);\n        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          buffer = data;\n          offset = toOffset($offset, BYTES);\n          var $len = data.byteLength;\n          if ($length === undefined) {\n            if ($len % BYTES) throw RangeError(WRONG_LENGTH);\n            byteLength = $len - offset;\n            if (byteLength < 0) throw RangeError(WRONG_LENGTH);\n          } else {\n            byteLength = toLength($length) * BYTES;\n            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);\n          }\n          length = byteLength / BYTES;\n        } else if (TYPED_ARRAY in data) {\n          return fromList(TypedArray, data);\n        } else {\n          return $from.call(TypedArray, data);\n        }\n        hide(that, '_d', {\n          b: buffer,\n          o: offset,\n          l: byteLength,\n          e: length,\n          v: new $DataView(buffer)\n        });\n        while (index < length) addElement(that, index++);\n      });\n      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);\n      hide(TypedArrayPrototype, 'constructor', TypedArray);\n    } else if (!fails(function () {\n      TypedArray(1);\n    }) || !fails(function () {\n      new TypedArray(-1); // eslint-disable-line no-new\n    }) || !$iterDetect(function (iter) {\n      new TypedArray(); // eslint-disable-line no-new\n      new TypedArray(null); // eslint-disable-line no-new\n      new TypedArray(1.5); // eslint-disable-line no-new\n      new TypedArray(iter); // eslint-disable-line no-new\n    }, true)) {\n      TypedArray = wrapper(function (that, data, $offset, $length) {\n        anInstance(that, TypedArray, NAME);\n        var klass;\n        // `ws` module bug, temporarily remove validation length for Uint8Array\n        // https://github.com/websockets/ws/pull/645\n        if (!isObject(data)) return new Base(toIndex(data));\n        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {\n          return $length !== undefined\n            ? new Base(data, toOffset($offset, BYTES), $length)\n            : $offset !== undefined\n              ? new Base(data, toOffset($offset, BYTES))\n              : new Base(data);\n        }\n        if (TYPED_ARRAY in data) return fromList(TypedArray, data);\n        return $from.call(TypedArray, data);\n      });\n      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {\n        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);\n      });\n      TypedArray[PROTOTYPE] = TypedArrayPrototype;\n      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;\n    }\n    var $nativeIterator = TypedArrayPrototype[ITERATOR];\n    var CORRECT_ITER_NAME = !!$nativeIterator\n      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);\n    var $iterator = $iterators.values;\n    hide(TypedArray, TYPED_CONSTRUCTOR, true);\n    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);\n    hide(TypedArrayPrototype, VIEW, true);\n    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);\n\n    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {\n      dP(TypedArrayPrototype, TAG, {\n        get: function () { return NAME; }\n      });\n    }\n\n    O[NAME] = TypedArray;\n\n    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);\n\n    $export($export.S, NAME, {\n      BYTES_PER_ELEMENT: BYTES\n    });\n\n    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {\n      from: $from,\n      of: $of\n    });\n\n    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);\n\n    $export($export.P, NAME, proto);\n\n    setSpecies(NAME);\n\n    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });\n\n    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);\n\n    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;\n\n    $export($export.P + $export.F * fails(function () {\n      new TypedArray(1).slice();\n    }), NAME, { slice: $slice });\n\n    $export($export.P + $export.F * (fails(function () {\n      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();\n    }) || !fails(function () {\n      TypedArrayPrototype.toLocaleString.call([1, 2]);\n    })), NAME, { toLocaleString: $toLocaleString });\n\n    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;\n    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);\n  };\n} else module.exports = function () { /* empty */ };\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar uid = require('./_uid');\nvar TYPED = uid('typed_array');\nvar VIEW = uid('view');\nvar ABV = !!(global.ArrayBuffer && global.DataView);\nvar CONSTR = ABV;\nvar i = 0;\nvar l = 9;\nvar Typed;\n\nvar TypedArrayConstructors = (\n  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'\n).split(',');\n\nwhile (i < l) {\n  if (Typed = global[TypedArrayConstructors[i++]]) {\n    hide(Typed.prototype, TYPED, true);\n    hide(Typed.prototype, VIEW, true);\n  } else CONSTR = false;\n}\n\nmodule.exports = {\n  ABV: ABV,\n  CONSTR: CONSTR,\n  TYPED: TYPED,\n  VIEW: VIEW\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar global = require('./_global');\nvar DESCRIPTORS = require('./_descriptors');\nvar LIBRARY = require('./_library');\nvar $typed = require('./_typed');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar fails = require('./_fails');\nvar anInstance = require('./_an-instance');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar toIndex = require('./_to-index');\nvar gOPN = require('./_object-gopn').f;\nvar dP = require('./_object-dp').f;\nvar arrayFill = require('./_array-fill');\nvar setToStringTag = require('./_set-to-string-tag');\nvar ARRAY_BUFFER = 'ArrayBuffer';\nvar DATA_VIEW = 'DataView';\nvar PROTOTYPE = 'prototype';\nvar WRONG_LENGTH = 'Wrong length!';\nvar WRONG_INDEX = 'Wrong index!';\nvar $ArrayBuffer = global[ARRAY_BUFFER];\nvar $DataView = global[DATA_VIEW];\nvar Math = global.Math;\nvar RangeError = global.RangeError;\n// eslint-disable-next-line no-shadow-restricted-names\nvar Infinity = global.Infinity;\nvar BaseBuffer = $ArrayBuffer;\nvar abs = Math.abs;\nvar pow = Math.pow;\nvar floor = Math.floor;\nvar log = Math.log;\nvar LN2 = Math.LN2;\nvar BUFFER = 'buffer';\nvar BYTE_LENGTH = 'byteLength';\nvar BYTE_OFFSET = 'byteOffset';\nvar $BUFFER = DESCRIPTORS ? '_b' : BUFFER;\nvar $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;\nvar $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;\n\n// IEEE754 conversions based on https://github.com/feross/ieee754\nfunction packIEEE754(value, mLen, nBytes) {\n  var buffer = new Array(nBytes);\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;\n  var i = 0;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  var e, m, c;\n  value = abs(value);\n  // eslint-disable-next-line no-self-compare\n  if (value != value || value === Infinity) {\n    // eslint-disable-next-line no-self-compare\n    m = value != value ? 1 : 0;\n    e = eMax;\n  } else {\n    e = floor(log(value) / LN2);\n    if (value * (c = pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * pow(2, eBias - 1) * pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);\n  buffer[--i] |= s * 128;\n  return buffer;\n}\nfunction unpackIEEE754(buffer, mLen, nBytes) {\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = eLen - 7;\n  var i = nBytes - 1;\n  var s = buffer[i--];\n  var e = s & 127;\n  var m;\n  s >>= 7;\n  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : s ? -Infinity : Infinity;\n  } else {\n    m = m + pow(2, mLen);\n    e = e - eBias;\n  } return (s ? -1 : 1) * m * pow(2, e - mLen);\n}\n\nfunction unpackI32(bytes) {\n  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];\n}\nfunction packI8(it) {\n  return [it & 0xff];\n}\nfunction packI16(it) {\n  return [it & 0xff, it >> 8 & 0xff];\n}\nfunction packI32(it) {\n  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];\n}\nfunction packF64(it) {\n  return packIEEE754(it, 52, 8);\n}\nfunction packF32(it) {\n  return packIEEE754(it, 23, 4);\n}\n\nfunction addGetter(C, key, internal) {\n  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });\n}\n\nfunction get(view, bytes, index, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = store.slice(start, start + bytes);\n  return isLittleEndian ? pack : pack.reverse();\n}\nfunction set(view, bytes, index, conversion, value, isLittleEndian) {\n  var numIndex = +index;\n  var intIndex = toIndex(numIndex);\n  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);\n  var store = view[$BUFFER]._b;\n  var start = intIndex + view[$OFFSET];\n  var pack = conversion(+value);\n  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];\n}\n\nif (!$typed.ABV) {\n  $ArrayBuffer = function ArrayBuffer(length) {\n    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);\n    var byteLength = toIndex(length);\n    this._b = arrayFill.call(new Array(byteLength), 0);\n    this[$LENGTH] = byteLength;\n  };\n\n  $DataView = function DataView(buffer, byteOffset, byteLength) {\n    anInstance(this, $DataView, DATA_VIEW);\n    anInstance(buffer, $ArrayBuffer, DATA_VIEW);\n    var bufferLength = buffer[$LENGTH];\n    var offset = toInteger(byteOffset);\n    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');\n    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);\n    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);\n    this[$BUFFER] = buffer;\n    this[$OFFSET] = offset;\n    this[$LENGTH] = byteLength;\n  };\n\n  if (DESCRIPTORS) {\n    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');\n    addGetter($DataView, BUFFER, '_b');\n    addGetter($DataView, BYTE_LENGTH, '_l');\n    addGetter($DataView, BYTE_OFFSET, '_o');\n  }\n\n  redefineAll($DataView[PROTOTYPE], {\n    getInt8: function getInt8(byteOffset) {\n      return get(this, 1, byteOffset)[0] << 24 >> 24;\n    },\n    getUint8: function getUint8(byteOffset) {\n      return get(this, 1, byteOffset)[0];\n    },\n    getInt16: function getInt16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;\n    },\n    getUint16: function getUint16(byteOffset /* , littleEndian */) {\n      var bytes = get(this, 2, byteOffset, arguments[1]);\n      return bytes[1] << 8 | bytes[0];\n    },\n    getInt32: function getInt32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1]));\n    },\n    getUint32: function getUint32(byteOffset /* , littleEndian */) {\n      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;\n    },\n    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);\n    },\n    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {\n      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);\n    },\n    setInt8: function setInt8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      set(this, 1, byteOffset, packI8, value);\n    },\n    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {\n      set(this, 2, byteOffset, packI16, value, arguments[2]);\n    },\n    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packI32, value, arguments[2]);\n    },\n    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {\n      set(this, 4, byteOffset, packF32, value, arguments[2]);\n    },\n    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {\n      set(this, 8, byteOffset, packF64, value, arguments[2]);\n    }\n  });\n} else {\n  if (!fails(function () {\n    $ArrayBuffer(1);\n  }) || !fails(function () {\n    new $ArrayBuffer(-1); // eslint-disable-line no-new\n  }) || fails(function () {\n    new $ArrayBuffer(); // eslint-disable-line no-new\n    new $ArrayBuffer(1.5); // eslint-disable-line no-new\n    new $ArrayBuffer(NaN); // eslint-disable-line no-new\n    return $ArrayBuffer.name != ARRAY_BUFFER;\n  })) {\n    $ArrayBuffer = function ArrayBuffer(length) {\n      anInstance(this, $ArrayBuffer);\n      return new BaseBuffer(toIndex(length));\n    };\n    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];\n    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {\n      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);\n    }\n    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;\n  }\n  // iOS Safari 7.x bug\n  var view = new $DataView(new $ArrayBuffer(2));\n  var $setInt8 = $DataView[PROTOTYPE].setInt8;\n  view.setInt8(0, 2147483648);\n  view.setInt8(1, 2147483649);\n  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {\n    setInt8: function setInt8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    },\n    setUint8: function setUint8(byteOffset, value) {\n      $setInt8.call(this, byteOffset, value << 24 >> 24);\n    }\n  }, true);\n}\nsetToStringTag($ArrayBuffer, ARRAY_BUFFER);\nsetToStringTag($DataView, DATA_VIEW);\nhide($DataView[PROTOTYPE], $typed.VIEW, true);\nexports[ARRAY_BUFFER] = $ArrayBuffer;\nexports[DATA_VIEW] = $DataView;\n","// https://tc39.github.io/ecma262/#sec-toindex\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toInteger(it);\n  var length = toLength(number);\n  if (number !== length) throw RangeError('Wrong length!');\n  return length;\n};\n","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function (createHTML) {\n  return function sub() {\n    return createHTML(this, 'sub', '', '');\n  };\n});\n","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n","'use strict';\nvar $export = require('./_export');\nvar toIObject = require('./_to-iobject');\nvar toInteger = require('./_to-integer');\nvar toLength = require('./_to-length');\nvar $native = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])\n  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n    // convert -0 to +0\n    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;\n    var O = toIObject(this);\n    var length = toLength(O.length);\n    var index = length - 1;\n    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));\n    if (index < 0) index = length + index;\n    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;\n    return -1;\n  }\n});\n","var $export = require('./_export');\n$export($export.G + $export.W + $export.F * !require('./_typed').ABV, {\n  DataView: require('./_typed-buffer').DataView\n});\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","require('./_typed-array')('Float32', 4, function (init) {\n  return function Float32Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","require('./_typed-array')('Uint8', 1, function (init) {\n  return function Uint8Array(data, byteOffset, length) {\n    return init(this, data, byteOffset, length);\n  };\n});\n","require('./src/controls');\n\nrequire('./src/loaders');\n\nrequire('./src/misc');\n\nrequire('./src/pathfinding');\n\nrequire('./src/primitives');","require('./checkpoint-controls');\n\nrequire('./gamepad-controls');\n\nrequire('./keyboard-controls');\n\nrequire('./touch-controls');\n\nrequire('./movement-controls');\n\nrequire('./trackpad-controls');","require(\"core-js/modules/es6.string.sub\");\n\nvar EPS = 0.1;\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    mode: {\n      \"default\": 'teleport',\n      oneOf: ['teleport', 'animate']\n    },\n    animateSpeed: {\n      \"default\": 3.0\n    }\n  },\n  init: function init() {\n    this.active = true;\n    this.checkpoint = null;\n    this.isNavMeshConstrained = false;\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n  play: function play() {\n    this.active = true;\n  },\n  pause: function pause() {\n    this.active = false;\n  },\n  setCheckpoint: function setCheckpoint(checkpoint) {\n    var el = this.el;\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {\n        checkpoint: this.checkpoint\n      });\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync(); // Ignore new checkpoint if we're already there.\n\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {\n      checkpoint: checkpoint\n    });\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {\n        checkpoint: checkpoint\n      });\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n  isVelocityActive: function isVelocityActive() {\n    return !!(this.active && this.checkpoint);\n  },\n  getVelocity: function getVelocity() {\n    if (!this.active) return;\n    var data = this.data;\n    var offset = this.offset;\n    var position = this.position;\n    var targetPosition = this.targetPosition;\n    var checkpoint = this.checkpoint;\n    this.sync();\n\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {\n        checkpoint: checkpoint\n      });\n      return offset.set(0, 0, 0);\n    }\n\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n  sync: function sync() {\n    var offset = this.offset;\n    var position = this.position;\n    var targetPosition = this.targetPosition;\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\n/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\nvar GamepadButton = require('../../lib/GamepadButton'),\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\n\nvar JOYSTICK_EPS = 0.2;\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n  /*******************************************************************\n   * Statics\n   */\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n  schema: {\n    // Controller 0-3\n    controller: {\n      \"default\": 0,\n      oneOf: [0, 1, 2, 3]\n    },\n    // Enable/disable features\n    enabled: {\n      \"default\": true\n    },\n    // Debugging\n    debug: {\n      \"default\": false\n    },\n    // Heading element for rotation\n    camera: {\n      \"default\": '[camera]',\n      type: 'selector'\n    },\n    // Rotation sensitivity\n    rotationSensitivity: {\n      \"default\": 2.0\n    }\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function init() {\n    var scene = this.el.sceneEl;\n    this.prevTime = window.performance.now(); // Button state\n\n    this.buttons = {}; // Rotation\n\n    var rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = THREE.Math.degToRad(rotation.x);\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = THREE.Math.degToRad(rotation.y);\n    this.yaw.add(this.pitch);\n    scene.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function update() {\n    this.tick();\n  },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function tick(t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function remove() {},\n\n  /*******************************************************************\n   * Movement\n   */\n  isVelocityActive: function isVelocityActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var dpad = this.getDpad(),\n        joystick0 = this.getJoystick(0),\n        inputX = dpad.x || joystick0.x,\n        inputY = dpad.y || joystick0.y;\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var dpad = this.getDpad(),\n        joystick0 = this.getJoystick(0),\n        inputX = dpad.x || joystick0.x,\n        inputY = dpad.y || joystick0.y,\n        dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n  isRotationActive: function isRotationActive() {\n    if (!this.data.enabled || !this.isConnected()) return false;\n    var joystick1 = this.getJoystick(1);\n    return Math.abs(joystick1.x) > JOYSTICK_EPS || Math.abs(joystick1.y) > JOYSTICK_EPS;\n  },\n  updateRotation: function updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n    var data = this.data;\n    var yaw = this.yaw;\n    var pitch = this.pitch;\n    var lookControls = data.camera.components['look-controls'];\n    var hasLookControls = lookControls && lookControls.pitchObject && lookControls.yawObject; // Sync with look-controls pitch/yaw if available.\n\n    if (hasLookControls) {\n      pitch.rotation.copy(lookControls.pitchObject.rotation);\n      yaw.rotation.copy(lookControls.yawObject.rotation);\n    }\n\n    var lookVector = this.getJoystick(1);\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    data.camera.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0); // Sync with look-controls pitch/yaw if available.\n\n    if (hasLookControls) {\n      lookControls.pitchObject.rotation.copy(pitch.rotation);\n      lookControls.yawObject.rotation.copy(yaw.rotation);\n    }\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n  updateButtonState: function updateButtonState() {\n    var gamepad = this.getGamepad();\n\n    if (this.data.enabled && gamepad) {\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n  emit: function emit(event) {\n    // Emit original event.\n    this.el.emit(event.type, event); // Emit convenience event, identifying button index.\n\n    this.el.emit(event.type + ':' + event.index, new GamepadButtonEvent(event.type, event.index, event));\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @return {Gamepad}\n   */\n  getGamepad: function getGamepad() {\n    var localGamepad = navigator.getGamepads && navigator.getGamepads()[this.data.controller],\n        proxyControls = this.el.sceneEl.components['proxy-controls'],\n        proxyGamepad = proxyControls && proxyControls.isConnected() && proxyControls.getGamepad(this.data.controller);\n    return proxyGamepad || localGamepad;\n  },\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function getButton(index) {\n    return this.getGamepad().buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function getAxis(index) {\n    return this.getGamepad().axes[index];\n  },\n\n  /**\n   * Returns the state of the given joystick (0 or 1) as a THREE.Vector2.\n   * @param  {number} id The joystick (0, 1) for which to find state.\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function getJoystick(index) {\n    var gamepad = this.getGamepad();\n\n    switch (index) {\n      case 0:\n        return new THREE.Vector2(gamepad.axes[0], gamepad.axes[1]);\n\n      case 1:\n        return new THREE.Vector2(gamepad.axes[2], gamepad.axes[3]);\n\n      default:\n        throw new Error('Unexpected joystick index \"%d\".', index);\n    }\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @return {THREE.Vector2}\n   */\n  getDpad: function getDpad() {\n    var gamepad = this.getGamepad();\n\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return new THREE.Vector2();\n    }\n\n    return new THREE.Vector2((gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0) + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0), (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0) + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0));\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function isConnected() {\n    var gamepad = this.getGamepad();\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function getID() {\n    return this.getGamepad().id;\n  }\n});","require(\"core-js/modules/es6.object.assign\");\n\nmodule.exports = Object.assign(function GamepadButton() {}, {\n  FACE_1: 0,\n  FACE_2: 1,\n  FACE_3: 2,\n  FACE_4: 3,\n  L_SHOULDER_1: 4,\n  R_SHOULDER_1: 5,\n  L_SHOULDER_2: 6,\n  R_SHOULDER_2: 7,\n  SELECT: 8,\n  START: 9,\n  DPAD_UP: 12,\n  DPAD_DOWN: 13,\n  DPAD_LEFT: 14,\n  DPAD_RIGHT: 15,\n  VENDOR: 16\n});","function GamepadButtonEvent(type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nmodule.exports = GamepadButtonEvent;","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire('../../lib/keyboard.polyfill');\n\nvar MAX_DELTA = 0.2,\n    PROXY_FLAG = '__keyboard-controls-proxy';\nvar KeyboardEvent = window.KeyboardEvent;\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youre a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\n\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    debug: {\n      \"default\": false\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this)\n    };\n    this.attachEventListeners();\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    var data = this.data,\n        keys = this.getKeys();\n    this.dVelocity.set(0, 0, 0);\n\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp) {\n        this.dVelocity.z -= 1;\n      }\n\n      if (keys.KeyA || keys.ArrowLeft) {\n        this.dVelocity.x -= 1;\n      }\n\n      if (keys.KeyS || keys.ArrowDown) {\n        this.dVelocity.z += 1;\n      }\n\n      if (keys.KeyD || keys.ArrowRight) {\n        this.dVelocity.x += 1;\n      }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n  play: function play() {\n    this.attachEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  attachEventListeners: function attachEventListeners() {\n    window.addEventListener('keydown', this.listeners.keydown, false);\n    window.addEventListener('keyup', this.listeners.keyup, false);\n    window.addEventListener('blur', this.listeners.blur, false);\n  },\n  removeEventListeners: function removeEventListeners() {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n  onKeyDown: function onKeyDown(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n  onKeyUp: function onKeyUp(event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n  onBlur: function onBlur() {\n    for (var code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n  emit: function emit(event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    } // Emit convenience event, identifying key.\n\n\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n  isPressed: function isPressed(code) {\n    return code in this.getKeys();\n  },\n  getKeys: function getKeys() {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n\n    return this.localKeys;\n  },\n  isProxied: function isProxied() {\n    var proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n});","require(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\n/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function (global) {\n  var nativeKeyboardEvent = 'KeyboardEvent' in global;\n  if (!nativeKeyboardEvent) global.KeyboardEvent = function KeyboardEvent() {\n    throw TypeError('Illegal constructor');\n  };\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT = 0x01; // e.g. Left Alt key\n\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT = 0x02; // e.g. Right Alt key\n\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD; //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) {\n    return String(s).indexOf(ss) !== -1;\n  }\n\n  var os = function () {\n    if (contains(navigator.platform, 'Win')) {\n      return 'win';\n    }\n\n    if (contains(navigator.platform, 'Mac')) {\n      return 'mac';\n    }\n\n    if (contains(navigator.platform, 'CrOS')) {\n      return 'cros';\n    }\n\n    if (contains(navigator.platform, 'Linux')) {\n      return 'linux';\n    }\n\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) {\n      return 'ios';\n    }\n\n    return '';\n  }();\n\n  var browser = function () {\n    if (contains(navigator.userAgent, 'Chrome/')) {\n      return 'chrome';\n    }\n\n    if (contains(navigator.vendor, 'Apple')) {\n      return 'safari';\n    }\n\n    if (contains(navigator.userAgent, 'MSIE')) {\n      return 'ie';\n    }\n\n    if (contains(navigator.userAgent, 'Gecko/')) {\n      return 'moz';\n    }\n\n    if (contains(navigator.userAgent, 'Opera/')) {\n      return 'opera';\n    }\n\n    return '';\n  }();\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function (keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      var item = o[k];\n\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function (k) {\n      r[o[k]] = k;\n    });\n    return r;\n  } //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n  // Map of keyCode to keyInfo\n\n\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: {\n      code: 'Cancel'\n    },\n    // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: {\n      code: 'Backspace'\n    },\n    // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: {\n      code: 'Tab'\n    },\n    // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: {\n      code: 'Clear'\n    },\n    // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: {\n      code: 'Enter'\n    },\n    // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n    0x10: {\n      code: 'Shift'\n    },\n    0x11: {\n      code: 'Control'\n    },\n    0x12: {\n      code: 'Alt'\n    },\n    0x13: {\n      code: 'Pause'\n    },\n    // [USB: 0x48]\n    0x14: {\n      code: 'CapsLock'\n    },\n    // [USB: 0x39]\n    0x15: {\n      code: 'KanaMode'\n    },\n    // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: {\n      code: 'HangulMode'\n    },\n    // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: {\n      code: 'JunjaMode'\n    },\n    // (Not in D3E)\n    0x18: {\n      code: 'FinalMode'\n    },\n    // (Not in D3E)\n    0x19: {\n      code: 'KanjiMode'\n    },\n    // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: {\n      code: 'Escape'\n    },\n    // [USB: 0x29]\n    0x1C: {\n      code: 'Convert'\n    },\n    // [USB: 0x8a]\n    0x1D: {\n      code: 'NonConvert'\n    },\n    // [USB: 0x8b]\n    0x1E: {\n      code: 'Accept'\n    },\n    // (Not in D3E)\n    0x1F: {\n      code: 'ModeChange'\n    },\n    // (Not in D3E)\n    0x20: {\n      code: 'Space'\n    },\n    // [USB: 0x2c]\n    0x21: {\n      code: 'PageUp'\n    },\n    // [USB: 0x4b]\n    0x22: {\n      code: 'PageDown'\n    },\n    // [USB: 0x4e]\n    0x23: {\n      code: 'End'\n    },\n    // [USB: 0x4d]\n    0x24: {\n      code: 'Home'\n    },\n    // [USB: 0x4a]\n    0x25: {\n      code: 'ArrowLeft'\n    },\n    // [USB: 0x50]\n    0x26: {\n      code: 'ArrowUp'\n    },\n    // [USB: 0x52]\n    0x27: {\n      code: 'ArrowRight'\n    },\n    // [USB: 0x4f]\n    0x28: {\n      code: 'ArrowDown'\n    },\n    // [USB: 0x51]\n    0x29: {\n      code: 'Select'\n    },\n    // (Not in D3E)\n    0x2A: {\n      code: 'Print'\n    },\n    // (Not in D3E)\n    0x2B: {\n      code: 'Execute'\n    },\n    // [USB: 0x74] (Not in D3E)\n    0x2C: {\n      code: 'PrintScreen'\n    },\n    // [USB: 0x46]\n    0x2D: {\n      code: 'Insert'\n    },\n    // [USB: 0x49]\n    0x2E: {\n      code: 'Delete'\n    },\n    // [USB: 0x4c]\n    0x2F: {\n      code: 'Help'\n    },\n    // [USB: 0x75] ???\n    0x30: {\n      code: 'Digit0',\n      keyCap: '0'\n    },\n    // [USB: 0x27] 0)\n    0x31: {\n      code: 'Digit1',\n      keyCap: '1'\n    },\n    // [USB: 0x1e] 1!\n    0x32: {\n      code: 'Digit2',\n      keyCap: '2'\n    },\n    // [USB: 0x1f] 2@\n    0x33: {\n      code: 'Digit3',\n      keyCap: '3'\n    },\n    // [USB: 0x20] 3#\n    0x34: {\n      code: 'Digit4',\n      keyCap: '4'\n    },\n    // [USB: 0x21] 4$\n    0x35: {\n      code: 'Digit5',\n      keyCap: '5'\n    },\n    // [USB: 0x22] 5%\n    0x36: {\n      code: 'Digit6',\n      keyCap: '6'\n    },\n    // [USB: 0x23] 6^\n    0x37: {\n      code: 'Digit7',\n      keyCap: '7'\n    },\n    // [USB: 0x24] 7&\n    0x38: {\n      code: 'Digit8',\n      keyCap: '8'\n    },\n    // [USB: 0x25] 8*\n    0x39: {\n      code: 'Digit9',\n      keyCap: '9'\n    },\n    // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n    0x41: {\n      code: 'KeyA',\n      keyCap: 'a'\n    },\n    // [USB: 0x04]\n    0x42: {\n      code: 'KeyB',\n      keyCap: 'b'\n    },\n    // [USB: 0x05]\n    0x43: {\n      code: 'KeyC',\n      keyCap: 'c'\n    },\n    // [USB: 0x06]\n    0x44: {\n      code: 'KeyD',\n      keyCap: 'd'\n    },\n    // [USB: 0x07]\n    0x45: {\n      code: 'KeyE',\n      keyCap: 'e'\n    },\n    // [USB: 0x08]\n    0x46: {\n      code: 'KeyF',\n      keyCap: 'f'\n    },\n    // [USB: 0x09]\n    0x47: {\n      code: 'KeyG',\n      keyCap: 'g'\n    },\n    // [USB: 0x0a]\n    0x48: {\n      code: 'KeyH',\n      keyCap: 'h'\n    },\n    // [USB: 0x0b]\n    0x49: {\n      code: 'KeyI',\n      keyCap: 'i'\n    },\n    // [USB: 0x0c]\n    0x4A: {\n      code: 'KeyJ',\n      keyCap: 'j'\n    },\n    // [USB: 0x0d]\n    0x4B: {\n      code: 'KeyK',\n      keyCap: 'k'\n    },\n    // [USB: 0x0e]\n    0x4C: {\n      code: 'KeyL',\n      keyCap: 'l'\n    },\n    // [USB: 0x0f]\n    0x4D: {\n      code: 'KeyM',\n      keyCap: 'm'\n    },\n    // [USB: 0x10]\n    0x4E: {\n      code: 'KeyN',\n      keyCap: 'n'\n    },\n    // [USB: 0x11]\n    0x4F: {\n      code: 'KeyO',\n      keyCap: 'o'\n    },\n    // [USB: 0x12]\n    0x50: {\n      code: 'KeyP',\n      keyCap: 'p'\n    },\n    // [USB: 0x13]\n    0x51: {\n      code: 'KeyQ',\n      keyCap: 'q'\n    },\n    // [USB: 0x14]\n    0x52: {\n      code: 'KeyR',\n      keyCap: 'r'\n    },\n    // [USB: 0x15]\n    0x53: {\n      code: 'KeyS',\n      keyCap: 's'\n    },\n    // [USB: 0x16]\n    0x54: {\n      code: 'KeyT',\n      keyCap: 't'\n    },\n    // [USB: 0x17]\n    0x55: {\n      code: 'KeyU',\n      keyCap: 'u'\n    },\n    // [USB: 0x18]\n    0x56: {\n      code: 'KeyV',\n      keyCap: 'v'\n    },\n    // [USB: 0x19]\n    0x57: {\n      code: 'KeyW',\n      keyCap: 'w'\n    },\n    // [USB: 0x1a]\n    0x58: {\n      code: 'KeyX',\n      keyCap: 'x'\n    },\n    // [USB: 0x1b]\n    0x59: {\n      code: 'KeyY',\n      keyCap: 'y'\n    },\n    // [USB: 0x1c]\n    0x5A: {\n      code: 'KeyZ',\n      keyCap: 'z'\n    },\n    // [USB: 0x1d]\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5C: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0x5D: {\n      code: 'ContextMenu'\n    },\n    // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: {\n      code: 'Standby'\n    },\n    // [USB: 0x82] Sleep\n    0x60: {\n      code: 'Numpad0',\n      keyCap: '0',\n      location: NUMPAD\n    },\n    // [USB: 0x62]\n    0x61: {\n      code: 'Numpad1',\n      keyCap: '1',\n      location: NUMPAD\n    },\n    // [USB: 0x59]\n    0x62: {\n      code: 'Numpad2',\n      keyCap: '2',\n      location: NUMPAD\n    },\n    // [USB: 0x5a]\n    0x63: {\n      code: 'Numpad3',\n      keyCap: '3',\n      location: NUMPAD\n    },\n    // [USB: 0x5b]\n    0x64: {\n      code: 'Numpad4',\n      keyCap: '4',\n      location: NUMPAD\n    },\n    // [USB: 0x5c]\n    0x65: {\n      code: 'Numpad5',\n      keyCap: '5',\n      location: NUMPAD\n    },\n    // [USB: 0x5d]\n    0x66: {\n      code: 'Numpad6',\n      keyCap: '6',\n      location: NUMPAD\n    },\n    // [USB: 0x5e]\n    0x67: {\n      code: 'Numpad7',\n      keyCap: '7',\n      location: NUMPAD\n    },\n    // [USB: 0x5f]\n    0x68: {\n      code: 'Numpad8',\n      keyCap: '8',\n      location: NUMPAD\n    },\n    // [USB: 0x60]\n    0x69: {\n      code: 'Numpad9',\n      keyCap: '9',\n      location: NUMPAD\n    },\n    // [USB: 0x61]\n    0x6A: {\n      code: 'NumpadMultiply',\n      keyCap: '*',\n      location: NUMPAD\n    },\n    // [USB: 0x55]\n    0x6B: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0x6C: {\n      code: 'NumpadComma',\n      keyCap: ',',\n      location: NUMPAD\n    },\n    // [USB: 0x85]\n    0x6D: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6E: {\n      code: 'NumpadDecimal',\n      keyCap: '.',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0x6F: {\n      code: 'NumpadDivide',\n      keyCap: '/',\n      location: NUMPAD\n    },\n    // [USB: 0x54]\n    0x70: {\n      code: 'F1'\n    },\n    // [USB: 0x3a]\n    0x71: {\n      code: 'F2'\n    },\n    // [USB: 0x3b]\n    0x72: {\n      code: 'F3'\n    },\n    // [USB: 0x3c]\n    0x73: {\n      code: 'F4'\n    },\n    // [USB: 0x3d]\n    0x74: {\n      code: 'F5'\n    },\n    // [USB: 0x3e]\n    0x75: {\n      code: 'F6'\n    },\n    // [USB: 0x3f]\n    0x76: {\n      code: 'F7'\n    },\n    // [USB: 0x40]\n    0x77: {\n      code: 'F8'\n    },\n    // [USB: 0x41]\n    0x78: {\n      code: 'F9'\n    },\n    // [USB: 0x42]\n    0x79: {\n      code: 'F10'\n    },\n    // [USB: 0x43]\n    0x7A: {\n      code: 'F11'\n    },\n    // [USB: 0x44]\n    0x7B: {\n      code: 'F12'\n    },\n    // [USB: 0x45]\n    0x7C: {\n      code: 'F13'\n    },\n    // [USB: 0x68]\n    0x7D: {\n      code: 'F14'\n    },\n    // [USB: 0x69]\n    0x7E: {\n      code: 'F15'\n    },\n    // [USB: 0x6a]\n    0x7F: {\n      code: 'F16'\n    },\n    // [USB: 0x6b]\n    0x80: {\n      code: 'F17'\n    },\n    // [USB: 0x6c]\n    0x81: {\n      code: 'F18'\n    },\n    // [USB: 0x6d]\n    0x82: {\n      code: 'F19'\n    },\n    // [USB: 0x6e]\n    0x83: {\n      code: 'F20'\n    },\n    // [USB: 0x6f]\n    0x84: {\n      code: 'F21'\n    },\n    // [USB: 0x70]\n    0x85: {\n      code: 'F22'\n    },\n    // [USB: 0x71]\n    0x86: {\n      code: 'F23'\n    },\n    // [USB: 0x72]\n    0x87: {\n      code: 'F24'\n    },\n    // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n    0x90: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0x91: {\n      code: 'ScrollLock'\n    },\n    // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0xA1: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0xA2: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0xA3: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0xA4: {\n      code: 'AltLeft',\n      location: LEFT\n    },\n    // [USB: 0xe2]\n    0xA5: {\n      code: 'AltRight',\n      location: RIGHT\n    },\n    // [USB: 0xe6]\n    0xA6: {\n      code: 'BrowserBack'\n    },\n    // [USB: 0x0c/0x0224]\n    0xA7: {\n      code: 'BrowserForward'\n    },\n    // [USB: 0x0c/0x0225]\n    0xA8: {\n      code: 'BrowserRefresh'\n    },\n    // [USB: 0x0c/0x0227]\n    0xA9: {\n      code: 'BrowserStop'\n    },\n    // [USB: 0x0c/0x0226]\n    0xAA: {\n      code: 'BrowserSearch'\n    },\n    // [USB: 0x0c/0x0221]\n    0xAB: {\n      code: 'BrowserFavorites'\n    },\n    // [USB: 0x0c/0x0228]\n    0xAC: {\n      code: 'BrowserHome'\n    },\n    // [USB: 0x0c/0x0222]\n    0xAD: {\n      code: 'VolumeMute'\n    },\n    // [USB: 0x7f]\n    0xAE: {\n      code: 'VolumeDown'\n    },\n    // [USB: 0x81]\n    0xAF: {\n      code: 'VolumeUp'\n    },\n    // [USB: 0x80]\n    0xB0: {\n      code: 'MediaTrackNext'\n    },\n    // [USB: 0x0c/0x00b5]\n    0xB1: {\n      code: 'MediaTrackPrevious'\n    },\n    // [USB: 0x0c/0x00b6]\n    0xB2: {\n      code: 'MediaStop'\n    },\n    // [USB: 0x0c/0x00b7]\n    0xB3: {\n      code: 'MediaPlayPause'\n    },\n    // [USB: 0x0c/0x00cd]\n    0xB4: {\n      code: 'LaunchMail'\n    },\n    // [USB: 0x0c/0x018a]\n    0xB5: {\n      code: 'MediaSelect'\n    },\n    0xB6: {\n      code: 'LaunchApp1'\n    },\n    0xB7: {\n      code: 'LaunchApp2'\n    },\n    // 0xB8-0xB9 - reserved\n    0xBA: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0xBB: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0xBC: {\n      code: 'Comma',\n      keyCap: ','\n    },\n    // [USB: 0x36] ,<\n    0xBD: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBE: {\n      code: 'Period',\n      keyCap: '.'\n    },\n    // [USB: 0x37] .>\n    0xBF: {\n      code: 'Slash',\n      keyCap: '/'\n    },\n    // [USB: 0x38] /? (US Standard 101)\n    0xC0: {\n      code: 'Backquote',\n      keyCap: '`'\n    },\n    // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: {\n      code: 'BracketLeft',\n      keyCap: '['\n    },\n    // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: {\n      code: 'Backslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x31] \\| (US Standard 101)\n    0xDD: {\n      code: 'BracketRight',\n      keyCap: ']'\n    },\n    // [USB: 0x30] ]} (US Standard 101)\n    0xDE: {\n      code: 'Quote',\n      keyCap: '\\''\n    },\n    // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: {\n      code: 'IntlBackslash',\n      keyCap: '\\\\'\n    },\n    // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: {\n      code: 'Process'\n    },\n    // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n    // 0xF0-0xF5 - OEM specific\n    0xF6: {\n      code: 'Attn'\n    },\n    // [USB: 0x9a] (Not in D3E)\n    0xF7: {\n      code: 'CrSel'\n    },\n    // [USB: 0xa3] (Not in D3E)\n    0xF8: {\n      code: 'ExSel'\n    },\n    // [USB: 0xa4] (Not in D3E)\n    0xF9: {\n      code: 'EraseEof'\n    },\n    // (Not in D3E)\n    0xFA: {\n      code: 'Play'\n    },\n    // (Not in D3E)\n    0xFB: {\n      code: 'ZoomToggle'\n    },\n    // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: {\n      code: 'Clear'\n    } // [USB: 0x9c] (Not in D3E)\n\n  }; // No legacy keyCode, but listed in D3E:\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable, 'moz', {\n    0x3B: {\n      code: 'Semicolon',\n      keyCap: ';'\n    },\n    // [USB: 0x33] ;: (US Standard 101)\n    0x3D: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6B: {\n      code: 'Equal',\n      keyCap: '='\n    },\n    // [USB: 0x2e] =+\n    0x6D: {\n      code: 'Minus',\n      keyCap: '-'\n    },\n    // [USB: 0x2d] -_\n    0xBB: {\n      code: 'NumpadAdd',\n      keyCap: '+',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      keyCap: '-',\n      location: NUMPAD\n    } // [USB: 0x56]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'moz-win', {\n    0xAD: {\n      code: 'Minus',\n      keyCap: '-'\n    } // [USB: 0x2d] -_\n\n  });\n  mergeIf(keyCodeToInfoTable, 'chrome-mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  }); // Windows via Bootcamp (!)\n\n  if (0) {\n    mergeIf(keyCodeToInfoTable, 'chrome-win', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n    mergeIf(keyCodeToInfoTable, 'ie', {\n      0xC0: {\n        code: 'Quote',\n        keyCap: '\\''\n      },\n      // [USB: 0x34] '\" (US Standard 101)\n      0xDE: {\n        code: 'Backslash',\n        keyCap: '\\\\'\n      },\n      // [USB: 0x31] \\| (US Standard 101)\n      0xDF: {\n        code: 'Backquote',\n        keyCap: '`'\n      } // [USB: 0x35] `~ (US Standard 101)\n\n    });\n  }\n\n  mergeIf(keyCodeToInfoTable, 'safari', {\n    0x03: {\n      code: 'Enter'\n    },\n    // [USB: 0x28] old Safari\n    0x19: {\n      code: 'Tab'\n    } // [USB: 0x2b] old Safari for Shift+Tab\n\n  });\n  mergeIf(keyCodeToInfoTable, 'ios', {\n    0x0A: {\n      code: 'Enter',\n      location: STANDARD\n    } // [USB: 0x28]\n\n  });\n  mergeIf(keyCodeToInfoTable, 'safari-mac', {\n    0x5B: {\n      code: 'OSLeft',\n      location: LEFT\n    },\n    // [USB: 0xe3]\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    },\n    // [USB: 0xe7]\n    0xE5: {\n      code: 'KeyQ',\n      keyCap: 'Q'\n    } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n\n  }); //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = {\n      code: 'ShiftLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A1'] = {\n      code: 'ShiftRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A2'] = {\n      code: 'ControlLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A3'] = {\n      code: 'ControlRight',\n      location: RIGHT\n    };\n    keyIdentifierTable['U+00A4'] = {\n      code: 'AltLeft',\n      location: LEFT\n    };\n    keyIdentifierTable['U+00A5'] = {\n      code: 'AltRight',\n      location: RIGHT\n    };\n  }\n\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = {\n      code: 'ContextMenu'\n    };\n  }\n\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = {\n      code: 'Function'\n    };\n    keyIdentifierTable['U+001C'] = {\n      code: 'ArrowLeft'\n    };\n    keyIdentifierTable['U+001D'] = {\n      code: 'ArrowRight'\n    };\n    keyIdentifierTable['U+001E'] = {\n      code: 'ArrowUp'\n    };\n    keyIdentifierTable['U+001F'] = {\n      code: 'ArrowDown'\n    };\n    keyIdentifierTable['U+0001'] = {\n      code: 'Home'\n    }; // [USB: 0x4a] Fn + ArrowLeft\n\n    keyIdentifierTable['U+0004'] = {\n      code: 'End'\n    }; // [USB: 0x4d] Fn + ArrowRight\n\n    keyIdentifierTable['U+000B'] = {\n      code: 'PageUp'\n    }; // [USB: 0x4b] Fn + ArrowUp\n\n    keyIdentifierTable['U+000C'] = {\n      code: 'PageDown'\n    }; // [USB: 0x4e] Fn + ArrowDown\n  } //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n  // locationTable[location][keyCode] -> keyInfo\n\n\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: {\n      code: 'ShiftLeft',\n      location: LEFT\n    },\n    // [USB: 0xe1]\n    0x11: {\n      code: 'ControlLeft',\n      location: LEFT\n    },\n    // [USB: 0xe0]\n    0x12: {\n      code: 'AltLeft',\n      location: LEFT\n    } // [USB: 0xe2]\n\n  };\n  locationTable[RIGHT] = {\n    0x10: {\n      code: 'ShiftRight',\n      location: RIGHT\n    },\n    // [USB: 0xe5]\n    0x11: {\n      code: 'ControlRight',\n      location: RIGHT\n    },\n    // [USB: 0xe4]\n    0x12: {\n      code: 'AltRight',\n      location: RIGHT\n    } // [USB: 0xe6]\n\n  };\n  locationTable[NUMPAD] = {\n    0x0D: {\n      code: 'NumpadEnter',\n      location: NUMPAD\n    } // [USB: 0x58]\n\n  };\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0x6B: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    } // [USB: 0x57]\n\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: {\n      code: 'OSLeft',\n      location: LEFT\n    } // [USB: 0xe3]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: {\n      code: 'OSRight',\n      location: RIGHT\n    } // [USB: 0xe7]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    } // [USB: 0x53]\n\n  });\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: {\n      code: 'NumLock',\n      location: NUMPAD\n    },\n    // [USB: 0x53]\n    0xBB: {\n      code: 'NumpadAdd',\n      location: NUMPAD\n    },\n    // [USB: 0x57]\n    0xBD: {\n      code: 'NumpadSubtract',\n      location: NUMPAD\n    },\n    // [USB: 0x56]\n    0xBE: {\n      code: 'NumpadDecimal',\n      location: NUMPAD\n    },\n    // [USB: 0x63]\n    0xBF: {\n      code: 'NumpadDivide',\n      location: NUMPAD\n    } // [USB: 0x54]\n\n  }); //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: {\n      key: 'Shift'\n    },\n    ShiftRight: {\n      key: 'Shift'\n    },\n    ControlLeft: {\n      key: 'Control'\n    },\n    ControlRight: {\n      key: 'Control'\n    },\n    AltLeft: {\n      key: 'Alt'\n    },\n    AltRight: {\n      key: 'Alt'\n    },\n    OSLeft: {\n      key: 'OS'\n    },\n    OSRight: {\n      key: 'OS'\n    },\n    // Whitespace Keys\n    NumpadEnter: {\n      key: 'Enter'\n    },\n    Space: {\n      key: ' '\n    },\n    // Printable Keys\n    Digit0: {\n      key: '0',\n      shiftKey: ')'\n    },\n    Digit1: {\n      key: '1',\n      shiftKey: '!'\n    },\n    Digit2: {\n      key: '2',\n      shiftKey: '@'\n    },\n    Digit3: {\n      key: '3',\n      shiftKey: '#'\n    },\n    Digit4: {\n      key: '4',\n      shiftKey: '$'\n    },\n    Digit5: {\n      key: '5',\n      shiftKey: '%'\n    },\n    Digit6: {\n      key: '6',\n      shiftKey: '^'\n    },\n    Digit7: {\n      key: '7',\n      shiftKey: '&'\n    },\n    Digit8: {\n      key: '8',\n      shiftKey: '*'\n    },\n    Digit9: {\n      key: '9',\n      shiftKey: '('\n    },\n    KeyA: {\n      key: 'a',\n      shiftKey: 'A'\n    },\n    KeyB: {\n      key: 'b',\n      shiftKey: 'B'\n    },\n    KeyC: {\n      key: 'c',\n      shiftKey: 'C'\n    },\n    KeyD: {\n      key: 'd',\n      shiftKey: 'D'\n    },\n    KeyE: {\n      key: 'e',\n      shiftKey: 'E'\n    },\n    KeyF: {\n      key: 'f',\n      shiftKey: 'F'\n    },\n    KeyG: {\n      key: 'g',\n      shiftKey: 'G'\n    },\n    KeyH: {\n      key: 'h',\n      shiftKey: 'H'\n    },\n    KeyI: {\n      key: 'i',\n      shiftKey: 'I'\n    },\n    KeyJ: {\n      key: 'j',\n      shiftKey: 'J'\n    },\n    KeyK: {\n      key: 'k',\n      shiftKey: 'K'\n    },\n    KeyL: {\n      key: 'l',\n      shiftKey: 'L'\n    },\n    KeyM: {\n      key: 'm',\n      shiftKey: 'M'\n    },\n    KeyN: {\n      key: 'n',\n      shiftKey: 'N'\n    },\n    KeyO: {\n      key: 'o',\n      shiftKey: 'O'\n    },\n    KeyP: {\n      key: 'p',\n      shiftKey: 'P'\n    },\n    KeyQ: {\n      key: 'q',\n      shiftKey: 'Q'\n    },\n    KeyR: {\n      key: 'r',\n      shiftKey: 'R'\n    },\n    KeyS: {\n      key: 's',\n      shiftKey: 'S'\n    },\n    KeyT: {\n      key: 't',\n      shiftKey: 'T'\n    },\n    KeyU: {\n      key: 'u',\n      shiftKey: 'U'\n    },\n    KeyV: {\n      key: 'v',\n      shiftKey: 'V'\n    },\n    KeyW: {\n      key: 'w',\n      shiftKey: 'W'\n    },\n    KeyX: {\n      key: 'x',\n      shiftKey: 'X'\n    },\n    KeyY: {\n      key: 'y',\n      shiftKey: 'Y'\n    },\n    KeyZ: {\n      key: 'z',\n      shiftKey: 'Z'\n    },\n    Numpad0: {\n      key: '0'\n    },\n    Numpad1: {\n      key: '1'\n    },\n    Numpad2: {\n      key: '2'\n    },\n    Numpad3: {\n      key: '3'\n    },\n    Numpad4: {\n      key: '4'\n    },\n    Numpad5: {\n      key: '5'\n    },\n    Numpad6: {\n      key: '6'\n    },\n    Numpad7: {\n      key: '7'\n    },\n    Numpad8: {\n      key: '8'\n    },\n    Numpad9: {\n      key: '9'\n    },\n    NumpadMultiply: {\n      key: '*'\n    },\n    NumpadAdd: {\n      key: '+'\n    },\n    NumpadComma: {\n      key: ','\n    },\n    NumpadSubtract: {\n      key: '-'\n    },\n    NumpadDecimal: {\n      key: '.'\n    },\n    NumpadDivide: {\n      key: '/'\n    },\n    Semicolon: {\n      key: ';',\n      shiftKey: ':'\n    },\n    Equal: {\n      key: '=',\n      shiftKey: '+'\n    },\n    Comma: {\n      key: ',',\n      shiftKey: '<'\n    },\n    Minus: {\n      key: '-',\n      shiftKey: '_'\n    },\n    Period: {\n      key: '.',\n      shiftKey: '>'\n    },\n    Slash: {\n      key: '/',\n      shiftKey: '?'\n    },\n    Backquote: {\n      key: '`',\n      shiftKey: '~'\n    },\n    BracketLeft: {\n      key: '[',\n      shiftKey: '{'\n    },\n    Backslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    },\n    BracketRight: {\n      key: ']',\n      shiftKey: '}'\n    },\n    Quote: {\n      key: '\\'',\n      shiftKey: '\"'\n    },\n    IntlBackslash: {\n      key: '\\\\',\n      shiftKey: '|'\n    }\n  };\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: {\n      key: 'Meta'\n    },\n    OSRight: {\n      key: 'Meta'\n    }\n  }); // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  }; //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && 'location' in new KeyboardEvent('');\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = function () {\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n\n      return null;\n    }(); // TODO: Track these down and move to general tables\n\n\n    if (0) {\n      // TODO: Map these for newerish browsers?\n      // TODO: iOS only?\n      // TODO: Override with more common keyIdentifier name?\n      switch (event.keyIdentifier) {\n        case 'U+0010':\n          keyInfo = {\n            code: 'Function'\n          };\n          break;\n\n        case 'U+001C':\n          keyInfo = {\n            code: 'ArrowLeft'\n          };\n          break;\n\n        case 'U+001D':\n          keyInfo = {\n            code: 'ArrowRight'\n          };\n          break;\n\n        case 'U+001E':\n          keyInfo = {\n            code: 'ArrowUp'\n          };\n          break;\n\n        case 'U+001F':\n          keyInfo = {\n            code: 'ArrowDown'\n          };\n          break;\n      }\n    }\n\n    if (!keyInfo) return null;\n\n    var key = function () {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return event.shiftKey && 'shiftKey' in entry ? entry.shiftKey : entry.key;\n    }();\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function () {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo ? keyInfo.code : '';\n        }\n      }); // Fix for nonstandard `key` values (FF36-)\n\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', {\n          get: function get() {\n            var key = desc.get.call(this);\n            return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n          }\n        });\n      }\n\n      define(KeyboardEvent.prototype, 'key', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n        }\n      });\n      define(KeyboardEvent.prototype, 'location', {\n        get: function get() {\n          var keyInfo = keyInfoForEvent(this);\n          return keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n        }\n      });\n      define(KeyboardEvent.prototype, 'locale', {\n        get: function get() {\n          return '';\n        }\n      });\n    })();\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent)) global.KeyboardEvent.queryKeyCap = queryKeyCap; // Helper for IE8-\n\n  global.identifyKey = function (event) {\n    if ('code' in event) return;\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = keyInfo && 'key' in keyInfo ? keyInfo.key : 'Unidentified';\n    event.location = 'location' in event ? event.location : 'keyLocation' in event ? event.keyLocation : keyInfo && 'location' in keyInfo ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n})(window);","require(\"core-js/modules/es6.function.bind\");\n\n/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    reverseEnabled: {\n      \"default\": true\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n  play: function play() {\n    this.addEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  addEventListeners: function addEventListeners() {\n    var sceneEl = this.el.sceneEl;\n    var canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n  },\n  removeEventListeners: function removeEventListeners() {\n    var canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n\n    if (!canvasEl) {\n      return;\n    }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n  },\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && !!this.direction;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function bindMethods() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  },\n  onTouchStart: function onTouchStart(e) {\n    this.direction = -1;\n\n    if (this.data.reverseEnabled && e.touches.length === 2) {\n      this.direction = 1;\n    }\n\n    e.preventDefault();\n  },\n  onTouchEnd: function onTouchEnd(e) {\n    this.direction = 0;\n    e.preventDefault();\n  }\n});","require(\"core-js/modules/es6.function.bind\");\n\n/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\nvar COMPONENT_SUFFIX = '-controls',\n    MAX_DELTA = 0.2,\n    // ms\nEPS = 10e-6;\nmodule.exports = AFRAME.registerComponent('movement-controls', {\n  /*******************************************************************\n   * Schema\n   */\n  dependencies: ['rotation'],\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    controls: {\n      \"default\": ['gamepad', 'trackpad', 'keyboard', 'touch']\n    },\n    speed: {\n      \"default\": 0.3,\n      min: 0\n    },\n    fly: {\n      \"default\": false\n    },\n    constrainToNavMesh: {\n      \"default\": false\n    },\n    camera: {\n      \"default\": '[movement-controls] [camera]',\n      type: 'selector'\n    }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n  init: function init() {\n    var el = this.el;\n    this.velocityCtrl = null;\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion(); // Navigation\n\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n  update: function update(prevData) {\n    var el = this.el;\n    var data = this.data;\n    var nav = el.sceneEl.systems.nav;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh ? nav.addAgent(this) : nav.removeAgent(this);\n    }\n  },\n  injectControls: function injectControls() {\n    var data = this.data;\n    var name;\n\n    for (var i = 0; i < data.controls.length; i++) {\n      name = data.controls[i] + COMPONENT_SUFFIX;\n\n      if (!this.el.components[name]) {\n        this.el.setAttribute(name, '');\n      }\n    }\n  },\n  updateNavLocation: function updateNavLocation() {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n  tick: function () {\n    var start = new THREE.Vector3();\n    var end = new THREE.Vector3();\n    var clampedEnd = new THREE.Vector3();\n    return function (t, dt) {\n      if (!dt) return;\n      var el = this.el;\n      var data = this.data;\n      if (!data.enabled) return;\n      this.updateVelocityCtrl();\n      var velocityCtrl = this.velocityCtrl;\n      var velocity = this.velocity;\n      if (!velocityCtrl) return; // Update velocity. If FPS is too low, reset.\n\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh && velocityCtrl.isNavMeshConstrained !== false) {\n        if (velocity.lengthSq() < EPS) return;\n        start.copy(el.object3D.position);\n        end.copy(velocity).multiplyScalar(dt / 1000).add(start);\n        var nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n    };\n  }(),\n\n  /*******************************************************************\n   * Movement\n   */\n  updateVelocityCtrl: function updateVelocityCtrl() {\n    var data = this.data;\n\n    if (data.enabled) {\n      for (var i = 0, l = data.controls.length; i < l; i++) {\n        var control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n\n      this.velocityCtrl = null;\n    }\n  },\n  updateVelocity: function () {\n    var vector2 = new THREE.Vector2();\n    var quaternion = new THREE.Quaternion();\n    return function (dt) {\n      var dVelocity;\n      var el = this.el;\n      var control = this.velocityCtrl;\n      var velocity = this.velocity;\n      var data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        var cameraEl = data.camera; // Rotate to heading\n\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n        var factor = dVelocity.length();\n\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.z = vector2.y;\n        }\n      }\n    };\n  }()\n});","require(\"core-js/modules/es6.function.bind\");\n\n/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: {\n      \"default\": true\n    },\n    enableNegX: {\n      \"default\": true\n    },\n    enablePosX: {\n      \"default\": true\n    },\n    enableNegZ: {\n      \"default\": true\n    },\n    enablePosZ: {\n      \"default\": true\n    },\n    mode: {\n      \"default\": 'touch',\n      oneOf: ['swipe', 'touch', 'press']\n    }\n  },\n  init: function init() {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel = 0;\n    this.xVel = 0;\n    this.bindMethods();\n  },\n  play: function play() {\n    this.addEventListeners();\n  },\n  pause: function pause() {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  addEventListeners: function addEventListeners() {\n    var data = this.data;\n    var sceneEl = this.el.sceneEl;\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n  },\n  removeEventListeners: function removeEventListeners() {\n    var sceneEl = this.el.sceneEl;\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n  isVelocityActive: function isVelocityActive() {\n    return this.data.enabled && this.isMoving;\n  },\n  getVelocityDelta: function getVelocityDelta() {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n  bindMethods: function bindMethods() {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n  onTouchStart: function onTouchStart(e) {\n    switch (this.data.mode) {\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n\n      case 'touch':\n        this.isMoving = true;\n        break;\n\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n  onTouchEnd: function onTouchEnd(e) {\n    if (this.data.mode == 'swipe') {\n      this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n  onAxisMove: function onAxisMove(e) {\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n  handleSwipeAxis: function handleSwipeAxis(e) {\n    var data = this.data;\n    var axisData = e.detail.axis;\n\n    if (this.startingAxisData.length === 0 && this.canRecordAxis) {\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if (this.startingAxisData.length > 0) {\n      var velX = 0;\n      var velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      var absChangeZ = Math.abs(this.startingAxisData[1] - axisData[1]);\n      var absChangeX = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n    }\n  },\n  handleTouchAxis: function handleTouchAxis(e) {\n    var data = this.data;\n    var axisData = e.detail.axis;\n    var velX = 0;\n    var velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n  }\n});","require('./animation-mixer');\n\nrequire('./collada-model-legacy');\n\nrequire('./fbx-model');\n\nrequire('./gltf-model-legacy');\n\nrequire('./object-model');","require(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\n\nmodule.exports = AFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip: {\n      \"default\": '*'\n    },\n    duration: {\n      \"default\": 0\n    },\n    clampWhenFinished: {\n      \"default\": false,\n      type: 'boolean'\n    },\n    crossFadeDuration: {\n      \"default\": 0\n    },\n    loop: {\n      \"default\": 'repeat',\n      oneOf: Object.keys(LoopMode)\n    },\n    repetitions: {\n      \"default\": Infinity,\n      min: 0\n    },\n    timeScale: {\n      \"default\": 1\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n\n    this.activeActions = [];\n    var model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', function (e) {\n        _this.load(e.detail.model);\n      });\n    }\n  },\n  load: function load(model) {\n    var el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', function (e) {\n      el.emit('animation-loop', {\n        action: e.action,\n        loopDelta: e.loopDelta\n      });\n    });\n    this.mixer.addEventListener('finished', function (e) {\n      el.emit('animation-finished', {\n        action: e.action,\n        direction: e.direction\n      });\n    });\n    if (this.data.clip) this.update({});\n  },\n  remove: function remove() {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n  update: function update(prevData) {\n    if (!prevData) return;\n    var data = this.data;\n    var changes = AFRAME.utils.diff(data, prevData); // If selected clips have changed, restart animation.\n\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    } // Otherwise, modify running actions.\n\n\n    this.activeActions.forEach(function (action) {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n  stopAction: function stopAction() {\n    var data = this.data;\n\n    for (var i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration ? this.activeActions[i].fadeOut(data.crossFadeDuration) : this.activeActions[i].stop();\n    }\n\n    this.activeActions.length = 0;\n  },\n  playAction: function playAction() {\n    if (!this.mixer) return;\n    var model = this.model,\n        data = this.data,\n        clips = model.animations || (model.geometry || {}).animations || [];\n    if (!clips.length) return;\n    var re = wildcardToRegExp(data.clip);\n\n    for (var clip, i = 0; clip = clips[i]; i++) {\n      if (clip.name.match(re)) {\n        var action = this.mixer.clipAction(clip, model);\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        action.setLoop(LoopMode[data.loop], data.repetitions).fadeIn(data.crossFadeDuration).play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n  tick: function tick(t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\n\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n/**\n * RegExp-escapes all characters in the given string.\n */\n\n\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}","require(\"core-js/modules/es6.array.map\");\n\nTHREE.ColladaLoader = require('../../lib/ColladaLoader');\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\n\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {\n    type: 'asset'\n  },\n  init: function init() {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n  update: function update() {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {\n        format: 'collada',\n        model: self.model\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","require(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\nmodule.exports = THREE.ColladaLoader = function (manager) {\n  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n};\n\nTHREE.ColladaLoader.prototype = {\n  constructor: THREE.ColladaLoader,\n  crossOrigin: 'anonymous',\n  load: function load(url, onLoad, onProgress, onError) {\n    var scope = this;\n    var path = scope.path === undefined ? THREE.LoaderUtils.extractUrlBase(url) : scope.path;\n    var loader = new THREE.FileLoader(scope.manager);\n    loader.setPath(scope.path);\n    loader.load(url, function (text) {\n      onLoad(scope.parse(text, path));\n    }, onProgress, onError);\n  },\n  setPath: function setPath(value) {\n    this.path = value;\n    return this;\n  },\n  setResourcePath: function setResourcePath(value) {\n    this.resourcePath = value;\n    return this;\n  },\n  options: {\n    set convertUpAxis(value) {\n      console.warn('THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.');\n    }\n\n  },\n  setCrossOrigin: function setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  },\n  parse: function parse(text, path) {\n    function getElementsByTagName(xml, name) {\n      // Non recursive xml.getElementsByTagName() ...\n      var array = [];\n      var childNodes = xml.childNodes;\n\n      for (var i = 0, l = childNodes.length; i < l; i++) {\n        var child = childNodes[i];\n\n        if (child.nodeName === name) {\n          array.push(child);\n        }\n      }\n\n      return array;\n    }\n\n    function parseStrings(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parts[i];\n      }\n\n      return array;\n    }\n\n    function parseFloats(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parseFloat(parts[i]);\n      }\n\n      return array;\n    }\n\n    function parseInts(text) {\n      if (text.length === 0) return [];\n      var parts = text.trim().split(/\\s+/);\n      var array = new Array(parts.length);\n\n      for (var i = 0, l = parts.length; i < l; i++) {\n        array[i] = parseInt(parts[i]);\n      }\n\n      return array;\n    }\n\n    function parseId(text) {\n      return text.substring(1);\n    }\n\n    function generateId() {\n      return 'three_default_' + count++;\n    }\n\n    function isEmpty(object) {\n      return Object.keys(object).length === 0;\n    } // asset\n\n\n    function parseAsset(xml) {\n      return {\n        unit: parseAssetUnit(getElementsByTagName(xml, 'unit')[0]),\n        upAxis: parseAssetUpAxis(getElementsByTagName(xml, 'up_axis')[0])\n      };\n    }\n\n    function parseAssetUnit(xml) {\n      if (xml !== undefined && xml.hasAttribute('meter') === true) {\n        return parseFloat(xml.getAttribute('meter'));\n      } else {\n        return 1; // default 1 meter\n      }\n    }\n\n    function parseAssetUpAxis(xml) {\n      return xml !== undefined ? xml.textContent : 'Y_UP';\n    } // library\n\n\n    function parseLibrary(xml, libraryName, nodeName, parser) {\n      var library = getElementsByTagName(xml, libraryName)[0];\n\n      if (library !== undefined) {\n        var elements = getElementsByTagName(library, nodeName);\n\n        for (var i = 0; i < elements.length; i++) {\n          parser(elements[i]);\n        }\n      }\n    }\n\n    function buildLibrary(data, builder) {\n      for (var name in data) {\n        var object = data[name];\n        object.build = builder(data[name]);\n      }\n    } // get\n\n\n    function getBuild(data, builder) {\n      if (data.build !== undefined) return data.build;\n      data.build = builder(data);\n      return data.build;\n    } // animation\n\n\n    function parseAnimation(xml) {\n      var data = {\n        sources: {},\n        samplers: {},\n        channels: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        var id;\n\n        switch (child.nodeName) {\n          case 'source':\n            id = child.getAttribute('id');\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'sampler':\n            id = child.getAttribute('id');\n            data.samplers[id] = parseAnimationSampler(child);\n            break;\n\n          case 'channel':\n            id = child.getAttribute('target');\n            data.channels[id] = parseAnimationChannel(child);\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      library.animations[xml.getAttribute('id')] = data;\n    }\n\n    function parseAnimationSampler(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var id = parseId(child.getAttribute('source'));\n            var semantic = child.getAttribute('semantic');\n            data.inputs[semantic] = id;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseAnimationChannel(xml) {\n      var data = {};\n      var target = xml.getAttribute('target'); // parsing SID Addressing Syntax\n\n      var parts = target.split('/');\n      var id = parts.shift();\n      var sid = parts.shift(); // check selection syntax\n\n      var arraySyntax = sid.indexOf('(') !== -1;\n      var memberSyntax = sid.indexOf('.') !== -1;\n\n      if (memberSyntax) {\n        //  member selection access\n        parts = sid.split('.');\n        sid = parts.shift();\n        data.member = parts.shift();\n      } else if (arraySyntax) {\n        // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n        var indices = sid.split('(');\n        sid = indices.shift();\n\n        for (var i = 0; i < indices.length; i++) {\n          indices[i] = parseInt(indices[i].replace(/\\)/, ''));\n        }\n\n        data.indices = indices;\n      }\n\n      data.id = id;\n      data.sid = sid;\n      data.arraySyntax = arraySyntax;\n      data.memberSyntax = memberSyntax;\n      data.sampler = parseId(xml.getAttribute('source'));\n      return data;\n    }\n\n    function buildAnimation(data) {\n      var tracks = [];\n      var channels = data.channels;\n      var samplers = data.samplers;\n      var sources = data.sources;\n\n      for (var target in channels) {\n        if (channels.hasOwnProperty(target)) {\n          var channel = channels[target];\n          var sampler = samplers[channel.sampler];\n          var inputId = sampler.inputs.INPUT;\n          var outputId = sampler.inputs.OUTPUT;\n          var inputSource = sources[inputId];\n          var outputSource = sources[outputId];\n          var animation = buildAnimationChannel(channel, inputSource, outputSource);\n          createKeyframeTracks(animation, tracks);\n        }\n      }\n\n      return tracks;\n    }\n\n    function getAnimation(id) {\n      return getBuild(library.animations[id], buildAnimation);\n    }\n\n    function buildAnimationChannel(channel, inputSource, outputSource) {\n      var node = library.nodes[channel.id];\n      var object3D = getNode(node.id);\n      var transform = node.transforms[channel.sid];\n      var defaultMatrix = node.matrix.clone().transpose();\n      var time, stride;\n      var i, il, j, jl;\n      var data = {}; // the collada spec allows the animation of data in various ways.\n      // depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n      switch (transform) {\n        case 'matrix':\n          for (i = 0, il = inputSource.array.length; i < il; i++) {\n            time = inputSource.array[i];\n            stride = i * outputSource.stride;\n            if (data[time] === undefined) data[time] = {};\n\n            if (channel.arraySyntax === true) {\n              var value = outputSource.array[stride];\n              var index = channel.indices[0] + 4 * channel.indices[1];\n              data[time][index] = value;\n            } else {\n              for (j = 0, jl = outputSource.stride; j < jl; j++) {\n                data[time][j] = outputSource.array[stride + j];\n              }\n            }\n          }\n\n          break;\n\n        case 'translate':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n\n        case 'rotate':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n\n        case 'scale':\n          console.warn('THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform);\n          break;\n      }\n\n      var keyframes = prepareAnimationData(data, defaultMatrix);\n      var animation = {\n        name: object3D.uuid,\n        keyframes: keyframes\n      };\n      return animation;\n    }\n\n    function prepareAnimationData(data, defaultMatrix) {\n      var keyframes = []; // transfer data into a sortable array\n\n      for (var time in data) {\n        keyframes.push({\n          time: parseFloat(time),\n          value: data[time]\n        });\n      } // ensure keyframes are sorted by time\n\n\n      keyframes.sort(ascending); // now we clean up all animation data, so we can use them for keyframe tracks\n\n      for (var i = 0; i < 16; i++) {\n        transformAnimationData(keyframes, i, defaultMatrix.elements[i]);\n      }\n\n      return keyframes; // array sort function\n\n      function ascending(a, b) {\n        return a.time - b.time;\n      }\n    }\n\n    var position = new THREE.Vector3();\n    var scale = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n\n    function createKeyframeTracks(animation, tracks) {\n      var keyframes = animation.keyframes;\n      var name = animation.name;\n      var times = [];\n      var positionData = [];\n      var quaternionData = [];\n      var scaleData = [];\n\n      for (var i = 0, l = keyframes.length; i < l; i++) {\n        var keyframe = keyframes[i];\n        var time = keyframe.time;\n        var value = keyframe.value;\n        matrix.fromArray(value).transpose();\n        matrix.decompose(position, quaternion, scale);\n        times.push(time);\n        positionData.push(position.x, position.y, position.z);\n        quaternionData.push(quaternion.x, quaternion.y, quaternion.z, quaternion.w);\n        scaleData.push(scale.x, scale.y, scale.z);\n      }\n\n      if (positionData.length > 0) tracks.push(new THREE.VectorKeyframeTrack(name + '.position', times, positionData));\n      if (quaternionData.length > 0) tracks.push(new THREE.QuaternionKeyframeTrack(name + '.quaternion', times, quaternionData));\n      if (scaleData.length > 0) tracks.push(new THREE.VectorKeyframeTrack(name + '.scale', times, scaleData));\n      return tracks;\n    }\n\n    function transformAnimationData(keyframes, property, defaultValue) {\n      var keyframe;\n      var empty = true;\n      var i, l; // check, if values of a property are missing in our keyframes\n\n      for (i = 0, l = keyframes.length; i < l; i++) {\n        keyframe = keyframes[i];\n\n        if (keyframe.value[property] === undefined) {\n          keyframe.value[property] = null; // mark as missing\n        } else {\n          empty = false;\n        }\n      }\n\n      if (empty === true) {\n        // no values at all, so we set a default value\n        for (i = 0, l = keyframes.length; i < l; i++) {\n          keyframe = keyframes[i];\n          keyframe.value[property] = defaultValue;\n        }\n      } else {\n        // filling gaps\n        createMissingKeyframes(keyframes, property);\n      }\n    }\n\n    function createMissingKeyframes(keyframes, property) {\n      var prev, next;\n\n      for (var i = 0, l = keyframes.length; i < l; i++) {\n        var keyframe = keyframes[i];\n\n        if (keyframe.value[property] === null) {\n          prev = getPrev(keyframes, i, property);\n          next = getNext(keyframes, i, property);\n\n          if (prev === null) {\n            keyframe.value[property] = next.value[property];\n            continue;\n          }\n\n          if (next === null) {\n            keyframe.value[property] = prev.value[property];\n            continue;\n          }\n\n          interpolate(keyframe, prev, next, property);\n        }\n      }\n    }\n\n    function getPrev(keyframes, i, property) {\n      while (i >= 0) {\n        var keyframe = keyframes[i];\n        if (keyframe.value[property] !== null) return keyframe;\n        i--;\n      }\n\n      return null;\n    }\n\n    function getNext(keyframes, i, property) {\n      while (i < keyframes.length) {\n        var keyframe = keyframes[i];\n        if (keyframe.value[property] !== null) return keyframe;\n        i++;\n      }\n\n      return null;\n    }\n\n    function interpolate(key, prev, next, property) {\n      if (next.time - prev.time === 0) {\n        key.value[property] = prev.value[property];\n        return;\n      }\n\n      key.value[property] = (key.time - prev.time) * (next.value[property] - prev.value[property]) / (next.time - prev.time) + prev.value[property];\n    } // animation clips\n\n\n    function parseAnimationClip(xml) {\n      var data = {\n        name: xml.getAttribute('id') || 'default',\n        start: parseFloat(xml.getAttribute('start') || 0),\n        end: parseFloat(xml.getAttribute('end') || 0),\n        animations: []\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'instance_animation':\n            data.animations.push(parseId(child.getAttribute('url')));\n            break;\n        }\n      }\n\n      library.clips[xml.getAttribute('id')] = data;\n    }\n\n    function buildAnimationClip(data) {\n      var tracks = [];\n      var name = data.name;\n      var duration = data.end - data.start || -1;\n      var animations = data.animations;\n\n      for (var i = 0, il = animations.length; i < il; i++) {\n        var animationTracks = getAnimation(animations[i]);\n\n        for (var j = 0, jl = animationTracks.length; j < jl; j++) {\n          tracks.push(animationTracks[j]);\n        }\n      }\n\n      return new THREE.AnimationClip(name, duration, tracks);\n    }\n\n    function getAnimationClip(id) {\n      return getBuild(library.clips[id], buildAnimationClip);\n    } // controller\n\n\n    function parseController(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'skin':\n            // there is exactly one skin per controller\n            data.id = parseId(child.getAttribute('source'));\n            data.skin = parseSkin(child);\n            break;\n\n          case 'morph':\n            data.id = parseId(child.getAttribute('source'));\n            console.warn('THREE.ColladaLoader: Morph target animation not supported yet.');\n            break;\n        }\n      }\n\n      library.controllers[xml.getAttribute('id')] = data;\n    }\n\n    function parseSkin(xml) {\n      var data = {\n        sources: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'bind_shape_matrix':\n            data.bindShapeMatrix = parseFloats(child.textContent);\n            break;\n\n          case 'source':\n            var id = child.getAttribute('id');\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'joints':\n            data.joints = parseJoints(child);\n            break;\n\n          case 'vertex_weights':\n            data.vertexWeights = parseVertexWeights(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseJoints(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var semantic = child.getAttribute('semantic');\n            var id = parseId(child.getAttribute('source'));\n            data.inputs[semantic] = id;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseVertexWeights(xml) {\n      var data = {\n        inputs: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var semantic = child.getAttribute('semantic');\n            var id = parseId(child.getAttribute('source'));\n            var offset = parseInt(child.getAttribute('offset'));\n            data.inputs[semantic] = {\n              id: id,\n              offset: offset\n            };\n            break;\n\n          case 'vcount':\n            data.vcount = parseInts(child.textContent);\n            break;\n\n          case 'v':\n            data.v = parseInts(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildController(data) {\n      var build = {\n        id: data.id\n      };\n      var geometry = library.geometries[build.id];\n\n      if (data.skin !== undefined) {\n        build.skin = buildSkin(data.skin); // we enhance the 'sources' property of the corresponding geometry with our skin data\n\n        geometry.sources.skinIndices = build.skin.indices;\n        geometry.sources.skinWeights = build.skin.weights;\n      }\n\n      return build;\n    }\n\n    function buildSkin(data) {\n      var BONE_LIMIT = 4;\n      var build = {\n        joints: [],\n        // this must be an array to preserve the joint order\n        indices: {\n          array: [],\n          stride: BONE_LIMIT\n        },\n        weights: {\n          array: [],\n          stride: BONE_LIMIT\n        }\n      };\n      var sources = data.sources;\n      var vertexWeights = data.vertexWeights;\n      var vcount = vertexWeights.vcount;\n      var v = vertexWeights.v;\n      var jointOffset = vertexWeights.inputs.JOINT.offset;\n      var weightOffset = vertexWeights.inputs.WEIGHT.offset;\n      var jointSource = data.sources[data.joints.inputs.JOINT];\n      var inverseSource = data.sources[data.joints.inputs.INV_BIND_MATRIX];\n      var weights = sources[vertexWeights.inputs.WEIGHT.id].array;\n      var stride = 0;\n      var i, j, l; // procces skin data for each vertex\n\n      for (i = 0, l = vcount.length; i < l; i++) {\n        var jointCount = vcount[i]; // this is the amount of joints that affect a single vertex\n\n        var vertexSkinData = [];\n\n        for (j = 0; j < jointCount; j++) {\n          var skinIndex = v[stride + jointOffset];\n          var weightId = v[stride + weightOffset];\n          var skinWeight = weights[weightId];\n          vertexSkinData.push({\n            index: skinIndex,\n            weight: skinWeight\n          });\n          stride += 2;\n        } // we sort the joints in descending order based on the weights.\n        // this ensures, we only procced the most important joints of the vertex\n\n\n        vertexSkinData.sort(descending); // now we provide for each vertex a set of four index and weight values.\n        // the order of the skin data matches the order of vertices\n\n        for (j = 0; j < BONE_LIMIT; j++) {\n          var d = vertexSkinData[j];\n\n          if (d !== undefined) {\n            build.indices.array.push(d.index);\n            build.weights.array.push(d.weight);\n          } else {\n            build.indices.array.push(0);\n            build.weights.array.push(0);\n          }\n        }\n      } // setup bind matrix\n\n\n      if (data.bindShapeMatrix) {\n        build.bindMatrix = new THREE.Matrix4().fromArray(data.bindShapeMatrix).transpose();\n      } else {\n        build.bindMatrix = new THREE.Matrix4().identity();\n      } // process bones and inverse bind matrix data\n\n\n      for (i = 0, l = jointSource.array.length; i < l; i++) {\n        var name = jointSource.array[i];\n        var boneInverse = new THREE.Matrix4().fromArray(inverseSource.array, i * inverseSource.stride).transpose();\n        build.joints.push({\n          name: name,\n          boneInverse: boneInverse\n        });\n      }\n\n      return build; // array sort function\n\n      function descending(a, b) {\n        return b.weight - a.weight;\n      }\n    }\n\n    function getController(id) {\n      return getBuild(library.controllers[id], buildController);\n    } // image\n\n\n    function parseImage(xml) {\n      var data = {\n        init_from: getElementsByTagName(xml, 'init_from')[0].textContent\n      };\n      library.images[xml.getAttribute('id')] = data;\n    }\n\n    function buildImage(data) {\n      if (data.build !== undefined) return data.build;\n      return data.init_from;\n    }\n\n    function getImage(id) {\n      var data = library.images[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildImage);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find image with ID:', id);\n      return null;\n    } // effect\n\n\n    function parseEffect(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'profile_COMMON':\n            data.profile = parseEffectProfileCOMMON(child);\n            break;\n        }\n      }\n\n      library.effects[xml.getAttribute('id')] = data;\n    }\n\n    function parseEffectProfileCOMMON(xml) {\n      var data = {\n        surfaces: {},\n        samplers: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'newparam':\n            parseEffectNewparam(child, data);\n            break;\n\n          case 'technique':\n            data.technique = parseEffectTechnique(child);\n            break;\n\n          case 'extra':\n            data.extra = parseEffectExtra(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectNewparam(xml, data) {\n      var sid = xml.getAttribute('sid');\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'surface':\n            data.surfaces[sid] = parseEffectSurface(child);\n            break;\n\n          case 'sampler2D':\n            data.samplers[sid] = parseEffectSampler(child);\n            break;\n        }\n      }\n    }\n\n    function parseEffectSurface(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'init_from':\n            data.init_from = child.textContent;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectSampler(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'source':\n            data.source = child.textContent;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'constant':\n          case 'lambert':\n          case 'blinn':\n          case 'phong':\n            data.type = child.nodeName;\n            data.parameters = parseEffectParameters(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameters(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'emission':\n          case 'diffuse':\n          case 'specular':\n          case 'bump':\n          case 'ambient':\n          case 'shininess':\n          case 'transparency':\n            data[child.nodeName] = parseEffectParameter(child);\n            break;\n\n          case 'transparent':\n            data[child.nodeName] = {\n              opaque: child.getAttribute('opaque'),\n              data: parseEffectParameter(child)\n            };\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameter(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'color':\n            data[child.nodeName] = parseFloats(child.textContent);\n            break;\n\n          case 'float':\n            data[child.nodeName] = parseFloat(child.textContent);\n            break;\n\n          case 'texture':\n            data[child.nodeName] = {\n              id: child.getAttribute('texture'),\n              extra: parseEffectParameterTexture(child)\n            };\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameterTexture(xml) {\n      var data = {\n        technique: {}\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'extra':\n            parseEffectParameterTextureExtra(child, data);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectParameterTextureExtra(xml, data) {\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique':\n            parseEffectParameterTextureExtraTechnique(child, data);\n            break;\n        }\n      }\n    }\n\n    function parseEffectParameterTextureExtraTechnique(xml, data) {\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'repeatU':\n          case 'repeatV':\n          case 'offsetU':\n          case 'offsetV':\n            data.technique[child.nodeName] = parseFloat(child.textContent);\n            break;\n\n          case 'wrapU':\n          case 'wrapV':\n            // some files have values for wrapU/wrapV which become NaN via parseInt\n            if (child.textContent.toUpperCase() === 'TRUE') {\n              data.technique[child.nodeName] = 1;\n            } else if (child.textContent.toUpperCase() === 'FALSE') {\n              data.technique[child.nodeName] = 0;\n            } else {\n              data.technique[child.nodeName] = parseInt(child.textContent);\n            }\n\n            break;\n        }\n      }\n    }\n\n    function parseEffectExtra(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique':\n            data.technique = parseEffectExtraTechnique(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseEffectExtraTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'double_sided':\n            data[child.nodeName] = parseInt(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildEffect(data) {\n      return data;\n    }\n\n    function getEffect(id) {\n      return getBuild(library.effects[id], buildEffect);\n    } // material\n\n\n    function parseMaterial(xml) {\n      var data = {\n        name: xml.getAttribute('name')\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'instance_effect':\n            data.url = parseId(child.getAttribute('url'));\n            break;\n        }\n      }\n\n      library.materials[xml.getAttribute('id')] = data;\n    }\n\n    function getTextureLoader(image) {\n      var loader;\n      var extension = image.slice((image.lastIndexOf('.') - 1 >>> 0) + 2); // http://www.jstips.co/en/javascript/get-file-extension/\n\n      extension = extension.toLowerCase();\n\n      switch (extension) {\n        case 'tga':\n          loader = tgaLoader;\n          break;\n\n        default:\n          loader = textureLoader;\n      }\n\n      return loader;\n    }\n\n    function buildMaterial(data) {\n      var effect = getEffect(data.url);\n      var technique = effect.profile.technique;\n      var extra = effect.profile.extra;\n      var material;\n\n      switch (technique.type) {\n        case 'phong':\n        case 'blinn':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          material = new THREE.MeshBasicMaterial();\n          break;\n      }\n\n      material.name = data.name;\n\n      function getTexture(textureObject) {\n        var sampler = effect.profile.samplers[textureObject.id];\n        var image = null; // get image\n\n        if (sampler !== undefined) {\n          var surface = effect.profile.surfaces[sampler.source];\n          image = getImage(surface.init_from);\n        } else {\n          console.warn('THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).');\n          image = getImage(textureObject.id);\n        } // create texture if image is avaiable\n\n\n        if (image !== null) {\n          var loader = getTextureLoader(image);\n\n          if (loader !== undefined) {\n            var texture = loader.load(image);\n            var extra = textureObject.extra;\n\n            if (extra !== undefined && extra.technique !== undefined && isEmpty(extra.technique) === false) {\n              var technique = extra.technique;\n              texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.offset.set(technique.offsetU || 0, technique.offsetV || 0);\n              texture.repeat.set(technique.repeatU || 1, technique.repeatV || 1);\n            } else {\n              texture.wrapS = THREE.RepeatWrapping;\n              texture.wrapT = THREE.RepeatWrapping;\n            }\n\n            return texture;\n          } else {\n            console.warn('THREE.ColladaLoader: Loader for texture %s not found.', image);\n            return null;\n          }\n        } else {\n          console.warn('THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id);\n          return null;\n        }\n      }\n\n      var parameters = technique.parameters;\n\n      for (var key in parameters) {\n        var parameter = parameters[key];\n\n        switch (key) {\n          case 'diffuse':\n            if (parameter.color) material.color.fromArray(parameter.color);\n            if (parameter.texture) material.map = getTexture(parameter.texture);\n            break;\n\n          case 'specular':\n            if (parameter.color && material.specular) material.specular.fromArray(parameter.color);\n            if (parameter.texture) material.specularMap = getTexture(parameter.texture);\n            break;\n\n          case 'bump':\n            if (parameter.texture) material.normalMap = getTexture(parameter.texture);\n            break;\n\n          case 'ambient':\n            if (parameter.texture) material.lightMap = getTexture(parameter.texture);\n            break;\n\n          case 'shininess':\n            if (parameter[\"float\"] && material.shininess) material.shininess = parameter[\"float\"];\n            break;\n\n          case 'emission':\n            if (parameter.color && material.emissive) material.emissive.fromArray(parameter.color);\n            if (parameter.texture) material.emissiveMap = getTexture(parameter.texture);\n            break;\n        }\n      } //\n\n\n      var transparent = parameters['transparent'];\n      var transparency = parameters['transparency']; // <transparency> does not exist but <transparent>\n\n      if (transparency === undefined && transparent) {\n        transparency = {\n          \"float\": 1\n        };\n      } // <transparent> does not exist but <transparency>\n\n\n      if (transparent === undefined && transparency) {\n        transparent = {\n          opaque: 'A_ONE',\n          data: {\n            color: [1, 1, 1, 1]\n          }\n        };\n      }\n\n      if (transparent && transparency) {\n        // handle case if a texture exists but no color\n        if (transparent.data.texture) {\n          // we do not set an alpha map (see #13792)\n          material.transparent = true;\n        } else {\n          var color = transparent.data.color;\n\n          switch (transparent.opaque) {\n            case 'A_ONE':\n              material.opacity = color[3] * transparency[\"float\"];\n              break;\n\n            case 'RGB_ZERO':\n              material.opacity = 1 - color[0] * transparency[\"float\"];\n              break;\n\n            case 'A_ZERO':\n              material.opacity = 1 - color[3] * transparency[\"float\"];\n              break;\n\n            case 'RGB_ONE':\n              material.opacity = color[0] * transparency[\"float\"];\n              break;\n\n            default:\n              console.warn('THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque);\n          }\n\n          if (material.opacity < 1) material.transparent = true;\n        }\n      } //\n\n\n      if (extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1) {\n        material.side = THREE.DoubleSide;\n      }\n\n      return material;\n    }\n\n    function getMaterial(id) {\n      return getBuild(library.materials[id], buildMaterial);\n    } // camera\n\n\n    function parseCamera(xml) {\n      var data = {\n        name: xml.getAttribute('name')\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'optics':\n            data.optics = parseCameraOptics(child);\n            break;\n        }\n      }\n\n      library.cameras[xml.getAttribute('id')] = data;\n    }\n\n    function parseCameraOptics(xml) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            return parseCameraTechnique(child);\n        }\n      }\n\n      return {};\n    }\n\n    function parseCameraTechnique(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'perspective':\n          case 'orthographic':\n            data.technique = child.nodeName;\n            data.parameters = parseCameraParameters(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseCameraParameters(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'xfov':\n          case 'yfov':\n          case 'xmag':\n          case 'ymag':\n          case 'znear':\n          case 'zfar':\n          case 'aspect_ratio':\n            data[child.nodeName] = parseFloat(child.textContent);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildCamera(data) {\n      var camera;\n\n      switch (data.optics.technique) {\n        case 'perspective':\n          camera = new THREE.PerspectiveCamera(data.optics.parameters.yfov, data.optics.parameters.aspect_ratio, data.optics.parameters.znear, data.optics.parameters.zfar);\n          break;\n\n        case 'orthographic':\n          var ymag = data.optics.parameters.ymag;\n          var xmag = data.optics.parameters.xmag;\n          var aspectRatio = data.optics.parameters.aspect_ratio;\n          xmag = xmag === undefined ? ymag * aspectRatio : xmag;\n          ymag = ymag === undefined ? xmag / aspectRatio : ymag;\n          xmag *= 0.5;\n          ymag *= 0.5;\n          camera = new THREE.OrthographicCamera(-xmag, xmag, ymag, -ymag, // left, right, top, bottom\n          data.optics.parameters.znear, data.optics.parameters.zfar);\n          break;\n\n        default:\n          camera = new THREE.PerspectiveCamera();\n          break;\n      }\n\n      camera.name = data.name;\n      return camera;\n    }\n\n    function getCamera(id) {\n      var data = library.cameras[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildCamera);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find camera with ID:', id);\n      return null;\n    } // light\n\n\n    function parseLight(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            data = parseLightTechnique(child);\n            break;\n        }\n      }\n\n      library.lights[xml.getAttribute('id')] = data;\n    }\n\n    function parseLightTechnique(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'directional':\n          case 'point':\n          case 'spot':\n          case 'ambient':\n            data.technique = child.nodeName;\n            data.parameters = parseLightParameters(child);\n        }\n      }\n\n      return data;\n    }\n\n    function parseLightParameters(xml) {\n      var data = {};\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'color':\n            var array = parseFloats(child.textContent);\n            data.color = new THREE.Color().fromArray(array);\n            break;\n\n          case 'falloff_angle':\n            data.falloffAngle = parseFloat(child.textContent);\n            break;\n\n          case 'quadratic_attenuation':\n            var f = parseFloat(child.textContent);\n            data.distance = f ? Math.sqrt(1 / f) : 0;\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildLight(data) {\n      var light;\n\n      switch (data.technique) {\n        case 'directional':\n          light = new THREE.DirectionalLight();\n          break;\n\n        case 'point':\n          light = new THREE.PointLight();\n          break;\n\n        case 'spot':\n          light = new THREE.SpotLight();\n          break;\n\n        case 'ambient':\n          light = new THREE.AmbientLight();\n          break;\n      }\n\n      if (data.parameters.color) light.color.copy(data.parameters.color);\n      if (data.parameters.distance) light.distance = data.parameters.distance;\n      return light;\n    }\n\n    function getLight(id) {\n      var data = library.lights[id];\n\n      if (data !== undefined) {\n        return getBuild(data, buildLight);\n      }\n\n      console.warn('THREE.ColladaLoader: Couldn\\'t find light with ID:', id);\n      return null;\n    } // geometry\n\n\n    function parseGeometry(xml) {\n      var data = {\n        name: xml.getAttribute('name'),\n        sources: {},\n        vertices: {},\n        primitives: []\n      };\n      var mesh = getElementsByTagName(xml, 'mesh')[0]; // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n\n      if (mesh === undefined) return;\n\n      for (var i = 0; i < mesh.childNodes.length; i++) {\n        var child = mesh.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        var id = child.getAttribute('id');\n\n        switch (child.nodeName) {\n          case 'source':\n            data.sources[id] = parseSource(child);\n            break;\n\n          case 'vertices':\n            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n            data.vertices = parseGeometryVertices(child);\n            break;\n\n          case 'polygons':\n            console.warn('THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName);\n            break;\n\n          case 'lines':\n          case 'linestrips':\n          case 'polylist':\n          case 'triangles':\n            data.primitives.push(parseGeometryPrimitive(child));\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      library.geometries[xml.getAttribute('id')] = data;\n    }\n\n    function parseSource(xml) {\n      var data = {\n        array: [],\n        stride: 3\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'float_array':\n            data.array = parseFloats(child.textContent);\n            break;\n\n          case 'Name_array':\n            data.array = parseStrings(child.textContent);\n            break;\n\n          case 'technique_common':\n            var accessor = getElementsByTagName(child, 'accessor')[0];\n\n            if (accessor !== undefined) {\n              data.stride = parseInt(accessor.getAttribute('stride'));\n            }\n\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseGeometryVertices(xml) {\n      var data = {};\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n        data[child.getAttribute('semantic')] = parseId(child.getAttribute('source'));\n      }\n\n      return data;\n    }\n\n    function parseGeometryPrimitive(xml) {\n      var primitive = {\n        type: xml.nodeName,\n        material: xml.getAttribute('material'),\n        count: parseInt(xml.getAttribute('count')),\n        inputs: {},\n        stride: 0,\n        hasUV: false\n      };\n\n      for (var i = 0, l = xml.childNodes.length; i < l; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'input':\n            var id = parseId(child.getAttribute('source'));\n            var semantic = child.getAttribute('semantic');\n            var offset = parseInt(child.getAttribute('offset'));\n            var set = parseInt(child.getAttribute('set'));\n            var inputname = set > 0 ? semantic + set : semantic;\n            primitive.inputs[inputname] = {\n              id: id,\n              offset: offset\n            };\n            primitive.stride = Math.max(primitive.stride, offset + 1);\n            if (semantic === 'TEXCOORD') primitive.hasUV = true;\n            break;\n\n          case 'vcount':\n            primitive.vcount = parseInts(child.textContent);\n            break;\n\n          case 'p':\n            primitive.p = parseInts(child.textContent);\n            break;\n        }\n      }\n\n      return primitive;\n    }\n\n    function groupPrimitives(primitives) {\n      var build = {};\n\n      for (var i = 0; i < primitives.length; i++) {\n        var primitive = primitives[i];\n        if (build[primitive.type] === undefined) build[primitive.type] = [];\n        build[primitive.type].push(primitive);\n      }\n\n      return build;\n    }\n\n    function checkUVCoordinates(primitives) {\n      var count = 0;\n\n      for (var i = 0, l = primitives.length; i < l; i++) {\n        var primitive = primitives[i];\n\n        if (primitive.hasUV === true) {\n          count++;\n        }\n      }\n\n      if (count > 0 && count < primitives.length) {\n        primitives.uvsNeedsFix = true;\n      }\n    }\n\n    function buildGeometry(data) {\n      var build = {};\n      var sources = data.sources;\n      var vertices = data.vertices;\n      var primitives = data.primitives;\n      if (primitives.length === 0) return {}; // our goal is to create one buffer geometry for a single type of primitives\n      // first, we group all primitives by their type\n\n      var groupedPrimitives = groupPrimitives(primitives);\n\n      for (var type in groupedPrimitives) {\n        var primitiveType = groupedPrimitives[type]; // second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n        checkUVCoordinates(primitiveType); // third, create a buffer geometry for each type of primitives\n\n        build[type] = buildGeometryType(primitiveType, sources, vertices);\n      }\n\n      return build;\n    }\n\n    function buildGeometryType(primitives, sources, vertices) {\n      var build = {};\n      var position = {\n        array: [],\n        stride: 0\n      };\n      var normal = {\n        array: [],\n        stride: 0\n      };\n      var uv = {\n        array: [],\n        stride: 0\n      };\n      var uv2 = {\n        array: [],\n        stride: 0\n      };\n      var color = {\n        array: [],\n        stride: 0\n      };\n      var skinIndex = {\n        array: [],\n        stride: 4\n      };\n      var skinWeight = {\n        array: [],\n        stride: 4\n      };\n      var geometry = new THREE.BufferGeometry();\n      var materialKeys = [];\n      var start = 0;\n\n      for (var p = 0; p < primitives.length; p++) {\n        var primitive = primitives[p];\n        var inputs = primitive.inputs; // groups\n\n        var count = 0;\n\n        switch (primitive.type) {\n          case 'lines':\n          case 'linestrips':\n            count = primitive.count * 2;\n            break;\n\n          case 'triangles':\n            count = primitive.count * 3;\n            break;\n\n          case 'polylist':\n            for (var g = 0; g < primitive.count; g++) {\n              var vc = primitive.vcount[g];\n\n              switch (vc) {\n                case 3:\n                  count += 3; // single triangle\n\n                  break;\n\n                case 4:\n                  count += 6; // quad, subdivided into two triangles\n\n                  break;\n\n                default:\n                  count += (vc - 2) * 3; // polylist with more than four vertices\n\n                  break;\n              }\n            }\n\n            break;\n\n          default:\n            console.warn('THREE.ColladaLoader: Unknow primitive type:', primitive.type);\n        }\n\n        geometry.addGroup(start, count, p);\n        start += count; // material\n\n        if (primitive.material) {\n          materialKeys.push(primitive.material);\n        } // geometry data\n\n\n        for (var name in inputs) {\n          var input = inputs[name];\n\n          switch (name) {\n            case 'VERTEX':\n              for (var key in vertices) {\n                var id = vertices[key];\n\n                switch (key) {\n                  case 'POSITION':\n                    var prevLength = position.array.length;\n                    buildGeometryData(primitive, sources[id], input.offset, position.array);\n                    position.stride = sources[id].stride;\n\n                    if (sources.skinWeights && sources.skinIndices) {\n                      buildGeometryData(primitive, sources.skinIndices, input.offset, skinIndex.array);\n                      buildGeometryData(primitive, sources.skinWeights, input.offset, skinWeight.array);\n                    } // see #3803\n\n\n                    if (primitive.hasUV === false && primitives.uvsNeedsFix === true) {\n                      var count = (position.array.length - prevLength) / position.stride;\n\n                      for (var i = 0; i < count; i++) {\n                        // fill missing uv coordinates\n                        uv.array.push(0, 0);\n                      }\n                    }\n\n                    break;\n\n                  case 'NORMAL':\n                    buildGeometryData(primitive, sources[id], input.offset, normal.array);\n                    normal.stride = sources[id].stride;\n                    break;\n\n                  case 'COLOR':\n                    buildGeometryData(primitive, sources[id], input.offset, color.array);\n                    color.stride = sources[id].stride;\n                    break;\n\n                  case 'TEXCOORD':\n                    buildGeometryData(primitive, sources[id], input.offset, uv.array);\n                    uv.stride = sources[id].stride;\n                    break;\n\n                  case 'TEXCOORD1':\n                    buildGeometryData(primitive, sources[id], input.offset, uv2.array);\n                    uv.stride = sources[id].stride;\n                    break;\n\n                  default:\n                    console.warn('THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key);\n                }\n              }\n\n              break;\n\n            case 'NORMAL':\n              buildGeometryData(primitive, sources[input.id], input.offset, normal.array);\n              normal.stride = sources[input.id].stride;\n              break;\n\n            case 'COLOR':\n              buildGeometryData(primitive, sources[input.id], input.offset, color.array);\n              color.stride = sources[input.id].stride;\n              break;\n\n            case 'TEXCOORD':\n              buildGeometryData(primitive, sources[input.id], input.offset, uv.array);\n              uv.stride = sources[input.id].stride;\n              break;\n\n            case 'TEXCOORD1':\n              buildGeometryData(primitive, sources[input.id], input.offset, uv2.array);\n              uv2.stride = sources[input.id].stride;\n              break;\n          }\n        }\n      } // build geometry\n\n\n      if (position.array.length > 0) geometry.addAttribute('position', new THREE.Float32BufferAttribute(position.array, position.stride));\n      if (normal.array.length > 0) geometry.addAttribute('normal', new THREE.Float32BufferAttribute(normal.array, normal.stride));\n      if (color.array.length > 0) geometry.addAttribute('color', new THREE.Float32BufferAttribute(color.array, color.stride));\n      if (uv.array.length > 0) geometry.addAttribute('uv', new THREE.Float32BufferAttribute(uv.array, uv.stride));\n      if (uv2.array.length > 0) geometry.addAttribute('uv2', new THREE.Float32BufferAttribute(uv2.array, uv2.stride));\n      if (skinIndex.array.length > 0) geometry.addAttribute('skinIndex', new THREE.Float32BufferAttribute(skinIndex.array, skinIndex.stride));\n      if (skinWeight.array.length > 0) geometry.addAttribute('skinWeight', new THREE.Float32BufferAttribute(skinWeight.array, skinWeight.stride));\n      build.data = geometry;\n      build.type = primitives[0].type;\n      build.materialKeys = materialKeys;\n      return build;\n    }\n\n    function buildGeometryData(primitive, source, offset, array) {\n      var indices = primitive.p;\n      var stride = primitive.stride;\n      var vcount = primitive.vcount;\n\n      function pushVector(i) {\n        var index = indices[i + offset] * sourceStride;\n        var length = index + sourceStride;\n\n        for (; index < length; index++) {\n          array.push(sourceArray[index]);\n        }\n      }\n\n      var sourceArray = source.array;\n      var sourceStride = source.stride;\n\n      if (primitive.vcount !== undefined) {\n        var index = 0;\n\n        for (var i = 0, l = vcount.length; i < l; i++) {\n          var count = vcount[i];\n\n          if (count === 4) {\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            var d = index + stride * 3;\n            pushVector(a);\n            pushVector(b);\n            pushVector(d);\n            pushVector(b);\n            pushVector(c);\n            pushVector(d);\n          } else if (count === 3) {\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            pushVector(a);\n            pushVector(b);\n            pushVector(c);\n          } else if (count > 4) {\n            for (var k = 1, kl = count - 2; k <= kl; k++) {\n              var a = index + stride * 0;\n              var b = index + stride * k;\n              var c = index + stride * (k + 1);\n              pushVector(a);\n              pushVector(b);\n              pushVector(c);\n            }\n          }\n\n          index += stride * count;\n        }\n      } else {\n        for (var i = 0, l = indices.length; i < l; i += stride) {\n          pushVector(i);\n        }\n      }\n    }\n\n    function getGeometry(id) {\n      return getBuild(library.geometries[id], buildGeometry);\n    } // kinematics\n\n\n    function parseKinematicsModel(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        joints: {},\n        links: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            parseKinematicsTechniqueCommon(child, data);\n            break;\n        }\n      }\n\n      library.kinematicsModels[xml.getAttribute('id')] = data;\n    }\n\n    function buildKinematicsModel(data) {\n      if (data.build !== undefined) return data.build;\n      return data;\n    }\n\n    function getKinematicsModel(id) {\n      return getBuild(library.kinematicsModels[id], buildKinematicsModel);\n    }\n\n    function parseKinematicsTechniqueCommon(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'joint':\n            data.joints[child.getAttribute('sid')] = parseKinematicsJoint(child);\n            break;\n\n          case 'link':\n            data.links.push(parseKinematicsLink(child));\n            break;\n        }\n      }\n    }\n\n    function parseKinematicsJoint(xml) {\n      var data;\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'prismatic':\n          case 'revolute':\n            data = parseKinematicsJointParameter(child);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsJointParameter(xml, data) {\n      var data = {\n        sid: xml.getAttribute('sid'),\n        name: xml.getAttribute('name') || '',\n        axis: new THREE.Vector3(),\n        limits: {\n          min: 0,\n          max: 0\n        },\n        type: xml.nodeName,\n        \"static\": false,\n        zeroPosition: 0,\n        middlePosition: 0\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'axis':\n            var array = parseFloats(child.textContent);\n            data.axis.fromArray(array);\n            break;\n\n          case 'limits':\n            var max = child.getElementsByTagName('max')[0];\n            var min = child.getElementsByTagName('min')[0];\n            data.limits.max = parseFloat(max.textContent);\n            data.limits.min = parseFloat(min.textContent);\n            break;\n        }\n      } // if min is equal to or greater than max, consider the joint static\n\n\n      if (data.limits.min >= data.limits.max) {\n        data[\"static\"] = true;\n      } // calculate middle position\n\n\n      data.middlePosition = (data.limits.min + data.limits.max) / 2.0;\n      return data;\n    }\n\n    function parseKinematicsLink(xml) {\n      var data = {\n        sid: xml.getAttribute('sid'),\n        name: xml.getAttribute('name') || '',\n        attachments: [],\n        transforms: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'attachment_full':\n            data.attachments.push(parseKinematicsAttachment(child));\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push(parseKinematicsTransform(child));\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsAttachment(xml) {\n      var data = {\n        joint: xml.getAttribute('joint').split('/').pop(),\n        transforms: [],\n        links: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'link':\n            data.links.push(parseKinematicsLink(child));\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push(parseKinematicsTransform(child));\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function parseKinematicsTransform(xml) {\n      var data = {\n        type: xml.nodeName\n      };\n      var array = parseFloats(xml.textContent);\n\n      switch (data.type) {\n        case 'matrix':\n          data.obj = new THREE.Matrix4();\n          data.obj.fromArray(array).transpose();\n          break;\n\n        case 'translate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray(array);\n          break;\n\n        case 'rotate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray(array);\n          data.angle = THREE.Math.degToRad(array[3]);\n          break;\n      }\n\n      return data;\n    } // physics\n\n\n    function parsePhysicsModel(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        rigidBodies: {}\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'rigid_body':\n            data.rigidBodies[child.getAttribute('name')] = {};\n            parsePhysicsRigidBody(child, data.rigidBodies[child.getAttribute('name')]);\n            break;\n        }\n      }\n\n      library.physicsModels[xml.getAttribute('id')] = data;\n    }\n\n    function parsePhysicsRigidBody(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'technique_common':\n            parsePhysicsTechniqueCommon(child, data);\n            break;\n        }\n      }\n    }\n\n    function parsePhysicsTechniqueCommon(xml, data) {\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'inertia':\n            data.inertia = parseFloats(child.textContent);\n            break;\n\n          case 'mass':\n            data.mass = parseFloats(child.textContent)[0];\n            break;\n        }\n      }\n    } // scene\n\n\n    function parseKinematicsScene(xml) {\n      var data = {\n        bindJointAxis: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'bind_joint_axis':\n            data.bindJointAxis.push(parseKinematicsBindJointAxis(child));\n            break;\n        }\n      }\n\n      library.kinematicsScenes[parseId(xml.getAttribute('url'))] = data;\n    }\n\n    function parseKinematicsBindJointAxis(xml) {\n      var data = {\n        target: xml.getAttribute('target').split('/').pop()\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'axis':\n            var param = child.getElementsByTagName('param')[0];\n            data.axis = param.textContent;\n            var tmpJointIndex = data.axis.split('inst_').pop().split('axis')[0];\n            data.jointIndex = tmpJointIndex.substr(0, tmpJointIndex.length - 1);\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildKinematicsScene(data) {\n      if (data.build !== undefined) return data.build;\n      return data;\n    }\n\n    function getKinematicsScene(id) {\n      return getBuild(library.kinematicsScenes[id], buildKinematicsScene);\n    }\n\n    function setupKinematics() {\n      var kinematicsModelId = Object.keys(library.kinematicsModels)[0];\n      var kinematicsSceneId = Object.keys(library.kinematicsScenes)[0];\n      var visualSceneId = Object.keys(library.visualScenes)[0];\n      if (kinematicsModelId === undefined || kinematicsSceneId === undefined) return;\n      var kinematicsModel = getKinematicsModel(kinematicsModelId);\n      var kinematicsScene = getKinematicsScene(kinematicsSceneId);\n      var visualScene = getVisualScene(visualSceneId);\n      var bindJointAxis = kinematicsScene.bindJointAxis;\n      var jointMap = {};\n\n      for (var i = 0, l = bindJointAxis.length; i < l; i++) {\n        var axis = bindJointAxis[i]; // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n        var targetElement = collada.querySelector('[sid=\"' + axis.target + '\"]');\n\n        if (targetElement) {\n          // get the parent of the transfrom element\n          var parentVisualElement = targetElement.parentElement; // connect the joint of the kinematics model with the element in the visual scene\n\n          connect(axis.jointIndex, parentVisualElement);\n        }\n      }\n\n      function connect(jointIndex, visualElement) {\n        var visualElementName = visualElement.getAttribute('name');\n        var joint = kinematicsModel.joints[jointIndex];\n        visualScene.traverse(function (object) {\n          if (object.name === visualElementName) {\n            jointMap[jointIndex] = {\n              object: object,\n              transforms: buildTransformList(visualElement),\n              joint: joint,\n              position: joint.zeroPosition\n            };\n          }\n        });\n      }\n\n      var m0 = new THREE.Matrix4();\n      kinematics = {\n        joints: kinematicsModel && kinematicsModel.joints,\n        getJointValue: function getJointValue(jointIndex) {\n          var jointData = jointMap[jointIndex];\n\n          if (jointData) {\n            return jointData.position;\n          } else {\n            console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.');\n          }\n        },\n        setJointValue: function setJointValue(jointIndex, value) {\n          var jointData = jointMap[jointIndex];\n\n          if (jointData) {\n            var joint = jointData.joint;\n\n            if (value > joint.limits.max || value < joint.limits.min) {\n              console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').');\n            } else if (joint[\"static\"]) {\n              console.warn('THREE.ColladaLoader: Joint ' + jointIndex + ' is static.');\n            } else {\n              var object = jointData.object;\n              var axis = joint.axis;\n              var transforms = jointData.transforms;\n              matrix.identity(); // each update, we have to apply all transforms in the correct order\n\n              for (var i = 0; i < transforms.length; i++) {\n                var transform = transforms[i]; // if there is a connection of the transform node with a joint, apply the joint value\n\n                if (transform.sid && transform.sid.indexOf(jointIndex) !== -1) {\n                  switch (joint.type) {\n                    case 'revolute':\n                      matrix.multiply(m0.makeRotationAxis(axis, THREE.Math.degToRad(value)));\n                      break;\n\n                    case 'prismatic':\n                      matrix.multiply(m0.makeTranslation(axis.x * value, axis.y * value, axis.z * value));\n                      break;\n\n                    default:\n                      console.warn('THREE.ColladaLoader: Unknown joint type: ' + joint.type);\n                      break;\n                  }\n                } else {\n                  switch (transform.type) {\n                    case 'matrix':\n                      matrix.multiply(transform.obj);\n                      break;\n\n                    case 'translate':\n                      matrix.multiply(m0.makeTranslation(transform.obj.x, transform.obj.y, transform.obj.z));\n                      break;\n\n                    case 'scale':\n                      matrix.scale(transform.obj);\n                      break;\n\n                    case 'rotate':\n                      matrix.multiply(m0.makeRotationAxis(transform.obj, transform.angle));\n                      break;\n                  }\n                }\n              }\n\n              object.matrix.copy(matrix);\n              object.matrix.decompose(object.position, object.quaternion, object.scale);\n              jointMap[jointIndex].position = value;\n            }\n          } else {\n            console.log('THREE.ColladaLoader: ' + jointIndex + ' does not exist.');\n          }\n        }\n      };\n    }\n\n    function buildTransformList(node) {\n      var transforms = [];\n      var xml = collada.querySelector('[id=\"' + node.id + '\"]');\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'matrix':\n            var array = parseFloats(child.textContent);\n            var matrix = new THREE.Matrix4().fromArray(array).transpose();\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: matrix\n            });\n            break;\n\n          case 'translate':\n          case 'scale':\n            var array = parseFloats(child.textContent);\n            var vector = new THREE.Vector3().fromArray(array);\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: vector\n            });\n            break;\n\n          case 'rotate':\n            var array = parseFloats(child.textContent);\n            var vector = new THREE.Vector3().fromArray(array);\n            var angle = THREE.Math.degToRad(array[3]);\n            transforms.push({\n              sid: child.getAttribute('sid'),\n              type: child.nodeName,\n              obj: vector,\n              angle: angle\n            });\n            break;\n        }\n      }\n\n      return transforms;\n    } // nodes\n\n\n    function prepareNodes(xml) {\n      var elements = xml.getElementsByTagName('node'); // ensure all node elements have id attributes\n\n      for (var i = 0; i < elements.length; i++) {\n        var element = elements[i];\n\n        if (element.hasAttribute('id') === false) {\n          element.setAttribute('id', generateId());\n        }\n      }\n    }\n\n    var matrix = new THREE.Matrix4();\n    var vector = new THREE.Vector3();\n\n    function parseNode(xml) {\n      var data = {\n        name: xml.getAttribute('name') || '',\n        type: xml.getAttribute('type'),\n        id: xml.getAttribute('id'),\n        sid: xml.getAttribute('sid'),\n        matrix: new THREE.Matrix4(),\n        nodes: [],\n        instanceCameras: [],\n        instanceControllers: [],\n        instanceLights: [],\n        instanceGeometries: [],\n        instanceNodes: [],\n        transforms: {}\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n        if (child.nodeType !== 1) continue;\n\n        switch (child.nodeName) {\n          case 'node':\n            data.nodes.push(child.getAttribute('id'));\n            parseNode(child);\n            break;\n\n          case 'instance_camera':\n            data.instanceCameras.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'instance_controller':\n            data.instanceControllers.push(parseNodeInstance(child));\n            break;\n\n          case 'instance_light':\n            data.instanceLights.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'instance_geometry':\n            data.instanceGeometries.push(parseNodeInstance(child));\n            break;\n\n          case 'instance_node':\n            data.instanceNodes.push(parseId(child.getAttribute('url')));\n            break;\n\n          case 'matrix':\n            var array = parseFloats(child.textContent);\n            data.matrix.multiply(matrix.fromArray(array).transpose());\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'translate':\n            var array = parseFloats(child.textContent);\n            vector.fromArray(array);\n            data.matrix.multiply(matrix.makeTranslation(vector.x, vector.y, vector.z));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'rotate':\n            var array = parseFloats(child.textContent);\n            var angle = THREE.Math.degToRad(array[3]);\n            data.matrix.multiply(matrix.makeRotationAxis(vector.fromArray(array), angle));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'scale':\n            var array = parseFloats(child.textContent);\n            data.matrix.scale(vector.fromArray(array));\n            data.transforms[child.getAttribute('sid')] = child.nodeName;\n            break;\n\n          case 'extra':\n            break;\n\n          default:\n            console.log(child);\n        }\n      }\n\n      if (hasNode(data.id)) {\n        console.warn('THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id);\n      } else {\n        library.nodes[data.id] = data;\n      }\n\n      return data;\n    }\n\n    function parseNodeInstance(xml) {\n      var data = {\n        id: parseId(xml.getAttribute('url')),\n        materials: {},\n        skeletons: []\n      };\n\n      for (var i = 0; i < xml.childNodes.length; i++) {\n        var child = xml.childNodes[i];\n\n        switch (child.nodeName) {\n          case 'bind_material':\n            var instances = child.getElementsByTagName('instance_material');\n\n            for (var j = 0; j < instances.length; j++) {\n              var instance = instances[j];\n              var symbol = instance.getAttribute('symbol');\n              var target = instance.getAttribute('target');\n              data.materials[symbol] = parseId(target);\n            }\n\n            break;\n\n          case 'skeleton':\n            data.skeletons.push(parseId(child.textContent));\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      return data;\n    }\n\n    function buildSkeleton(skeletons, joints) {\n      var boneData = [];\n      var sortedBoneData = [];\n      var i, j, data; // a skeleton can have multiple root bones. collada expresses this\n      // situtation with multiple \"skeleton\" tags per controller instance\n\n      for (i = 0; i < skeletons.length; i++) {\n        var skeleton = skeletons[i];\n        var root;\n\n        if (hasNode(skeleton)) {\n          root = getNode(skeleton);\n          buildBoneHierarchy(root, joints, boneData);\n        } else if (hasVisualScene(skeleton)) {\n          // handle case where the skeleton refers to the visual scene (#13335)\n          var visualScene = library.visualScenes[skeleton];\n          var children = visualScene.children;\n\n          for (var j = 0; j < children.length; j++) {\n            var child = children[j];\n\n            if (child.type === 'JOINT') {\n              var root = getNode(child.id);\n              buildBoneHierarchy(root, joints, boneData);\n            }\n          }\n        } else {\n          console.error('THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton);\n        }\n      } // sort bone data (the order is defined in the corresponding controller)\n\n\n      for (i = 0; i < joints.length; i++) {\n        for (j = 0; j < boneData.length; j++) {\n          data = boneData[j];\n\n          if (data.bone.name === joints[i].name) {\n            sortedBoneData[i] = data;\n            data.processed = true;\n            break;\n          }\n        }\n      } // add unprocessed bone data at the end of the list\n\n\n      for (i = 0; i < boneData.length; i++) {\n        data = boneData[i];\n\n        if (data.processed === false) {\n          sortedBoneData.push(data);\n          data.processed = true;\n        }\n      } // setup arrays for skeleton creation\n\n\n      var bones = [];\n      var boneInverses = [];\n\n      for (i = 0; i < sortedBoneData.length; i++) {\n        data = sortedBoneData[i];\n        bones.push(data.bone);\n        boneInverses.push(data.boneInverse);\n      }\n\n      return new THREE.Skeleton(bones, boneInverses);\n    }\n\n    function buildBoneHierarchy(root, joints, boneData) {\n      // setup bone data from visual scene\n      root.traverse(function (object) {\n        if (object.isBone === true) {\n          var boneInverse; // retrieve the boneInverse from the controller data\n\n          for (var i = 0; i < joints.length; i++) {\n            var joint = joints[i];\n\n            if (joint.name === object.name) {\n              boneInverse = joint.boneInverse;\n              break;\n            }\n          }\n\n          if (boneInverse === undefined) {\n            // Unfortunately, there can be joints in the visual scene that are not part of the\n            // corresponding controller. In this case, we have to create a dummy boneInverse matrix\n            // for the respective bone. This bone won't affect any vertices, because there are no skin indices\n            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n            // ensure a correct animation of the model.\n            boneInverse = new THREE.Matrix4();\n          }\n\n          boneData.push({\n            bone: object,\n            boneInverse: boneInverse,\n            processed: false\n          });\n        }\n      });\n    }\n\n    function buildNode(data) {\n      var objects = [];\n      var matrix = data.matrix;\n      var nodes = data.nodes;\n      var type = data.type;\n      var instanceCameras = data.instanceCameras;\n      var instanceControllers = data.instanceControllers;\n      var instanceLights = data.instanceLights;\n      var instanceGeometries = data.instanceGeometries;\n      var instanceNodes = data.instanceNodes; // nodes\n\n      for (var i = 0, l = nodes.length; i < l; i++) {\n        objects.push(getNode(nodes[i]));\n      } // instance cameras\n\n\n      for (var i = 0, l = instanceCameras.length; i < l; i++) {\n        var instanceCamera = getCamera(instanceCameras[i]);\n\n        if (instanceCamera !== null) {\n          objects.push(instanceCamera.clone());\n        }\n      } // instance controllers\n\n\n      for (var i = 0, l = instanceControllers.length; i < l; i++) {\n        var instance = instanceControllers[i];\n        var controller = getController(instance.id);\n        var geometries = getGeometry(controller.id);\n        var newObjects = buildObjects(geometries, instance.materials);\n        var skeletons = instance.skeletons;\n        var joints = controller.skin.joints;\n        var skeleton = buildSkeleton(skeletons, joints);\n\n        for (var j = 0, jl = newObjects.length; j < jl; j++) {\n          var object = newObjects[j];\n\n          if (object.isSkinnedMesh) {\n            object.bind(skeleton, controller.skin.bindMatrix);\n            object.normalizeSkinWeights();\n          }\n\n          objects.push(object);\n        }\n      } // instance lights\n\n\n      for (var i = 0, l = instanceLights.length; i < l; i++) {\n        var instanceLight = getLight(instanceLights[i]);\n\n        if (instanceLight !== null) {\n          objects.push(instanceLight.clone());\n        }\n      } // instance geometries\n\n\n      for (var i = 0, l = instanceGeometries.length; i < l; i++) {\n        var instance = instanceGeometries[i]; // a single geometry instance in collada can lead to multiple object3Ds.\n        // this is the case when primitives are combined like triangles and lines\n\n        var geometries = getGeometry(instance.id);\n        var newObjects = buildObjects(geometries, instance.materials);\n\n        for (var j = 0, jl = newObjects.length; j < jl; j++) {\n          objects.push(newObjects[j]);\n        }\n      } // instance nodes\n\n\n      for (var i = 0, l = instanceNodes.length; i < l; i++) {\n        objects.push(getNode(instanceNodes[i]).clone());\n      }\n\n      var object;\n\n      if (nodes.length === 0 && objects.length === 1) {\n        object = objects[0];\n      } else {\n        object = type === 'JOINT' ? new THREE.Bone() : new THREE.Group();\n\n        for (var i = 0; i < objects.length; i++) {\n          object.add(objects[i]);\n        }\n      }\n\n      if (object.name === '') {\n        object.name = type === 'JOINT' ? data.sid : data.name;\n      }\n\n      object.matrix.copy(matrix);\n      object.matrix.decompose(object.position, object.quaternion, object.scale);\n      return object;\n    }\n\n    var fallbackMaterial = new THREE.MeshBasicMaterial({\n      color: 0xff00ff\n    });\n\n    function resolveMaterialBinding(keys, instanceMaterials) {\n      var materials = [];\n\n      for (var i = 0, l = keys.length; i < l; i++) {\n        var id = instanceMaterials[keys[i]];\n\n        if (id === undefined) {\n          console.warn('THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[i]);\n          materials.push(fallbackMaterial);\n        } else {\n          materials.push(getMaterial(id));\n        }\n      }\n\n      return materials;\n    }\n\n    function buildObjects(geometries, instanceMaterials) {\n      var objects = [];\n\n      for (var type in geometries) {\n        var geometry = geometries[type];\n        var materials = resolveMaterialBinding(geometry.materialKeys, instanceMaterials); // handle case if no materials are defined\n\n        if (materials.length === 0) {\n          if (type === 'lines' || type === 'linestrips') {\n            materials.push(new THREE.LineBasicMaterial());\n          } else {\n            materials.push(new THREE.MeshPhongMaterial());\n          }\n        } // regard skinning\n\n\n        var skinning = geometry.data.attributes.skinIndex !== undefined;\n\n        if (skinning) {\n          for (var i = 0, l = materials.length; i < l; i++) {\n            materials[i].skinning = true;\n          }\n        } // choose between a single or multi materials (material array)\n\n\n        var material = materials.length === 1 ? materials[0] : materials; // now create a specific 3D object\n\n        var object;\n\n        switch (type) {\n          case 'lines':\n            object = new THREE.LineSegments(geometry.data, material);\n            break;\n\n          case 'linestrips':\n            object = new THREE.Line(geometry.data, material);\n            break;\n\n          case 'triangles':\n          case 'polylist':\n            if (skinning) {\n              object = new THREE.SkinnedMesh(geometry.data, material);\n            } else {\n              object = new THREE.Mesh(geometry.data, material);\n            }\n\n            break;\n        }\n\n        objects.push(object);\n      }\n\n      return objects;\n    }\n\n    function hasNode(id) {\n      return library.nodes[id] !== undefined;\n    }\n\n    function getNode(id) {\n      return getBuild(library.nodes[id], buildNode);\n    } // visual scenes\n\n\n    function parseVisualScene(xml) {\n      var data = {\n        name: xml.getAttribute('name'),\n        children: []\n      };\n      prepareNodes(xml);\n      var elements = getElementsByTagName(xml, 'node');\n\n      for (var i = 0; i < elements.length; i++) {\n        data.children.push(parseNode(elements[i]));\n      }\n\n      library.visualScenes[xml.getAttribute('id')] = data;\n    }\n\n    function buildVisualScene(data) {\n      var group = new THREE.Group();\n      group.name = data.name;\n      var children = data.children;\n\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n        group.add(getNode(child.id));\n      }\n\n      return group;\n    }\n\n    function hasVisualScene(id) {\n      return library.visualScenes[id] !== undefined;\n    }\n\n    function getVisualScene(id) {\n      return getBuild(library.visualScenes[id], buildVisualScene);\n    } // scenes\n\n\n    function parseScene(xml) {\n      var instance = getElementsByTagName(xml, 'instance_visual_scene')[0];\n      return getVisualScene(parseId(instance.getAttribute('url')));\n    }\n\n    function setupAnimations() {\n      var clips = library.clips;\n\n      if (isEmpty(clips) === true) {\n        if (isEmpty(library.animations) === false) {\n          // if there are animations but no clips, we create a default clip for playback\n          var tracks = [];\n\n          for (var id in library.animations) {\n            var animationTracks = getAnimation(id);\n\n            for (var i = 0, l = animationTracks.length; i < l; i++) {\n              tracks.push(animationTracks[i]);\n            }\n          }\n\n          animations.push(new THREE.AnimationClip('default', -1, tracks));\n        }\n      } else {\n        for (var id in clips) {\n          animations.push(getAnimationClip(id));\n        }\n      }\n    }\n\n    if (text.length === 0) {\n      return {\n        scene: new THREE.Scene()\n      };\n    }\n\n    var xml = new DOMParser().parseFromString(text, 'application/xml');\n    var collada = getElementsByTagName(xml, 'COLLADA')[0]; // metadata\n\n    var version = collada.getAttribute('version');\n    console.log('THREE.ColladaLoader: File version', version);\n    var asset = parseAsset(getElementsByTagName(collada, 'asset')[0]);\n    var textureLoader = new THREE.TextureLoader(this.manager);\n    textureLoader.setPath(this.resourcePath || path).setCrossOrigin(this.crossOrigin);\n    var tgaLoader;\n\n    if (THREE.TGALoader) {\n      tgaLoader = new THREE.TGALoader(this.manager);\n      tgaLoader.setPath(this.resourcePath || path);\n    } //\n\n\n    var animations = [];\n    var kinematics = {};\n    var count = 0; //\n\n    var library = {\n      animations: {},\n      clips: {},\n      controllers: {},\n      images: {},\n      effects: {},\n      materials: {},\n      cameras: {},\n      lights: {},\n      geometries: {},\n      nodes: {},\n      visualScenes: {},\n      kinematicsModels: {},\n      physicsModels: {},\n      kinematicsScenes: {}\n    };\n    parseLibrary(collada, 'library_animations', 'animation', parseAnimation);\n    parseLibrary(collada, 'library_animation_clips', 'animation_clip', parseAnimationClip);\n    parseLibrary(collada, 'library_controllers', 'controller', parseController);\n    parseLibrary(collada, 'library_images', 'image', parseImage);\n    parseLibrary(collada, 'library_effects', 'effect', parseEffect);\n    parseLibrary(collada, 'library_materials', 'material', parseMaterial);\n    parseLibrary(collada, 'library_cameras', 'camera', parseCamera);\n    parseLibrary(collada, 'library_lights', 'light', parseLight);\n    parseLibrary(collada, 'library_geometries', 'geometry', parseGeometry);\n    parseLibrary(collada, 'library_nodes', 'node', parseNode);\n    parseLibrary(collada, 'library_visual_scenes', 'visual_scene', parseVisualScene);\n    parseLibrary(collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel);\n    parseLibrary(collada, 'library_physics_models', 'physics_model', parsePhysicsModel);\n    parseLibrary(collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene);\n    buildLibrary(library.animations, buildAnimation);\n    buildLibrary(library.clips, buildAnimationClip);\n    buildLibrary(library.controllers, buildController);\n    buildLibrary(library.images, buildImage);\n    buildLibrary(library.effects, buildEffect);\n    buildLibrary(library.materials, buildMaterial);\n    buildLibrary(library.cameras, buildCamera);\n    buildLibrary(library.lights, buildLight);\n    buildLibrary(library.geometries, buildGeometry);\n    buildLibrary(library.visualScenes, buildVisualScene);\n    setupAnimations();\n    setupKinematics();\n    var scene = parseScene(getElementsByTagName(collada, 'scene')[0]);\n\n    if (asset.upAxis === 'Z_UP') {\n      scene.quaternion.setFromEuler(new THREE.Euler(-Math.PI / 2, 0, 0));\n    }\n\n    scene.scale.multiplyScalar(asset.unit);\n    return {\n      animations: animations,\n      kinematics: kinematics,\n      library: library,\n      scene: scene\n    };\n  }\n};","require(\"core-js/modules/es6.function.bind\");\n\nTHREE.FBXLoader = require('../../lib/FBXLoader');\n/**\n * fbx-model\n *\n * Loader for FBX format. Supports ASCII, but *not* binary, models.\n */\n\nmodule.exports = AFRAME.registerComponent('fbx-model', {\n  schema: {\n    src: {\n      type: 'asset'\n    },\n    crossorigin: {\n      \"default\": ''\n    }\n  },\n  init: function init() {\n    this.model = null;\n  },\n  update: function update() {\n    var data = this.data;\n    if (!data.src) return;\n    this.remove();\n    var loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n  load: function load(model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {\n      format: 'fbx',\n      model: model\n    });\n  },\n  remove: function remove() {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});","require(\"core-js/modules/es6.typed.data-view\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.typed.float32-array\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.array.reduce\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.string.repeat\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.typed.uint8-array\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.map\");\n\n/**\n * @author Kyle-Larson https://github.com/Kyle-Larson\n * @author Takahiro https://github.com/takahirox\n * @author Lewy Blue https://github.com/looeee\n *\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://wiki.blender.org/index.php/User:Mont29/Foundation/FBX_File_Structure\n * \thttp://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * \tBinary format specification:\n *\t\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\nmodule.exports = THREE.FBXLoader = function () {\n  var fbxTree;\n  var connections;\n  var sceneGraph;\n\n  function FBXLoader(manager) {\n    this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n  }\n\n  FBXLoader.prototype = {\n    constructor: FBXLoader,\n    crossOrigin: 'anonymous',\n    load: function load(url, onLoad, onProgress, onError) {\n      var self = this;\n      var resourceDirectory = THREE.LoaderUtils.extractUrlBase(url);\n      var loader = new THREE.FileLoader(this.manager);\n      loader.setResponseType('arraybuffer');\n      loader.load(url, function (buffer) {\n        try {\n          var scene = self.parse(buffer, resourceDirectory);\n          onLoad(scene);\n        } catch (error) {\n          setTimeout(function () {\n            if (onError) onError(error);\n            self.manager.itemError(url);\n          }, 0);\n        }\n      }, onProgress, onError);\n    },\n    setCrossOrigin: function setCrossOrigin(value) {\n      this.crossOrigin = value;\n      return this;\n    },\n    parse: function parse(FBXBuffer, resourceDirectory) {\n      if (isFbxFormatBinary(FBXBuffer)) {\n        fbxTree = new BinaryParser().parse(FBXBuffer);\n      } else {\n        var FBXText = convertArrayBufferToString(FBXBuffer);\n\n        if (!isFbxFormatASCII(FBXText)) {\n          throw new Error('THREE.FBXLoader: Unknown format.');\n        }\n\n        if (getFbxVersion(FBXText) < 7000) {\n          throw new Error('THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion(FBXText));\n        }\n\n        fbxTree = new TextParser().parse(FBXText);\n      } //console.log( FBXTree );\n\n\n      var textureLoader = new THREE.TextureLoader(this.manager).setPath(resourceDirectory).setCrossOrigin(this.crossOrigin);\n      return new FBXTreeParser(textureLoader).parse(fbxTree);\n    }\n  }; // Parse the FBXTree object returned by the BinaryParser or TextParser and return a THREE.Group\n\n  function FBXTreeParser(textureLoader) {\n    this.textureLoader = textureLoader;\n  }\n\n  FBXTreeParser.prototype = {\n    constructor: FBXTreeParser,\n    parse: function parse() {\n      connections = this.parseConnections();\n      var images = this.parseImages();\n      var textures = this.parseTextures(images);\n      var materials = this.parseMaterials(textures);\n      var deformers = this.parseDeformers();\n      var geometryMap = new GeometryParser().parse(deformers);\n      this.parseScene(deformers, geometryMap, materials);\n      return sceneGraph;\n    },\n    // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n    // and details the connection type\n    parseConnections: function parseConnections() {\n      var connectionMap = new Map();\n\n      if ('Connections' in fbxTree) {\n        var rawConnections = fbxTree.Connections.connections;\n        rawConnections.forEach(function (rawConnection) {\n          var fromID = rawConnection[0];\n          var toID = rawConnection[1];\n          var relationship = rawConnection[2];\n\n          if (!connectionMap.has(fromID)) {\n            connectionMap.set(fromID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var parentRelationship = {\n            ID: toID,\n            relationship: relationship\n          };\n          connectionMap.get(fromID).parents.push(parentRelationship);\n\n          if (!connectionMap.has(toID)) {\n            connectionMap.set(toID, {\n              parents: [],\n              children: []\n            });\n          }\n\n          var childRelationship = {\n            ID: fromID,\n            relationship: relationship\n          };\n          connectionMap.get(toID).children.push(childRelationship);\n        });\n      }\n\n      return connectionMap;\n    },\n    // Parse FBXTree.Objects.Video for embedded image data\n    // These images are connected to textures in FBXTree.Objects.Textures\n    // via FBXTree.Connections.\n    parseImages: function parseImages() {\n      var images = {};\n      var blobs = {};\n\n      if ('Video' in fbxTree.Objects) {\n        var videoNodes = fbxTree.Objects.Video;\n\n        for (var nodeID in videoNodes) {\n          var videoNode = videoNodes[nodeID];\n          var id = parseInt(nodeID);\n          images[id] = videoNode.RelativeFilename || videoNode.Filename; // raw image data is in videoNode.Content\n\n          if ('Content' in videoNode) {\n            var arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0;\n            var base64Content = typeof videoNode.Content === 'string' && videoNode.Content !== '';\n\n            if (arrayBufferContent || base64Content) {\n              var image = this.parseImage(videoNodes[nodeID]);\n              blobs[videoNode.RelativeFilename || videoNode.Filename] = image;\n            }\n          }\n        }\n      }\n\n      for (var id in images) {\n        var filename = images[id];\n        if (blobs[filename] !== undefined) images[id] = blobs[filename];else images[id] = images[id].split('\\\\').pop();\n      }\n\n      return images;\n    },\n    // Parse embedded image data in FBXTree.Video.Content\n    parseImage: function parseImage(videoNode) {\n      var content = videoNode.Content;\n      var fileName = videoNode.RelativeFilename || videoNode.Filename;\n      var extension = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase();\n      var type;\n\n      switch (extension) {\n        case 'bmp':\n          type = 'image/bmp';\n          break;\n\n        case 'jpg':\n        case 'jpeg':\n          type = 'image/jpeg';\n          break;\n\n        case 'png':\n          type = 'image/png';\n          break;\n\n        case 'tif':\n          type = 'image/tiff';\n          break;\n\n        case 'tga':\n          if (typeof THREE.TGALoader !== 'function') {\n            console.warn('FBXLoader: THREE.TGALoader is required to load TGA textures');\n            return;\n          } else {\n            if (THREE.Loader.Handlers.get('.tga') === null) {\n              THREE.Loader.Handlers.add(/\\.tga$/i, new THREE.TGALoader());\n            }\n\n            type = 'image/tga';\n            break;\n          }\n\n        default:\n          console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.');\n          return;\n      }\n\n      if (typeof content === 'string') {\n        // ASCII format\n        return 'data:' + type + ';base64,' + content;\n      } else {\n        // Binary Format\n        var array = new Uint8Array(content);\n        return window.URL.createObjectURL(new Blob([array], {\n          type: type\n        }));\n      }\n    },\n    // Parse nodes in FBXTree.Objects.Texture\n    // These contain details such as UV scaling, cropping, rotation etc and are connected\n    // to images in FBXTree.Objects.Video\n    parseTextures: function parseTextures(images) {\n      var textureMap = new Map();\n\n      if ('Texture' in fbxTree.Objects) {\n        var textureNodes = fbxTree.Objects.Texture;\n\n        for (var nodeID in textureNodes) {\n          var texture = this.parseTexture(textureNodes[nodeID], images);\n          textureMap.set(parseInt(nodeID), texture);\n        }\n      }\n\n      return textureMap;\n    },\n    // Parse individual node in FBXTree.Objects.Texture\n    parseTexture: function parseTexture(textureNode, images) {\n      var texture = this.loadTexture(textureNode, images);\n      texture.ID = textureNode.id;\n      texture.name = textureNode.attrName;\n      var wrapModeU = textureNode.WrapModeU;\n      var wrapModeV = textureNode.WrapModeV;\n      var valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n      var valueV = wrapModeV !== undefined ? wrapModeV.value : 0; // http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n      // 0: repeat(default), 1: clamp\n\n      texture.wrapS = valueU === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n      texture.wrapT = valueV === 0 ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n      if ('Scaling' in textureNode) {\n        var values = textureNode.Scaling.value;\n        texture.repeat.x = values[0];\n        texture.repeat.y = values[1];\n      }\n\n      return texture;\n    },\n    // load a texture specified as a blob or data URI, or via an external URL using THREE.TextureLoader\n    loadTexture: function loadTexture(textureNode, images) {\n      var fileName;\n      var currentPath = this.textureLoader.path;\n      var children = connections.get(textureNode.id).children;\n\n      if (children !== undefined && children.length > 0 && images[children[0].ID] !== undefined) {\n        fileName = images[children[0].ID];\n\n        if (fileName.indexOf('blob:') === 0 || fileName.indexOf('data:') === 0) {\n          this.textureLoader.setPath(undefined);\n        }\n      }\n\n      var texture;\n      var extension = textureNode.FileName.slice(-3).toLowerCase();\n\n      if (extension === 'tga') {\n        var loader = THREE.Loader.Handlers.get('.tga');\n\n        if (loader === null) {\n          console.warn('FBXLoader: TGALoader not found, creating empty placeholder texture for', fileName);\n          texture = new THREE.Texture();\n        } else {\n          texture = loader.load(fileName);\n        }\n      } else if (extension === 'psd') {\n        console.warn('FBXLoader: PSD textures are not supported, creating empty placeholder texture for', fileName);\n        texture = new THREE.Texture();\n      } else {\n        texture = this.textureLoader.load(fileName);\n      }\n\n      this.textureLoader.setPath(currentPath);\n      return texture;\n    },\n    // Parse nodes in FBXTree.Objects.Material\n    parseMaterials: function parseMaterials(textureMap) {\n      var materialMap = new Map();\n\n      if ('Material' in fbxTree.Objects) {\n        var materialNodes = fbxTree.Objects.Material;\n\n        for (var nodeID in materialNodes) {\n          var material = this.parseMaterial(materialNodes[nodeID], textureMap);\n          if (material !== null) materialMap.set(parseInt(nodeID), material);\n        }\n      }\n\n      return materialMap;\n    },\n    // Parse single node in FBXTree.Objects.Material\n    // Materials are connected to texture maps in FBXTree.Objects.Textures\n    // FBX format currently only supports Lambert and Phong shading models\n    parseMaterial: function parseMaterial(materialNode, textureMap) {\n      var ID = materialNode.id;\n      var name = materialNode.attrName;\n      var type = materialNode.ShadingModel; // Case where FBX wraps shading model in property object.\n\n      if (typeof type === 'object') {\n        type = type.value;\n      } // Ignore unused materials which don't have any connections.\n\n\n      if (!connections.has(ID)) return null;\n      var parameters = this.parseParameters(materialNode, textureMap, ID);\n      var material;\n\n      switch (type.toLowerCase()) {\n        case 'phong':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type);\n          material = new THREE.MeshPhongMaterial({\n            color: 0x3300ff\n          });\n          break;\n      }\n\n      material.setValues(parameters);\n      material.name = name;\n      return material;\n    },\n    // Parse FBX material and return parameters suitable for a three.js material\n    // Also parse the texture map and return any textures associated with the material\n    parseParameters: function parseParameters(materialNode, textureMap, ID) {\n      var parameters = {};\n\n      if (materialNode.BumpFactor) {\n        parameters.bumpScale = materialNode.BumpFactor.value;\n      }\n\n      if (materialNode.Diffuse) {\n        parameters.color = new THREE.Color().fromArray(materialNode.Diffuse.value);\n      } else if (materialNode.DiffuseColor && materialNode.DiffuseColor.type === 'Color') {\n        // The blender exporter exports diffuse here instead of in materialNode.Diffuse\n        parameters.color = new THREE.Color().fromArray(materialNode.DiffuseColor.value);\n      }\n\n      if (materialNode.DisplacementFactor) {\n        parameters.displacementScale = materialNode.DisplacementFactor.value;\n      }\n\n      if (materialNode.Emissive) {\n        parameters.emissive = new THREE.Color().fromArray(materialNode.Emissive.value);\n      } else if (materialNode.EmissiveColor && materialNode.EmissiveColor.type === 'Color') {\n        // The blender exporter exports emissive color here instead of in materialNode.Emissive\n        parameters.emissive = new THREE.Color().fromArray(materialNode.EmissiveColor.value);\n      }\n\n      if (materialNode.EmissiveFactor) {\n        parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value);\n      }\n\n      if (materialNode.Opacity) {\n        parameters.opacity = parseFloat(materialNode.Opacity.value);\n      }\n\n      if (parameters.opacity < 1.0) {\n        parameters.transparent = true;\n      }\n\n      if (materialNode.ReflectionFactor) {\n        parameters.reflectivity = materialNode.ReflectionFactor.value;\n      }\n\n      if (materialNode.Shininess) {\n        parameters.shininess = materialNode.Shininess.value;\n      }\n\n      if (materialNode.Specular) {\n        parameters.specular = new THREE.Color().fromArray(materialNode.Specular.value);\n      } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color') {\n        // The blender exporter exports specular color here instead of in materialNode.Specular\n        parameters.specular = new THREE.Color().fromArray(materialNode.SpecularColor.value);\n      }\n\n      var self = this;\n      connections.get(ID).children.forEach(function (child) {\n        var type = child.relationship;\n\n        switch (type) {\n          case 'Bump':\n            parameters.bumpMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'DiffuseColor':\n            parameters.map = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'DisplacementColor':\n            parameters.displacementMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'EmissiveColor':\n            parameters.emissiveMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'NormalMap':\n            parameters.normalMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'ReflectionColor':\n            parameters.envMap = self.getTexture(textureMap, child.ID);\n            parameters.envMap.mapping = THREE.EquirectangularReflectionMapping;\n            break;\n\n          case 'SpecularColor':\n            parameters.specularMap = self.getTexture(textureMap, child.ID);\n            break;\n\n          case 'TransparentColor':\n            parameters.alphaMap = self.getTexture(textureMap, child.ID);\n            parameters.transparent = true;\n            break;\n\n          case 'AmbientColor':\n          case 'ShininessExponent': // AKA glossiness map\n\n          case 'SpecularFactor': // AKA specularLevel\n\n          case 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\n          default:\n            console.warn('THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type);\n            break;\n        }\n      });\n      return parameters;\n    },\n    // get a texture from the textureMap for use by a material.\n    getTexture: function getTexture(textureMap, id) {\n      // if the texture is a layered texture, just use the first layer and issue a warning\n      if ('LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\n        console.warn('THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.');\n        id = connections.get(id).children[0].ID;\n      }\n\n      return textureMap.get(id);\n    },\n    // Parse nodes in FBXTree.Objects.Deformer\n    // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n    // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n    parseDeformers: function parseDeformers() {\n      var skeletons = {};\n      var morphTargets = {};\n\n      if ('Deformer' in fbxTree.Objects) {\n        var DeformerNodes = fbxTree.Objects.Deformer;\n\n        for (var nodeID in DeformerNodes) {\n          var deformerNode = DeformerNodes[nodeID];\n          var relationships = connections.get(parseInt(nodeID));\n\n          if (deformerNode.attrType === 'Skin') {\n            var skeleton = this.parseSkeleton(relationships, DeformerNodes);\n            skeleton.ID = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: skeleton attached to more than one geometry is not supported.');\n            skeleton.geometryID = relationships.parents[0].ID;\n            skeletons[nodeID] = skeleton;\n          } else if (deformerNode.attrType === 'BlendShape') {\n            var morphTarget = {\n              id: nodeID\n            };\n            morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes);\n            morphTarget.id = nodeID;\n            if (relationships.parents.length > 1) console.warn('THREE.FBXLoader: morph target attached to more than one geometry is not supported.');\n            morphTargets[nodeID] = morphTarget;\n          }\n        }\n      }\n\n      return {\n        skeletons: skeletons,\n        morphTargets: morphTargets\n      };\n    },\n    // Parse single nodes in FBXTree.Objects.Deformer\n    // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n    // Each skin node represents a skeleton and each cluster node represents a bone\n    parseSkeleton: function parseSkeleton(relationships, deformerNodes) {\n      var rawBones = [];\n      relationships.children.forEach(function (child) {\n        var boneNode = deformerNodes[child.ID];\n        if (boneNode.attrType !== 'Cluster') return;\n        var rawBone = {\n          ID: child.ID,\n          indices: [],\n          weights: [],\n          transform: new THREE.Matrix4().fromArray(boneNode.Transform.a),\n          transformLink: new THREE.Matrix4().fromArray(boneNode.TransformLink.a),\n          linkMode: boneNode.Mode\n        };\n\n        if ('Indexes' in boneNode) {\n          rawBone.indices = boneNode.Indexes.a;\n          rawBone.weights = boneNode.Weights.a;\n        }\n\n        rawBones.push(rawBone);\n      });\n      return {\n        rawBones: rawBones,\n        bones: []\n      };\n    },\n    // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n    parseMorphTargets: function parseMorphTargets(relationships, deformerNodes) {\n      var rawMorphTargets = [];\n\n      for (var i = 0; i < relationships.children.length; i++) {\n        if (i === 8) {\n          console.warn('FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.');\n          break;\n        }\n\n        var child = relationships.children[i];\n        var morphTargetNode = deformerNodes[child.ID];\n        var rawMorphTarget = {\n          name: morphTargetNode.attrName,\n          initialWeight: morphTargetNode.DeformPercent,\n          id: morphTargetNode.id,\n          fullWeights: morphTargetNode.FullWeights.a\n        };\n        if (morphTargetNode.attrType !== 'BlendShapeChannel') return;\n        var targetRelationships = connections.get(parseInt(child.ID));\n        targetRelationships.children.forEach(function (child) {\n          if (child.relationship === undefined) rawMorphTarget.geoID = child.ID;\n        });\n        rawMorphTargets.push(rawMorphTarget);\n      }\n\n      return rawMorphTargets;\n    },\n    // create the main THREE.Group() to be returned by the loader\n    parseScene: function parseScene(deformers, geometryMap, materialMap) {\n      sceneGraph = new THREE.Group();\n      var modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap);\n      var modelNodes = fbxTree.Objects.Model;\n      var self = this;\n      modelMap.forEach(function (model) {\n        var modelNode = modelNodes[model.ID];\n        self.setLookAtProperties(model, modelNode);\n        var parentConnections = connections.get(model.ID).parents;\n        parentConnections.forEach(function (connection) {\n          var parent = modelMap.get(connection.ID);\n          if (parent !== undefined) parent.add(model);\n        });\n\n        if (model.parent === null) {\n          sceneGraph.add(model);\n        }\n      });\n      this.bindSkeleton(deformers.skeletons, geometryMap, modelMap);\n      this.createAmbientLight();\n      this.setupMorphMaterials();\n      var animations = new AnimationParser().parse(); // if all the models where already combined in a single group, just return that\n\n      if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\n        sceneGraph.children[0].animations = animations;\n        sceneGraph = sceneGraph.children[0];\n      }\n\n      sceneGraph.animations = animations;\n    },\n    // parse nodes in FBXTree.Objects.Model\n    parseModels: function parseModels(skeletons, geometryMap, materialMap) {\n      var modelMap = new Map();\n      var modelNodes = fbxTree.Objects.Model;\n\n      for (var nodeID in modelNodes) {\n        var id = parseInt(nodeID);\n        var node = modelNodes[nodeID];\n        var relationships = connections.get(id);\n        var model = this.buildSkeleton(relationships, skeletons, id, node.attrName);\n\n        if (!model) {\n          switch (node.attrType) {\n            case 'Camera':\n              model = this.createCamera(relationships);\n              break;\n\n            case 'Light':\n              model = this.createLight(relationships);\n              break;\n\n            case 'Mesh':\n              model = this.createMesh(relationships, geometryMap, materialMap);\n              break;\n\n            case 'NurbsCurve':\n              model = this.createCurve(relationships, geometryMap);\n              break;\n\n            case 'LimbNode': // usually associated with a Bone, however if a Bone was not created we'll make a Group instead\n\n            case 'Null':\n            default:\n              model = new THREE.Group();\n              break;\n          }\n\n          model.name = THREE.PropertyBinding.sanitizeNodeName(node.attrName);\n          model.ID = id;\n        }\n\n        this.setModelTransforms(model, node);\n        modelMap.set(id, model);\n      }\n\n      return modelMap;\n    },\n    buildSkeleton: function buildSkeleton(relationships, skeletons, id, name) {\n      var bone = null;\n      relationships.parents.forEach(function (parent) {\n        for (var ID in skeletons) {\n          var skeleton = skeletons[ID];\n          skeleton.rawBones.forEach(function (rawBone, i) {\n            if (rawBone.ID === parent.ID) {\n              var subBone = bone;\n              bone = new THREE.Bone();\n              bone.matrixWorld.copy(rawBone.transformLink); // set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n              bone.name = THREE.PropertyBinding.sanitizeNodeName(name);\n              bone.ID = id;\n              skeleton.bones[i] = bone; // In cases where a bone is shared between multiple meshes\n              // duplicate the bone here and and it as a child of the first bone\n\n              if (subBone !== null) {\n                bone.add(subBone);\n              }\n            }\n          });\n        }\n      });\n      return bone;\n    },\n    // create a THREE.PerspectiveCamera or THREE.OrthographicCamera\n    createCamera: function createCamera(relationships) {\n      var model;\n      var cameraAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          cameraAttribute = attr;\n        }\n      });\n\n      if (cameraAttribute === undefined) {\n        model = new THREE.Object3D();\n      } else {\n        var type = 0;\n\n        if (cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1) {\n          type = 1;\n        }\n\n        var nearClippingPlane = 1;\n\n        if (cameraAttribute.NearPlane !== undefined) {\n          nearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n        }\n\n        var farClippingPlane = 1000;\n\n        if (cameraAttribute.FarPlane !== undefined) {\n          farClippingPlane = cameraAttribute.FarPlane.value / 1000;\n        }\n\n        var width = window.innerWidth;\n        var height = window.innerHeight;\n\n        if (cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined) {\n          width = cameraAttribute.AspectWidth.value;\n          height = cameraAttribute.AspectHeight.value;\n        }\n\n        var aspect = width / height;\n        var fov = 45;\n\n        if (cameraAttribute.FieldOfView !== undefined) {\n          fov = cameraAttribute.FieldOfView.value;\n        }\n\n        var focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n        switch (type) {\n          case 0:\n            // Perspective\n            model = new THREE.PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane);\n            if (focalLength !== null) model.setFocalLength(focalLength);\n            break;\n\n          case 1:\n            // Orthographic\n            model = new THREE.OrthographicCamera(-width / 2, width / 2, height / 2, -height / 2, nearClippingPlane, farClippingPlane);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown camera type ' + type + '.');\n            model = new THREE.Object3D();\n            break;\n        }\n      }\n\n      return model;\n    },\n    // Create a THREE.DirectionalLight, THREE.PointLight or THREE.SpotLight\n    createLight: function createLight(relationships) {\n      var model;\n      var lightAttribute;\n      relationships.children.forEach(function (child) {\n        var attr = fbxTree.Objects.NodeAttribute[child.ID];\n\n        if (attr !== undefined) {\n          lightAttribute = attr;\n        }\n      });\n\n      if (lightAttribute === undefined) {\n        model = new THREE.Object3D();\n      } else {\n        var type; // LightType can be undefined for Point lights\n\n        if (lightAttribute.LightType === undefined) {\n          type = 0;\n        } else {\n          type = lightAttribute.LightType.value;\n        }\n\n        var color = 0xffffff;\n\n        if (lightAttribute.Color !== undefined) {\n          color = new THREE.Color().fromArray(lightAttribute.Color.value);\n        }\n\n        var intensity = lightAttribute.Intensity === undefined ? 1 : lightAttribute.Intensity.value / 100; // light disabled\n\n        if (lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0) {\n          intensity = 0;\n        }\n\n        var distance = 0;\n\n        if (lightAttribute.FarAttenuationEnd !== undefined) {\n          if (lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0) {\n            distance = 0;\n          } else {\n            distance = lightAttribute.FarAttenuationEnd.value;\n          }\n        } // TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\n\n        var decay = 1;\n\n        switch (type) {\n          case 0:\n            // Point\n            model = new THREE.PointLight(color, intensity, distance, decay);\n            break;\n\n          case 1:\n            // Directional\n            model = new THREE.DirectionalLight(color, intensity);\n            break;\n\n          case 2:\n            // Spot\n            var angle = Math.PI / 3;\n\n            if (lightAttribute.InnerAngle !== undefined) {\n              angle = THREE.Math.degToRad(lightAttribute.InnerAngle.value);\n            }\n\n            var penumbra = 0;\n\n            if (lightAttribute.OuterAngle !== undefined) {\n              // TODO: this is not correct - FBX calculates outer and inner angle in degrees\n              // with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n              // while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n              penumbra = THREE.Math.degToRad(lightAttribute.OuterAngle.value);\n              penumbra = Math.max(penumbra, 1);\n            }\n\n            model = new THREE.SpotLight(color, intensity, distance, angle, penumbra, decay);\n            break;\n\n          default:\n            console.warn('THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a THREE.PointLight.');\n            model = new THREE.PointLight(color, intensity);\n            break;\n        }\n\n        if (lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1) {\n          model.castShadow = true;\n        }\n      }\n\n      return model;\n    },\n    createMesh: function createMesh(relationships, geometryMap, materialMap) {\n      var model;\n      var geometry = null;\n      var material = null;\n      var materials = []; // get geometry and materials(s) from connections\n\n      relationships.children.forEach(function (child) {\n        if (geometryMap.has(child.ID)) {\n          geometry = geometryMap.get(child.ID);\n        }\n\n        if (materialMap.has(child.ID)) {\n          materials.push(materialMap.get(child.ID));\n        }\n      });\n\n      if (materials.length > 1) {\n        material = materials;\n      } else if (materials.length > 0) {\n        material = materials[0];\n      } else {\n        material = new THREE.MeshPhongMaterial({\n          color: 0xcccccc\n        });\n        materials.push(material);\n      }\n\n      if ('color' in geometry.attributes) {\n        materials.forEach(function (material) {\n          material.vertexColors = THREE.VertexColors;\n        });\n      }\n\n      if (geometry.FBX_Deformer) {\n        materials.forEach(function (material) {\n          material.skinning = true;\n        });\n        model = new THREE.SkinnedMesh(geometry, material);\n      } else {\n        model = new THREE.Mesh(geometry, material);\n      }\n\n      return model;\n    },\n    createCurve: function createCurve(relationships, geometryMap) {\n      var geometry = relationships.children.reduce(function (geo, child) {\n        if (geometryMap.has(child.ID)) geo = geometryMap.get(child.ID);\n        return geo;\n      }, null); // FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\n      var material = new THREE.LineBasicMaterial({\n        color: 0x3300ff,\n        linewidth: 1\n      });\n      return new THREE.Line(geometry, material);\n    },\n    // parse the model node for transform details and apply them to the model\n    setModelTransforms: function setModelTransforms(model, modelNode) {\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = parseInt(modelNode.RotationOrder.value);\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value;\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value;\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value;\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value;\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value;\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value;\n      var transform = generateTransform(transformData);\n      model.applyMatrix(transform);\n    },\n    setLookAtProperties: function setLookAtProperties(model, modelNode) {\n      if ('LookAtProperty' in modelNode) {\n        var children = connections.get(model.ID).children;\n        children.forEach(function (child) {\n          if (child.relationship === 'LookAtProperty') {\n            var lookAtTarget = fbxTree.Objects.Model[child.ID];\n\n            if ('Lcl_Translation' in lookAtTarget) {\n              var pos = lookAtTarget.Lcl_Translation.value; // DirectionalLight, SpotLight\n\n              if (model.target !== undefined) {\n                model.target.position.fromArray(pos);\n                sceneGraph.add(model.target);\n              } else {\n                // Cameras and other Object3Ds\n                model.lookAt(new THREE.Vector3().fromArray(pos));\n              }\n            }\n          }\n        });\n      }\n    },\n    bindSkeleton: function bindSkeleton(skeletons, geometryMap, modelMap) {\n      var bindMatrices = this.parsePoseNodes();\n\n      for (var ID in skeletons) {\n        var skeleton = skeletons[ID];\n        var parents = connections.get(parseInt(skeleton.ID)).parents;\n        parents.forEach(function (parent) {\n          if (geometryMap.has(parent.ID)) {\n            var geoID = parent.ID;\n            var geoRelationships = connections.get(geoID);\n            geoRelationships.parents.forEach(function (geoConnParent) {\n              if (modelMap.has(geoConnParent.ID)) {\n                var model = modelMap.get(geoConnParent.ID);\n                model.bind(new THREE.Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID]);\n              }\n            });\n          }\n        });\n      }\n    },\n    parsePoseNodes: function parsePoseNodes() {\n      var bindMatrices = {};\n\n      if ('Pose' in fbxTree.Objects) {\n        var BindPoseNode = fbxTree.Objects.Pose;\n\n        for (var nodeID in BindPoseNode) {\n          if (BindPoseNode[nodeID].attrType === 'BindPose') {\n            var poseNodes = BindPoseNode[nodeID].PoseNode;\n\n            if (Array.isArray(poseNodes)) {\n              poseNodes.forEach(function (poseNode) {\n                bindMatrices[poseNode.Node] = new THREE.Matrix4().fromArray(poseNode.Matrix.a);\n              });\n            } else {\n              bindMatrices[poseNodes.Node] = new THREE.Matrix4().fromArray(poseNodes.Matrix.a);\n            }\n          }\n        }\n      }\n\n      return bindMatrices;\n    },\n    // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n    createAmbientLight: function createAmbientLight() {\n      if ('GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings) {\n        var ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n        var r = ambientColor[0];\n        var g = ambientColor[1];\n        var b = ambientColor[2];\n\n        if (r !== 0 || g !== 0 || b !== 0) {\n          var color = new THREE.Color(r, g, b);\n          sceneGraph.add(new THREE.AmbientLight(color, 1));\n        }\n      }\n    },\n    setupMorphMaterials: function setupMorphMaterials() {\n      sceneGraph.traverse(function (child) {\n        if (child.isMesh) {\n          if (child.geometry.morphAttributes.position || child.geometry.morphAttributes.normal) {\n            var uuid = child.uuid;\n            var matUuid = child.material.uuid; // if a geometry has morph targets, it cannot share the material with other geometries\n\n            var sharedMat = false;\n            sceneGraph.traverse(function (child) {\n              if (child.isMesh) {\n                if (child.material.uuid === matUuid && child.uuid !== uuid) sharedMat = true;\n              }\n            });\n            if (sharedMat === true) child.material = child.material.clone();\n            child.material.morphTargets = true;\n          }\n        }\n      });\n    }\n  }; // parse Geometry data from FBXTree and return map of BufferGeometries\n\n  function GeometryParser() {}\n\n  GeometryParser.prototype = {\n    constructor: GeometryParser,\n    // Parse nodes in FBXTree.Objects.Geometry\n    parse: function parse(deformers) {\n      var geometryMap = new Map();\n\n      if ('Geometry' in fbxTree.Objects) {\n        var geoNodes = fbxTree.Objects.Geometry;\n\n        for (var nodeID in geoNodes) {\n          var relationships = connections.get(parseInt(nodeID));\n          var geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers);\n          geometryMap.set(parseInt(nodeID), geo);\n        }\n      }\n\n      return geometryMap;\n    },\n    // Parse single node in FBXTree.Objects.Geometry\n    parseGeometry: function parseGeometry(relationships, geoNode, deformers) {\n      switch (geoNode.attrType) {\n        case 'Mesh':\n          return this.parseMeshGeometry(relationships, geoNode, deformers);\n          break;\n\n        case 'NurbsCurve':\n          return this.parseNurbsGeometry(geoNode);\n          break;\n      }\n    },\n    // Parse single node mesh geometry in FBXTree.Objects.Geometry\n    parseMeshGeometry: function parseMeshGeometry(relationships, geoNode, deformers) {\n      var skeletons = deformers.skeletons;\n      var morphTargets = deformers.morphTargets;\n      var modelNodes = relationships.parents.map(function (parent) {\n        return fbxTree.Objects.Model[parent.ID];\n      }); // don't create geometry if it is not associated with any models\n\n      if (modelNodes.length === 0) return;\n      var skeleton = relationships.children.reduce(function (skeleton, child) {\n        if (skeletons[child.ID] !== undefined) skeleton = skeletons[child.ID];\n        return skeleton;\n      }, null);\n      var morphTarget = relationships.children.reduce(function (morphTarget, child) {\n        if (morphTargets[child.ID] !== undefined) morphTarget = morphTargets[child.ID];\n        return morphTarget;\n      }, null); // TODO: if there is more than one model associated with the geometry, AND the models have\n      // different geometric transforms, then this will cause problems\n      // if ( modelNodes.length > 1 ) { }\n      // For now just assume one model and get the preRotations from that\n\n      var modelNode = modelNodes[0];\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = modelNode.RotationOrder.value;\n      if ('GeometricTranslation' in modelNode) transformData.translation = modelNode.GeometricTranslation.value;\n      if ('GeometricRotation' in modelNode) transformData.rotation = modelNode.GeometricRotation.value;\n      if ('GeometricScaling' in modelNode) transformData.scale = modelNode.GeometricScaling.value;\n      var transform = generateTransform(transformData);\n      return this.genGeometry(geoNode, skeleton, morphTarget, transform);\n    },\n    // Generate a THREE.BufferGeometry from a node in FBXTree.Objects.Geometry\n    genGeometry: function genGeometry(geoNode, skeleton, morphTarget, preTransform) {\n      var geo = new THREE.BufferGeometry();\n      if (geoNode.attrName) geo.name = geoNode.attrName;\n      var geoInfo = this.parseGeoNode(geoNode, skeleton);\n      var buffers = this.genBuffers(geoInfo);\n      var positionAttribute = new THREE.Float32BufferAttribute(buffers.vertex, 3);\n      preTransform.applyToBufferAttribute(positionAttribute);\n      geo.addAttribute('position', positionAttribute);\n\n      if (buffers.colors.length > 0) {\n        geo.addAttribute('color', new THREE.Float32BufferAttribute(buffers.colors, 3));\n      }\n\n      if (skeleton) {\n        geo.addAttribute('skinIndex', new THREE.Uint16BufferAttribute(buffers.weightsIndices, 4));\n        geo.addAttribute('skinWeight', new THREE.Float32BufferAttribute(buffers.vertexWeights, 4)); // used later to bind the skeleton to the model\n\n        geo.FBX_Deformer = skeleton;\n      }\n\n      if (buffers.normal.length > 0) {\n        var normalAttribute = new THREE.Float32BufferAttribute(buffers.normal, 3);\n        var normalMatrix = new THREE.Matrix3().getNormalMatrix(preTransform);\n        normalMatrix.applyToBufferAttribute(normalAttribute);\n        geo.addAttribute('normal', normalAttribute);\n      }\n\n      buffers.uvs.forEach(function (uvBuffer, i) {\n        // subsequent uv buffers are called 'uv1', 'uv2', ...\n        var name = 'uv' + (i + 1).toString(); // the first uv buffer is just called 'uv'\n\n        if (i === 0) {\n          name = 'uv';\n        }\n\n        geo.addAttribute(name, new THREE.Float32BufferAttribute(buffers.uvs[i], 2));\n      });\n\n      if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n        // Convert the material indices of each vertex into rendering groups on the geometry.\n        var prevMaterialIndex = buffers.materialIndex[0];\n        var startIndex = 0;\n        buffers.materialIndex.forEach(function (currentIndex, i) {\n          if (currentIndex !== prevMaterialIndex) {\n            geo.addGroup(startIndex, i - startIndex, prevMaterialIndex);\n            prevMaterialIndex = currentIndex;\n            startIndex = i;\n          }\n        }); // the loop above doesn't add the last group, do that here.\n\n        if (geo.groups.length > 0) {\n          var lastGroup = geo.groups[geo.groups.length - 1];\n          var lastIndex = lastGroup.start + lastGroup.count;\n\n          if (lastIndex !== buffers.materialIndex.length) {\n            geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex);\n          }\n        } // case where there are multiple materials but the whole geometry is only\n        // using one of them\n\n\n        if (geo.groups.length === 0) {\n          geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0]);\n        }\n      }\n\n      this.addMorphTargets(geo, geoNode, morphTarget, preTransform);\n      return geo;\n    },\n    parseGeoNode: function parseGeoNode(geoNode, skeleton) {\n      var geoInfo = {};\n      geoInfo.vertexPositions = geoNode.Vertices !== undefined ? geoNode.Vertices.a : [];\n      geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== undefined ? geoNode.PolygonVertexIndex.a : [];\n\n      if (geoNode.LayerElementColor) {\n        geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0]);\n      }\n\n      if (geoNode.LayerElementMaterial) {\n        geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0]);\n      }\n\n      if (geoNode.LayerElementNormal) {\n        geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0]);\n      }\n\n      if (geoNode.LayerElementUV) {\n        geoInfo.uv = [];\n        var i = 0;\n\n        while (geoNode.LayerElementUV[i]) {\n          geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]));\n          i++;\n        }\n      }\n\n      geoInfo.weightTable = {};\n\n      if (skeleton !== null) {\n        geoInfo.skeleton = skeleton;\n        skeleton.rawBones.forEach(function (rawBone, i) {\n          // loop over the bone's vertex indices and weights\n          rawBone.indices.forEach(function (index, j) {\n            if (geoInfo.weightTable[index] === undefined) geoInfo.weightTable[index] = [];\n            geoInfo.weightTable[index].push({\n              id: i,\n              weight: rawBone.weights[j]\n            });\n          });\n        });\n      }\n\n      return geoInfo;\n    },\n    genBuffers: function genBuffers(geoInfo) {\n      var buffers = {\n        vertex: [],\n        normal: [],\n        colors: [],\n        uvs: [],\n        materialIndex: [],\n        vertexWeights: [],\n        weightsIndices: []\n      };\n      var polygonIndex = 0;\n      var faceLength = 0;\n      var displayedWeightsWarning = false; // these will hold data for a single face\n\n      var facePositionIndexes = [];\n      var faceNormals = [];\n      var faceColors = [];\n      var faceUVs = [];\n      var faceWeights = [];\n      var faceWeightIndices = [];\n      var self = this;\n      geoInfo.vertexIndices.forEach(function (vertexIndex, polygonVertexIndex) {\n        var endOfFace = false; // Face index and vertex index arrays are combined in a single array\n        // A cube with quad faces looks like this:\n        // PolygonVertexIndex: *24 {\n        //  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n        //  }\n        // Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n        // to find index of last vertex bit shift the index: ^ - 1\n\n        if (vertexIndex < 0) {\n          vertexIndex = vertexIndex ^ -1; // equivalent to ( x * -1 ) - 1\n\n          endOfFace = true;\n        }\n\n        var weightIndices = [];\n        var weights = [];\n        facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2);\n\n        if (geoInfo.color) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color);\n          faceColors.push(data[0], data[1], data[2]);\n        }\n\n        if (geoInfo.skeleton) {\n          if (geoInfo.weightTable[vertexIndex] !== undefined) {\n            geoInfo.weightTable[vertexIndex].forEach(function (wt) {\n              weights.push(wt.weight);\n              weightIndices.push(wt.id);\n            });\n          }\n\n          if (weights.length > 4) {\n            if (!displayedWeightsWarning) {\n              console.warn('THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.');\n              displayedWeightsWarning = true;\n            }\n\n            var wIndex = [0, 0, 0, 0];\n            var Weight = [0, 0, 0, 0];\n            weights.forEach(function (weight, weightIndex) {\n              var currentWeight = weight;\n              var currentIndex = weightIndices[weightIndex];\n              Weight.forEach(function (comparedWeight, comparedWeightIndex, comparedWeightArray) {\n                if (currentWeight > comparedWeight) {\n                  comparedWeightArray[comparedWeightIndex] = currentWeight;\n                  currentWeight = comparedWeight;\n                  var tmp = wIndex[comparedWeightIndex];\n                  wIndex[comparedWeightIndex] = currentIndex;\n                  currentIndex = tmp;\n                }\n              });\n            });\n            weightIndices = wIndex;\n            weights = Weight;\n          } // if the weight array is shorter than 4 pad with 0s\n\n\n          while (weights.length < 4) {\n            weights.push(0);\n            weightIndices.push(0);\n          }\n\n          for (var i = 0; i < 4; ++i) {\n            faceWeights.push(weights[i]);\n            faceWeightIndices.push(weightIndices[i]);\n          }\n        }\n\n        if (geoInfo.normal) {\n          var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal);\n          faceNormals.push(data[0], data[1], data[2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          var materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0];\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, i) {\n            var data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv);\n\n            if (faceUVs[i] === undefined) {\n              faceUVs[i] = [];\n            }\n\n            faceUVs[i].push(data[0]);\n            faceUVs[i].push(data[1]);\n          });\n        }\n\n        faceLength++;\n\n        if (endOfFace) {\n          self.genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength);\n          polygonIndex++;\n          faceLength = 0; // reset arrays for the next face\n\n          facePositionIndexes = [];\n          faceNormals = [];\n          faceColors = [];\n          faceUVs = [];\n          faceWeights = [];\n          faceWeightIndices = [];\n        }\n      });\n      return buffers;\n    },\n    // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n    genFace: function genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength) {\n      for (var i = 2; i < faceLength; i++) {\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]]);\n        buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]]);\n\n        if (geoInfo.skeleton) {\n          buffers.vertexWeights.push(faceWeights[0]);\n          buffers.vertexWeights.push(faceWeights[1]);\n          buffers.vertexWeights.push(faceWeights[2]);\n          buffers.vertexWeights.push(faceWeights[3]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3]);\n          buffers.vertexWeights.push(faceWeights[i * 4]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 1]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 2]);\n          buffers.vertexWeights.push(faceWeights[i * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[0]);\n          buffers.weightsIndices.push(faceWeightIndices[1]);\n          buffers.weightsIndices.push(faceWeightIndices[2]);\n          buffers.weightsIndices.push(faceWeightIndices[3]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2]);\n          buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3]);\n        }\n\n        if (geoInfo.color) {\n          buffers.colors.push(faceColors[0]);\n          buffers.colors.push(faceColors[1]);\n          buffers.colors.push(faceColors[2]);\n          buffers.colors.push(faceColors[(i - 1) * 3]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 1]);\n          buffers.colors.push(faceColors[(i - 1) * 3 + 2]);\n          buffers.colors.push(faceColors[i * 3]);\n          buffers.colors.push(faceColors[i * 3 + 1]);\n          buffers.colors.push(faceColors[i * 3 + 2]);\n        }\n\n        if (geoInfo.material && geoInfo.material.mappingType !== 'AllSame') {\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n          buffers.materialIndex.push(materialIndex);\n        }\n\n        if (geoInfo.normal) {\n          buffers.normal.push(faceNormals[0]);\n          buffers.normal.push(faceNormals[1]);\n          buffers.normal.push(faceNormals[2]);\n          buffers.normal.push(faceNormals[(i - 1) * 3]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 1]);\n          buffers.normal.push(faceNormals[(i - 1) * 3 + 2]);\n          buffers.normal.push(faceNormals[i * 3]);\n          buffers.normal.push(faceNormals[i * 3 + 1]);\n          buffers.normal.push(faceNormals[i * 3 + 2]);\n        }\n\n        if (geoInfo.uv) {\n          geoInfo.uv.forEach(function (uv, j) {\n            if (buffers.uvs[j] === undefined) buffers.uvs[j] = [];\n            buffers.uvs[j].push(faceUVs[j][0]);\n            buffers.uvs[j].push(faceUVs[j][1]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2]);\n            buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1]);\n            buffers.uvs[j].push(faceUVs[j][i * 2]);\n            buffers.uvs[j].push(faceUVs[j][i * 2 + 1]);\n          });\n        }\n      }\n    },\n    addMorphTargets: function addMorphTargets(parentGeo, parentGeoNode, morphTarget, preTransform) {\n      if (morphTarget === null) return;\n      parentGeo.morphAttributes.position = [];\n      parentGeo.morphAttributes.normal = [];\n      var self = this;\n      morphTarget.rawTargets.forEach(function (rawTarget) {\n        var morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID];\n\n        if (morphGeoNode !== undefined) {\n          self.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform);\n        }\n      });\n    },\n    // a morph geometry node is similar to a standard  node, and the node is also contained\n    // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n    // and a special attribute Index defining which vertices of the original geometry are affected\n    // Normal and position attributes only have data for the vertices that are affected by the morph\n    genMorphGeometry: function genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform) {\n      var morphGeo = new THREE.BufferGeometry();\n      if (morphGeoNode.attrName) morphGeo.name = morphGeoNode.attrName;\n      var vertexIndices = parentGeoNode.PolygonVertexIndex !== undefined ? parentGeoNode.PolygonVertexIndex.a : []; // make a copy of the parent's vertex positions\n\n      var vertexPositions = parentGeoNode.Vertices !== undefined ? parentGeoNode.Vertices.a.slice() : [];\n      var morphPositions = morphGeoNode.Vertices !== undefined ? morphGeoNode.Vertices.a : [];\n      var indices = morphGeoNode.Indexes !== undefined ? morphGeoNode.Indexes.a : [];\n\n      for (var i = 0; i < indices.length; i++) {\n        var morphIndex = indices[i] * 3; // FBX format uses blend shapes rather than morph targets. This can be converted\n        // by additively combining the blend shape positions with the original geometry's positions\n\n        vertexPositions[morphIndex] += morphPositions[i * 3];\n        vertexPositions[morphIndex + 1] += morphPositions[i * 3 + 1];\n        vertexPositions[morphIndex + 2] += morphPositions[i * 3 + 2];\n      } // TODO: add morph normal support\n\n\n      var morphGeoInfo = {\n        vertexIndices: vertexIndices,\n        vertexPositions: vertexPositions\n      };\n      var morphBuffers = this.genBuffers(morphGeoInfo);\n      var positionAttribute = new THREE.Float32BufferAttribute(morphBuffers.vertex, 3);\n      positionAttribute.name = morphGeoNode.attrName;\n      preTransform.applyToBufferAttribute(positionAttribute);\n      parentGeo.morphAttributes.position.push(positionAttribute);\n    },\n    // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n    parseNormals: function parseNormals(NormalNode) {\n      var mappingType = NormalNode.MappingInformationType;\n      var referenceType = NormalNode.ReferenceInformationType;\n      var buffer = NormalNode.Normals.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        if ('NormalIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalIndex.a;\n        } else if ('NormalsIndex' in NormalNode) {\n          indexBuffer = NormalNode.NormalsIndex.a;\n        }\n      }\n\n      return {\n        dataSize: 3,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n    parseUVs: function parseUVs(UVNode) {\n      var mappingType = UVNode.MappingInformationType;\n      var referenceType = UVNode.ReferenceInformationType;\n      var buffer = UVNode.UV.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = UVNode.UVIndex.a;\n      }\n\n      return {\n        dataSize: 2,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n    parseVertexColors: function parseVertexColors(ColorNode) {\n      var mappingType = ColorNode.MappingInformationType;\n      var referenceType = ColorNode.ReferenceInformationType;\n      var buffer = ColorNode.Colors.a;\n      var indexBuffer = [];\n\n      if (referenceType === 'IndexToDirect') {\n        indexBuffer = ColorNode.ColorIndex.a;\n      }\n\n      return {\n        dataSize: 4,\n        buffer: buffer,\n        indices: indexBuffer,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n    parseMaterialIndices: function parseMaterialIndices(MaterialNode) {\n      var mappingType = MaterialNode.MappingInformationType;\n      var referenceType = MaterialNode.ReferenceInformationType;\n\n      if (mappingType === 'NoMappingInformation') {\n        return {\n          dataSize: 1,\n          buffer: [0],\n          indices: [0],\n          mappingType: 'AllSame',\n          referenceType: referenceType\n        };\n      }\n\n      var materialIndexBuffer = MaterialNode.Materials.a; // Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n      // we expect.So we create an intermediate buffer that points to the index in the buffer,\n      // for conforming with the other functions we've written for other data.\n\n      var materialIndices = [];\n\n      for (var i = 0; i < materialIndexBuffer.length; ++i) {\n        materialIndices.push(i);\n      }\n\n      return {\n        dataSize: 1,\n        buffer: materialIndexBuffer,\n        indices: materialIndices,\n        mappingType: mappingType,\n        referenceType: referenceType\n      };\n    },\n    // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n    parseNurbsGeometry: function parseNurbsGeometry(geoNode) {\n      if (THREE.NURBSCurve === undefined) {\n        console.error('THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.');\n        return new THREE.BufferGeometry();\n      }\n\n      var order = parseInt(geoNode.Order);\n\n      if (isNaN(order)) {\n        console.error('THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id);\n        return new THREE.BufferGeometry();\n      }\n\n      var degree = order - 1;\n      var knots = geoNode.KnotVector.a;\n      var controlPoints = [];\n      var pointsValues = geoNode.Points.a;\n\n      for (var i = 0, l = pointsValues.length; i < l; i += 4) {\n        controlPoints.push(new THREE.Vector4().fromArray(pointsValues, i));\n      }\n\n      var startKnot, endKnot;\n\n      if (geoNode.Form === 'Closed') {\n        controlPoints.push(controlPoints[0]);\n      } else if (geoNode.Form === 'Periodic') {\n        startKnot = degree;\n        endKnot = knots.length - 1 - startKnot;\n\n        for (var i = 0; i < degree; ++i) {\n          controlPoints.push(controlPoints[i]);\n        }\n      }\n\n      var curve = new THREE.NURBSCurve(degree, knots, controlPoints, startKnot, endKnot);\n      var vertices = curve.getPoints(controlPoints.length * 7);\n      var positions = new Float32Array(vertices.length * 3);\n      vertices.forEach(function (vertex, i) {\n        vertex.toArray(positions, i * 3);\n      });\n      var geometry = new THREE.BufferGeometry();\n      geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n      return geometry;\n    }\n  }; // parse animation data from FBXTree\n\n  function AnimationParser() {}\n\n  AnimationParser.prototype = {\n    constructor: AnimationParser,\n    // take raw animation clips and turn them into three.js animation clips\n    parse: function parse() {\n      var animationClips = [];\n      var rawClips = this.parseClips();\n      if (rawClips === undefined) return animationClips;\n\n      for (var key in rawClips) {\n        var rawClip = rawClips[key];\n        var clip = this.addClip(rawClip);\n        animationClips.push(clip);\n      }\n\n      return animationClips;\n    },\n    parseClips: function parseClips() {\n      // since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n      // if this is undefined we can safely assume there are no animations\n      if (fbxTree.Objects.AnimationCurve === undefined) return undefined;\n      var curveNodesMap = this.parseAnimationCurveNodes();\n      this.parseAnimationCurves(curveNodesMap);\n      var layersMap = this.parseAnimationLayers(curveNodesMap);\n      var rawClips = this.parseAnimStacks(layersMap);\n      return rawClips;\n    },\n    // parse nodes in FBXTree.Objects.AnimationCurveNode\n    // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n    // and is referenced by an AnimationLayer\n    parseAnimationCurveNodes: function parseAnimationCurveNodes() {\n      var rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n      var curveNodesMap = new Map();\n\n      for (var nodeID in rawCurveNodes) {\n        var rawCurveNode = rawCurveNodes[nodeID];\n\n        if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\n          var curveNode = {\n            id: rawCurveNode.id,\n            attr: rawCurveNode.attrName,\n            curves: {}\n          };\n          curveNodesMap.set(curveNode.id, curveNode);\n        }\n      }\n\n      return curveNodesMap;\n    },\n    // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n    // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n    // axis ( e.g. times and values of x rotation)\n    parseAnimationCurves: function parseAnimationCurves(curveNodesMap) {\n      var rawCurves = fbxTree.Objects.AnimationCurve; // TODO: Many values are identical up to roundoff error, but won't be optimised\n      // e.g. position times: [0, 0.4, 0. 8]\n      // position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n      // clearly, this should be optimised to\n      // times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n      // this shows up in nearly every FBX file, and generally time array is length > 100\n\n      for (var nodeID in rawCurves) {\n        var animationCurve = {\n          id: rawCurves[nodeID].id,\n          times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\n          values: rawCurves[nodeID].KeyValueFloat.a\n        };\n        var relationships = connections.get(animationCurve.id);\n\n        if (relationships !== undefined) {\n          var animationCurveID = relationships.parents[0].ID;\n          var animationCurveRelationship = relationships.parents[0].relationship;\n\n          if (animationCurveRelationship.match(/X/)) {\n            curveNodesMap.get(animationCurveID).curves['x'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Y/)) {\n            curveNodesMap.get(animationCurveID).curves['y'] = animationCurve;\n          } else if (animationCurveRelationship.match(/Z/)) {\n            curveNodesMap.get(animationCurveID).curves['z'] = animationCurve;\n          } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\n            curveNodesMap.get(animationCurveID).curves['morph'] = animationCurve;\n          }\n        }\n      }\n    },\n    // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n    // to various AnimationCurveNodes and is referenced by an AnimationStack node\n    // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n    parseAnimationLayers: function parseAnimationLayers(curveNodesMap) {\n      var rawLayers = fbxTree.Objects.AnimationLayer;\n      var layersMap = new Map();\n\n      for (var nodeID in rawLayers) {\n        var layerCurveNodes = [];\n        var connection = connections.get(parseInt(nodeID));\n\n        if (connection !== undefined) {\n          // all the animationCurveNodes used in the layer\n          var children = connection.children;\n          var self = this;\n          children.forEach(function (child, i) {\n            if (curveNodesMap.has(child.ID)) {\n              var curveNode = curveNodesMap.get(child.ID); // check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\n              if (curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var modelID;\n                  connections.get(child.ID).parents.forEach(function (parent) {\n                    if (parent.relationship !== undefined) modelID = parent.ID;\n                  });\n                  var rawModel = fbxTree.Objects.Model[modelID.toString()];\n                  var node = {\n                    modelName: THREE.PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                    initialPosition: [0, 0, 0],\n                    initialRotation: [0, 0, 0],\n                    initialScale: [1, 1, 1],\n                    transform: self.getModelAnimTransform(rawModel)\n                  }; // if the animated model is pre rotated, we'll have to apply the pre rotations to every\n                  // animation value as well\n\n                  if ('PreRotation' in rawModel) node.preRotations = rawModel.PreRotation.value;\n                  if ('PostRotation' in rawModel) node.postRotations = rawModel.PostRotation.value;\n                  layerCurveNodes[i] = node;\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode;\n              } else if (curveNode.curves.morph !== undefined) {\n                if (layerCurveNodes[i] === undefined) {\n                  var deformerID;\n                  connections.get(child.ID).parents.forEach(function (parent) {\n                    if (parent.relationship !== undefined) deformerID = parent.ID;\n                  });\n                  var morpherID = connections.get(deformerID).parents[0].ID;\n                  var geoID = connections.get(morpherID).parents[0].ID; // assuming geometry is not used in more than one model\n\n                  var modelID = connections.get(geoID).parents[0].ID;\n                  var rawModel = fbxTree.Objects.Model[modelID];\n                  var node = {\n                    modelName: THREE.PropertyBinding.sanitizeNodeName(rawModel.attrName),\n                    morphName: fbxTree.Objects.Deformer[deformerID].attrName\n                  };\n                  layerCurveNodes[i] = node;\n                }\n\n                layerCurveNodes[i][curveNode.attr] = curveNode;\n              }\n            }\n          });\n          layersMap.set(parseInt(nodeID), layerCurveNodes);\n        }\n      }\n\n      return layersMap;\n    },\n    getModelAnimTransform: function getModelAnimTransform(modelNode) {\n      var transformData = {};\n      if ('RotationOrder' in modelNode) transformData.eulerOrder = parseInt(modelNode.RotationOrder.value);\n      if ('Lcl_Translation' in modelNode) transformData.translation = modelNode.Lcl_Translation.value;\n      if ('RotationOffset' in modelNode) transformData.rotationOffset = modelNode.RotationOffset.value;\n      if ('Lcl_Rotation' in modelNode) transformData.rotation = modelNode.Lcl_Rotation.value;\n      if ('PreRotation' in modelNode) transformData.preRotation = modelNode.PreRotation.value;\n      if ('PostRotation' in modelNode) transformData.postRotation = modelNode.PostRotation.value;\n      if ('Lcl_Scaling' in modelNode) transformData.scale = modelNode.Lcl_Scaling.value;\n      return generateTransform(transformData);\n    },\n    // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n    // hierarchy. Each Stack node will be used to create a THREE.AnimationClip\n    parseAnimStacks: function parseAnimStacks(layersMap) {\n      var rawStacks = fbxTree.Objects.AnimationStack; // connect the stacks (clips) up to the layers\n\n      var rawClips = {};\n\n      for (var nodeID in rawStacks) {\n        var children = connections.get(parseInt(nodeID)).children;\n\n        if (children.length > 1) {\n          // it seems like stacks will always be associated with a single layer. But just in case there are files\n          // where there are multiple layers per stack, we'll display a warning\n          console.warn('THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.');\n        }\n\n        var layer = layersMap.get(children[0].ID);\n        rawClips[nodeID] = {\n          name: rawStacks[nodeID].attrName,\n          layer: layer\n        };\n      }\n\n      return rawClips;\n    },\n    addClip: function addClip(rawClip) {\n      var tracks = [];\n      var self = this;\n      rawClip.layer.forEach(function (rawTracks) {\n        tracks = tracks.concat(self.generateTracks(rawTracks));\n      });\n      return new THREE.AnimationClip(rawClip.name, -1, tracks);\n    },\n    generateTracks: function generateTracks(rawTracks) {\n      var tracks = [];\n      var initialPosition = new THREE.Vector3();\n      var initialRotation = new THREE.Quaternion();\n      var initialScale = new THREE.Vector3();\n      if (rawTracks.transform) rawTracks.transform.decompose(initialPosition, initialRotation, initialScale);\n      initialPosition = initialPosition.toArray();\n      initialRotation = new THREE.Euler().setFromQuaternion(initialRotation).toArray(); // todo: euler order\n\n      initialScale = initialScale.toArray();\n\n      if (rawTracks.T !== undefined && Object.keys(rawTracks.T.curves).length > 0) {\n        var positionTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position');\n        if (positionTrack !== undefined) tracks.push(positionTrack);\n      }\n\n      if (rawTracks.R !== undefined && Object.keys(rawTracks.R.curves).length > 0) {\n        var rotationTrack = this.generateRotationTrack(rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotations, rawTracks.postRotations);\n        if (rotationTrack !== undefined) tracks.push(rotationTrack);\n      }\n\n      if (rawTracks.S !== undefined && Object.keys(rawTracks.S.curves).length > 0) {\n        var scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale');\n        if (scaleTrack !== undefined) tracks.push(scaleTrack);\n      }\n\n      if (rawTracks.DeformPercent !== undefined) {\n        var morphTrack = this.generateMorphTrack(rawTracks);\n        if (morphTrack !== undefined) tracks.push(morphTrack);\n      }\n\n      return tracks;\n    },\n    generateVectorTrack: function generateVectorTrack(modelName, curves, initialValue, type) {\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n      return new THREE.VectorKeyframeTrack(modelName + '.' + type, times, values);\n    },\n    generateRotationTrack: function generateRotationTrack(modelName, curves, initialValue, preRotations, postRotations) {\n      if (curves.x !== undefined) {\n        this.interpolateRotations(curves.x);\n        curves.x.values = curves.x.values.map(THREE.Math.degToRad);\n      }\n\n      if (curves.y !== undefined) {\n        this.interpolateRotations(curves.y);\n        curves.y.values = curves.y.values.map(THREE.Math.degToRad);\n      }\n\n      if (curves.z !== undefined) {\n        this.interpolateRotations(curves.z);\n        curves.z.values = curves.z.values.map(THREE.Math.degToRad);\n      }\n\n      var times = this.getTimesForAllAxes(curves);\n      var values = this.getKeyframeTrackValues(times, curves, initialValue);\n\n      if (preRotations !== undefined) {\n        preRotations = preRotations.map(THREE.Math.degToRad);\n        preRotations.push('ZYX');\n        preRotations = new THREE.Euler().fromArray(preRotations);\n        preRotations = new THREE.Quaternion().setFromEuler(preRotations);\n      }\n\n      if (postRotations !== undefined) {\n        postRotations = postRotations.map(THREE.Math.degToRad);\n        postRotations.push('ZYX');\n        postRotations = new THREE.Euler().fromArray(postRotations);\n        postRotations = new THREE.Quaternion().setFromEuler(postRotations).inverse();\n      }\n\n      var quaternion = new THREE.Quaternion();\n      var euler = new THREE.Euler();\n      var quaternionValues = [];\n\n      for (var i = 0; i < values.length; i += 3) {\n        euler.set(values[i], values[i + 1], values[i + 2], 'ZYX');\n        quaternion.setFromEuler(euler);\n        if (preRotations !== undefined) quaternion.premultiply(preRotations);\n        if (postRotations !== undefined) quaternion.multiply(postRotations);\n        quaternion.toArray(quaternionValues, i / 3 * 4);\n      }\n\n      return new THREE.QuaternionKeyframeTrack(modelName + '.quaternion', times, quaternionValues);\n    },\n    generateMorphTrack: function generateMorphTrack(rawTracks) {\n      var curves = rawTracks.DeformPercent.curves.morph;\n      var values = curves.values.map(function (val) {\n        return val / 100;\n      });\n      var morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName];\n      return new THREE.NumberKeyframeTrack(rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values);\n    },\n    // For all animated objects, times are defined separately for each axis\n    // Here we'll combine the times into one sorted array without duplicates\n    getTimesForAllAxes: function getTimesForAllAxes(curves) {\n      var times = []; // first join together the times for each axis, if defined\n\n      if (curves.x !== undefined) times = times.concat(curves.x.times);\n      if (curves.y !== undefined) times = times.concat(curves.y.times);\n      if (curves.z !== undefined) times = times.concat(curves.z.times); // then sort them and remove duplicates\n\n      times = times.sort(function (a, b) {\n        return a - b;\n      }).filter(function (elem, index, array) {\n        return array.indexOf(elem) == index;\n      });\n      return times;\n    },\n    getKeyframeTrackValues: function getKeyframeTrackValues(times, curves, initialValue) {\n      var prevValue = initialValue;\n      var values = [];\n      var xIndex = -1;\n      var yIndex = -1;\n      var zIndex = -1;\n      times.forEach(function (time) {\n        if (curves.x) xIndex = curves.x.times.indexOf(time);\n        if (curves.y) yIndex = curves.y.times.indexOf(time);\n        if (curves.z) zIndex = curves.z.times.indexOf(time); // if there is an x value defined for this frame, use that\n\n        if (xIndex !== -1) {\n          var xValue = curves.x.values[xIndex];\n          values.push(xValue);\n          prevValue[0] = xValue;\n        } else {\n          // otherwise use the x value from the previous frame\n          values.push(prevValue[0]);\n        }\n\n        if (yIndex !== -1) {\n          var yValue = curves.y.values[yIndex];\n          values.push(yValue);\n          prevValue[1] = yValue;\n        } else {\n          values.push(prevValue[1]);\n        }\n\n        if (zIndex !== -1) {\n          var zValue = curves.z.values[zIndex];\n          values.push(zValue);\n          prevValue[2] = zValue;\n        } else {\n          values.push(prevValue[2]);\n        }\n      });\n      return values;\n    },\n    // Rotations are defined as Euler angles which can have values  of any size\n    // These will be converted to quaternions which don't support values greater than\n    // PI, so we'll interpolate large rotations\n    interpolateRotations: function interpolateRotations(curve) {\n      for (var i = 1; i < curve.values.length; i++) {\n        var initialValue = curve.values[i - 1];\n        var valuesSpan = curve.values[i] - initialValue;\n        var absoluteSpan = Math.abs(valuesSpan);\n\n        if (absoluteSpan >= 180) {\n          var numSubIntervals = absoluteSpan / 180;\n          var step = valuesSpan / numSubIntervals;\n          var nextValue = initialValue + step;\n          var initialTime = curve.times[i - 1];\n          var timeSpan = curve.times[i] - initialTime;\n          var interval = timeSpan / numSubIntervals;\n          var nextTime = initialTime + interval;\n          var interpolatedTimes = [];\n          var interpolatedValues = [];\n\n          while (nextTime < curve.times[i]) {\n            interpolatedTimes.push(nextTime);\n            nextTime += interval;\n            interpolatedValues.push(nextValue);\n            nextValue += step;\n          }\n\n          curve.times = inject(curve.times, i, interpolatedTimes);\n          curve.values = inject(curve.values, i, interpolatedValues);\n        }\n      }\n    }\n  }; // parse an FBX file in ASCII format\n\n  function TextParser() {}\n\n  TextParser.prototype = {\n    constructor: TextParser,\n    getPrevNode: function getPrevNode() {\n      return this.nodeStack[this.currentIndent - 2];\n    },\n    getCurrentNode: function getCurrentNode() {\n      return this.nodeStack[this.currentIndent - 1];\n    },\n    getCurrentProp: function getCurrentProp() {\n      return this.currentProp;\n    },\n    pushStack: function pushStack(node) {\n      this.nodeStack.push(node);\n      this.currentIndent += 1;\n    },\n    popStack: function popStack() {\n      this.nodeStack.pop();\n      this.currentIndent -= 1;\n    },\n    setCurrentProp: function setCurrentProp(val, name) {\n      this.currentProp = val;\n      this.currentPropName = name;\n    },\n    parse: function parse(text) {\n      this.currentIndent = 0;\n      console.log(\"FBXTree: \", FBXTree);\n      this.allNodes = new FBXTree();\n      this.nodeStack = [];\n      this.currentProp = [];\n      this.currentPropName = '';\n      var self = this;\n      var split = text.split(/[\\r\\n]+/);\n      split.forEach(function (line, i) {\n        var matchComment = line.match(/^[\\s\\t]*;/);\n        var matchEmpty = line.match(/^[\\s\\t]*$/);\n        if (matchComment || matchEmpty) return;\n        var matchBeginning = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):(.*){', '');\n        var matchProperty = line.match('^\\\\t{' + self.currentIndent + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)');\n        var matchEnd = line.match('^\\\\t{' + (self.currentIndent - 1) + '}}');\n\n        if (matchBeginning) {\n          self.parseNodeBegin(line, matchBeginning);\n        } else if (matchProperty) {\n          self.parseNodeProperty(line, matchProperty, split[++i]);\n        } else if (matchEnd) {\n          self.popStack();\n        } else if (line.match(/^[^\\s\\t}]/)) {\n          // large arrays are split over multiple lines terminated with a ',' character\n          // if this is encountered the line needs to be joined to the previous line\n          self.parseNodePropertyContinued(line);\n        }\n      });\n      return this.allNodes;\n    },\n    parseNodeBegin: function parseNodeBegin(line, property) {\n      var nodeName = property[1].trim().replace(/^\"/, '').replace(/\"$/, '');\n      var nodeAttrs = property[2].split(',').map(function (attr) {\n        return attr.trim().replace(/^\"/, '').replace(/\"$/, '');\n      });\n      var node = {\n        name: nodeName\n      };\n      var attrs = this.parseNodeAttr(nodeAttrs);\n      var currentNode = this.getCurrentNode(); // a top node\n\n      if (this.currentIndent === 0) {\n        this.allNodes.add(nodeName, node);\n      } else {\n        // a subnode\n        // if the subnode already exists, append it\n        if (nodeName in currentNode) {\n          // special case Pose needs PoseNodes as an array\n          if (nodeName === 'PoseNode') {\n            currentNode.PoseNode.push(node);\n          } else if (currentNode[nodeName].id !== undefined) {\n            currentNode[nodeName] = {};\n            currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName];\n          }\n\n          if (attrs.id !== '') currentNode[nodeName][attrs.id] = node;\n        } else if (typeof attrs.id === 'number') {\n          currentNode[nodeName] = {};\n          currentNode[nodeName][attrs.id] = node;\n        } else if (nodeName !== 'Properties70') {\n          if (nodeName === 'PoseNode') currentNode[nodeName] = [node];else currentNode[nodeName] = node;\n        }\n      }\n\n      if (typeof attrs.id === 'number') node.id = attrs.id;\n      if (attrs.name !== '') node.attrName = attrs.name;\n      if (attrs.type !== '') node.attrType = attrs.type;\n      this.pushStack(node);\n    },\n    parseNodeAttr: function parseNodeAttr(attrs) {\n      var id = attrs[0];\n\n      if (attrs[0] !== '') {\n        id = parseInt(attrs[0]);\n\n        if (isNaN(id)) {\n          id = attrs[0];\n        }\n      }\n\n      var name = '',\n          type = '';\n\n      if (attrs.length > 1) {\n        name = attrs[1].replace(/^(\\w+)::/, '');\n        type = attrs[2];\n      }\n\n      return {\n        id: id,\n        name: name,\n        type: type\n      };\n    },\n    parseNodeProperty: function parseNodeProperty(line, property, contentLine) {\n      var propName = property[1].replace(/^\"/, '').replace(/\"$/, '').trim();\n      var propValue = property[2].replace(/^\"/, '').replace(/\"$/, '').trim(); // for special case: base64 image data follows \"Content: ,\" line\n      //\tContent: ,\n      //\t \"/9j/4RDaRXhpZgAATU0A...\"\n\n      if (propName === 'Content' && propValue === ',') {\n        propValue = contentLine.replace(/\"/g, '').replace(/,$/, '').trim();\n      }\n\n      var currentNode = this.getCurrentNode();\n      var parentName = currentNode.name;\n\n      if (parentName === 'Properties70') {\n        this.parseNodeSpecialProperty(line, propName, propValue);\n        return;\n      } // Connections\n\n\n      if (propName === 'C') {\n        var connProps = propValue.split(',').slice(1);\n        var from = parseInt(connProps[0]);\n        var to = parseInt(connProps[1]);\n        var rest = propValue.split(',').slice(3);\n        rest = rest.map(function (elem) {\n          return elem.trim().replace(/^\"/, '');\n        });\n        propName = 'connections';\n        propValue = [from, to];\n        append(propValue, rest);\n\n        if (currentNode[propName] === undefined) {\n          currentNode[propName] = [];\n        }\n      } // Node\n\n\n      if (propName === 'Node') currentNode.id = propValue; // connections\n\n      if (propName in currentNode && Array.isArray(currentNode[propName])) {\n        currentNode[propName].push(propValue);\n      } else {\n        if (propName !== 'a') currentNode[propName] = propValue;else currentNode.a = propValue;\n      }\n\n      this.setCurrentProp(currentNode, propName); // convert string to array, unless it ends in ',' in which case more will be added to it\n\n      if (propName === 'a' && propValue.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(propValue);\n      }\n    },\n    parseNodePropertyContinued: function parseNodePropertyContinued(line) {\n      var currentNode = this.getCurrentNode();\n      currentNode.a += line; // if the line doesn't end in ',' we have reached the end of the property value\n      // so convert the string to an array\n\n      if (line.slice(-1) !== ',') {\n        currentNode.a = parseNumberArray(currentNode.a);\n      }\n    },\n    // parse \"Property70\"\n    parseNodeSpecialProperty: function parseNodeSpecialProperty(line, propName, propValue) {\n      // split this\n      // P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n      // into array like below\n      // [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n      var props = propValue.split('\",').map(function (prop) {\n        return prop.trim().replace(/^\\\"/, '').replace(/\\s/, '_');\n      });\n      var innerPropName = props[0];\n      var innerPropType1 = props[1];\n      var innerPropType2 = props[2];\n      var innerPropFlag = props[3];\n      var innerPropValue = props[4]; // cast values where needed, otherwise leave as strings\n\n      switch (innerPropType1) {\n        case 'int':\n        case 'enum':\n        case 'bool':\n        case 'ULongLong':\n        case 'double':\n        case 'Number':\n        case 'FieldOfView':\n          innerPropValue = parseFloat(innerPropValue);\n          break;\n\n        case 'Color':\n        case 'ColorRGB':\n        case 'Vector3D':\n        case 'Lcl_Translation':\n        case 'Lcl_Rotation':\n        case 'Lcl_Scaling':\n          innerPropValue = parseNumberArray(innerPropValue);\n          break;\n      } // CAUTION: these props must append to parent's parent\n\n\n      this.getPrevNode()[innerPropName] = {\n        'type': innerPropType1,\n        'type2': innerPropType2,\n        'flag': innerPropFlag,\n        'value': innerPropValue\n      };\n      this.setCurrentProp(this.getPrevNode(), innerPropName);\n    }\n  }; // Parse an FBX file in Binary format\n\n  function BinaryParser() {}\n\n  BinaryParser.prototype = {\n    constructor: BinaryParser,\n    parse: function parse(buffer) {\n      var reader = new BinaryReader(buffer);\n      reader.skip(23); // skip magic 23 bytes\n\n      var version = reader.getUint32();\n      console.log('THREE.FBXLoader: FBX binary version: ' + version);\n      var allNodes = new FBXTree();\n\n      while (!this.endOfContent(reader)) {\n        var node = this.parseNode(reader, version);\n        if (node !== null) allNodes.add(node.name, node);\n      }\n\n      return allNodes;\n    },\n    // Check if reader has reached the end of content.\n    endOfContent: function endOfContent(reader) {\n      // footer size: 160bytes + 16-byte alignment padding\n      // - 16bytes: magic\n      // - padding til 16-byte alignment (at least 1byte?)\n      //\t(seems like some exporters embed fixed 15 or 16bytes?)\n      // - 4bytes: magic\n      // - 4bytes: version\n      // - 120bytes: zero\n      // - 16bytes: magic\n      if (reader.size() % 16 === 0) {\n        return (reader.getOffset() + 160 + 16 & ~0xf) >= reader.size();\n      } else {\n        return reader.getOffset() + 160 + 16 >= reader.size();\n      }\n    },\n    // recursively parse nodes until the end of the file is reached\n    parseNode: function parseNode(reader, version) {\n      var node = {}; // The first three data sizes depends on version.\n\n      var endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      var numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32(); // note: do not remove this even if you get a linter warning as it moves the buffer forward\n\n      var propertyListLen = version >= 7500 ? reader.getUint64() : reader.getUint32();\n      var nameLen = reader.getUint8();\n      var name = reader.getString(nameLen); // Regards this node as NULL-record if endOffset is zero\n\n      if (endOffset === 0) return null;\n      var propertyList = [];\n\n      for (var i = 0; i < numProperties; i++) {\n        propertyList.push(this.parseProperty(reader));\n      } // Regards the first three elements in propertyList as id, attrName, and attrType\n\n\n      var id = propertyList.length > 0 ? propertyList[0] : '';\n      var attrName = propertyList.length > 1 ? propertyList[1] : '';\n      var attrType = propertyList.length > 2 ? propertyList[2] : ''; // check if this node represents just a single property\n      // like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\n      node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false;\n\n      while (endOffset > reader.getOffset()) {\n        var subNode = this.parseNode(reader, version);\n        if (subNode !== null) this.parseSubNode(name, node, subNode);\n      }\n\n      node.propertyList = propertyList; // raw property list used by parent\n\n      if (typeof id === 'number') node.id = id;\n      if (attrName !== '') node.attrName = attrName;\n      if (attrType !== '') node.attrType = attrType;\n      if (name !== '') node.name = name;\n      return node;\n    },\n    parseSubNode: function parseSubNode(name, node, subNode) {\n      // special case: child node is single property\n      if (subNode.singleProperty === true) {\n        var value = subNode.propertyList[0];\n\n        if (Array.isArray(value)) {\n          node[subNode.name] = subNode;\n          subNode.a = value;\n        } else {\n          node[subNode.name] = value;\n        }\n      } else if (name === 'Connections' && subNode.name === 'C') {\n        var array = [];\n        subNode.propertyList.forEach(function (property, i) {\n          // first Connection is FBX type (OO, OP, etc.). We'll discard these\n          if (i !== 0) array.push(property);\n        });\n\n        if (node.connections === undefined) {\n          node.connections = [];\n        }\n\n        node.connections.push(array);\n      } else if (subNode.name === 'Properties70') {\n        var keys = Object.keys(subNode);\n        keys.forEach(function (key) {\n          node[key] = subNode[key];\n        });\n      } else if (name === 'Properties70' && subNode.name === 'P') {\n        var innerPropName = subNode.propertyList[0];\n        var innerPropType1 = subNode.propertyList[1];\n        var innerPropType2 = subNode.propertyList[2];\n        var innerPropFlag = subNode.propertyList[3];\n        var innerPropValue;\n        if (innerPropName.indexOf('Lcl ') === 0) innerPropName = innerPropName.replace('Lcl ', 'Lcl_');\n        if (innerPropType1.indexOf('Lcl ') === 0) innerPropType1 = innerPropType1.replace('Lcl ', 'Lcl_');\n\n        if (innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf('Lcl_') === 0) {\n          innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]];\n        } else {\n          innerPropValue = subNode.propertyList[4];\n        } // this will be copied to parent, see above\n\n\n        node[innerPropName] = {\n          'type': innerPropType1,\n          'type2': innerPropType2,\n          'flag': innerPropFlag,\n          'value': innerPropValue\n        };\n      } else if (node[subNode.name] === undefined) {\n        if (typeof subNode.id === 'number') {\n          node[subNode.name] = {};\n          node[subNode.name][subNode.id] = subNode;\n        } else {\n          node[subNode.name] = subNode;\n        }\n      } else {\n        if (subNode.name === 'PoseNode') {\n          if (!Array.isArray(node[subNode.name])) {\n            node[subNode.name] = [node[subNode.name]];\n          }\n\n          node[subNode.name].push(subNode);\n        } else if (node[subNode.name][subNode.id] === undefined) {\n          node[subNode.name][subNode.id] = subNode;\n        }\n      }\n    },\n    parseProperty: function parseProperty(reader) {\n      var type = reader.getString(1);\n\n      switch (type) {\n        case 'C':\n          return reader.getBoolean();\n\n        case 'D':\n          return reader.getFloat64();\n\n        case 'F':\n          return reader.getFloat32();\n\n        case 'I':\n          return reader.getInt32();\n\n        case 'L':\n          return reader.getInt64();\n\n        case 'R':\n          var length = reader.getUint32();\n          return reader.getArrayBuffer(length);\n\n        case 'S':\n          var length = reader.getUint32();\n          return reader.getString(length);\n\n        case 'Y':\n          return reader.getInt16();\n\n        case 'b':\n        case 'c':\n        case 'd':\n        case 'f':\n        case 'i':\n        case 'l':\n          var arrayLength = reader.getUint32();\n          var encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\n          var compressedLength = reader.getUint32();\n\n          if (encoding === 0) {\n            switch (type) {\n              case 'b':\n              case 'c':\n                return reader.getBooleanArray(arrayLength);\n\n              case 'd':\n                return reader.getFloat64Array(arrayLength);\n\n              case 'f':\n                return reader.getFloat32Array(arrayLength);\n\n              case 'i':\n                return reader.getInt32Array(arrayLength);\n\n              case 'l':\n                return reader.getInt64Array(arrayLength);\n            }\n          }\n\n          if (typeof Zlib === 'undefined') {\n            console.error('THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js');\n          }\n\n          var inflate = new Zlib.Inflate(new Uint8Array(reader.getArrayBuffer(compressedLength))); // eslint-disable-line no-undef\n\n          var reader2 = new BinaryReader(inflate.decompress().buffer);\n\n          switch (type) {\n            case 'b':\n            case 'c':\n              return reader2.getBooleanArray(arrayLength);\n\n            case 'd':\n              return reader2.getFloat64Array(arrayLength);\n\n            case 'f':\n              return reader2.getFloat32Array(arrayLength);\n\n            case 'i':\n              return reader2.getInt32Array(arrayLength);\n\n            case 'l':\n              return reader2.getInt64Array(arrayLength);\n          }\n\n        default:\n          throw new Error('THREE.FBXLoader: Unknown property type ' + type);\n      }\n    }\n  };\n\n  function BinaryReader(buffer, littleEndian) {\n    this.dv = new DataView(buffer);\n    this.offset = 0;\n    this.littleEndian = littleEndian !== undefined ? littleEndian : true;\n  }\n\n  BinaryReader.prototype = {\n    constructor: BinaryReader,\n    getOffset: function getOffset() {\n      return this.offset;\n    },\n    size: function size() {\n      return this.dv.buffer.byteLength;\n    },\n    skip: function skip(length) {\n      this.offset += length;\n    },\n    // seems like true/false representation depends on exporter.\n    // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n    // then sees LSB.\n    getBoolean: function getBoolean() {\n      return (this.getUint8() & 1) === 1;\n    },\n    getBooleanArray: function getBooleanArray(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getBoolean());\n      }\n\n      return a;\n    },\n    getUint8: function getUint8() {\n      var value = this.dv.getUint8(this.offset);\n      this.offset += 1;\n      return value;\n    },\n    getInt16: function getInt16() {\n      var value = this.dv.getInt16(this.offset, this.littleEndian);\n      this.offset += 2;\n      return value;\n    },\n    getInt32: function getInt32() {\n      var value = this.dv.getInt32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    getInt32Array: function getInt32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt32());\n      }\n\n      return a;\n    },\n    getUint32: function getUint32() {\n      var value = this.dv.getUint32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    // JavaScript doesn't support 64-bit integer so calculate this here\n    // 1 << 32 will return 1 so using multiply operation instead here.\n    // There's a possibility that this method returns wrong value if the value\n    // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n    // TODO: safely handle 64-bit integer\n    getInt64: function getInt64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      } // calculate negative value\n\n\n      if (high & 0x80000000) {\n        high = ~high & 0xFFFFFFFF;\n        low = ~low & 0xFFFFFFFF;\n        if (low === 0xFFFFFFFF) high = high + 1 & 0xFFFFFFFF;\n        low = low + 1 & 0xFFFFFFFF;\n        return -(high * 0x100000000 + low);\n      }\n\n      return high * 0x100000000 + low;\n    },\n    getInt64Array: function getInt64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getInt64());\n      }\n\n      return a;\n    },\n    // Note: see getInt64() comment\n    getUint64: function getUint64() {\n      var low, high;\n\n      if (this.littleEndian) {\n        low = this.getUint32();\n        high = this.getUint32();\n      } else {\n        high = this.getUint32();\n        low = this.getUint32();\n      }\n\n      return high * 0x100000000 + low;\n    },\n    getFloat32: function getFloat32() {\n      var value = this.dv.getFloat32(this.offset, this.littleEndian);\n      this.offset += 4;\n      return value;\n    },\n    getFloat32Array: function getFloat32Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat32());\n      }\n\n      return a;\n    },\n    getFloat64: function getFloat64() {\n      var value = this.dv.getFloat64(this.offset, this.littleEndian);\n      this.offset += 8;\n      return value;\n    },\n    getFloat64Array: function getFloat64Array(size) {\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a.push(this.getFloat64());\n      }\n\n      return a;\n    },\n    getArrayBuffer: function getArrayBuffer(size) {\n      var value = this.dv.buffer.slice(this.offset, this.offset + size);\n      this.offset += size;\n      return value;\n    },\n    getString: function getString(size) {\n      // note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n      var a = [];\n\n      for (var i = 0; i < size; i++) {\n        a[i] = this.getUint8();\n      }\n\n      var nullByte = a.indexOf(0);\n      if (nullByte >= 0) a = a.slice(0, nullByte);\n      return THREE.LoaderUtils.decodeText(new Uint8Array(a));\n    }\n  }; // FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n  // and BinaryParser( FBX Binary format)\n\n  function FBXTree() {}\n\n  FBXTree.prototype = {\n    constructor: FBXTree,\n    add: function add(key, val) {\n      this[key] = val;\n    }\n  }; // ************** UTILITY FUNCTIONS **************\n\n  function isFbxFormatBinary(buffer) {\n    var CORRECT = 'Kaydara FBX Binary  \\0';\n    return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length);\n  }\n\n  function isFbxFormatASCII(text) {\n    var CORRECT = ['K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\'];\n    var cursor = 0;\n\n    function read(offset) {\n      var result = text[offset - 1];\n      text = text.slice(cursor + offset);\n      cursor++;\n      return result;\n    }\n\n    for (var i = 0; i < CORRECT.length; ++i) {\n      var num = read(1);\n\n      if (num === CORRECT[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function getFbxVersion(text) {\n    var versionRegExp = /FBXVersion: (\\d+)/;\n    var match = text.match(versionRegExp);\n\n    if (match) {\n      var version = parseInt(match[1]);\n      return version;\n    }\n\n    throw new Error('THREE.FBXLoader: Cannot find the version number for the file given.');\n  } // Converts FBX ticks into real time seconds.\n\n\n  function convertFBXTimeToSeconds(time) {\n    return time / 46186158000;\n  }\n\n  var dataArray = []; // extracts the data from the correct position in the FBX array based on indexing type\n\n  function getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\n    var index;\n\n    switch (infoObject.mappingType) {\n      case 'ByPolygonVertex':\n        index = polygonVertexIndex;\n        break;\n\n      case 'ByPolygon':\n        index = polygonIndex;\n        break;\n\n      case 'ByVertice':\n        index = vertexIndex;\n        break;\n\n      case 'AllSame':\n        index = infoObject.indices[0];\n        break;\n\n      default:\n        console.warn('THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType);\n    }\n\n    if (infoObject.referenceType === 'IndexToDirect') index = infoObject.indices[index];\n    var from = index * infoObject.dataSize;\n    var to = from + infoObject.dataSize;\n    return slice(dataArray, infoObject.buffer, from, to);\n  }\n\n  var tempMat = new THREE.Matrix4();\n  var tempEuler = new THREE.Euler();\n  var tempVec = new THREE.Vector3();\n  var translation = new THREE.Vector3();\n  var rotation = new THREE.Matrix4(); // generate transformation from FBX transform data\n  // ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n  // transformData = {\n  //\t eulerOrder: int,\n  //\t translation: [],\n  //   rotationOffset: [],\n  //\t preRotation\n  //\t rotation\n  //\t postRotation\n  //   scale\n  // }\n  // all entries are optional\n\n  function generateTransform(transformData) {\n    var transform = new THREE.Matrix4();\n    translation.set(0, 0, 0);\n    rotation.identity();\n    var order = transformData.eulerOrder ? getEulerOrder(transformData.eulerOrder) : getEulerOrder(0);\n    if (transformData.translation) translation.fromArray(transformData.translation);\n    if (transformData.rotationOffset) translation.add(tempVec.fromArray(transformData.rotationOffset));\n\n    if (transformData.rotation) {\n      var array = transformData.rotation.map(THREE.Math.degToRad);\n      array.push(order);\n      rotation.makeRotationFromEuler(tempEuler.fromArray(array));\n    }\n\n    if (transformData.preRotation) {\n      var array = transformData.preRotation.map(THREE.Math.degToRad);\n      array.push(order);\n      tempMat.makeRotationFromEuler(tempEuler.fromArray(array));\n      rotation.premultiply(tempMat);\n    }\n\n    if (transformData.postRotation) {\n      var array = transformData.postRotation.map(THREE.Math.degToRad);\n      array.push(order);\n      tempMat.makeRotationFromEuler(tempEuler.fromArray(array));\n      tempMat.getInverse(tempMat);\n      rotation.multiply(tempMat);\n    }\n\n    if (transformData.scale) transform.scale(tempVec.fromArray(transformData.scale));\n    transform.setPosition(translation);\n    transform.multiply(rotation);\n    return transform;\n  } // Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n  // ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\n\n\n  function getEulerOrder(order) {\n    var enums = ['ZYX', // -> XYZ extrinsic\n    'YZX', // -> XZY extrinsic\n    'XZY', // -> YZX extrinsic\n    'ZXY', // -> YXZ extrinsic\n    'YXZ', // -> ZXY extrinsic\n    'XYZ' // -> ZYX extrinsic\n    //'SphericXYZ', // not possible to support\n    ];\n\n    if (order === 6) {\n      console.warn('THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.');\n      return enums[0];\n    }\n\n    return enums[order];\n  } // Parses comma separated list of numbers and returns them an array.\n  // Used internally by the TextParser\n\n\n  function parseNumberArray(value) {\n    var array = value.split(',').map(function (val) {\n      return parseFloat(val);\n    });\n    return array;\n  }\n\n  function convertArrayBufferToString(buffer, from, to) {\n    if (from === undefined) from = 0;\n    if (to === undefined) to = buffer.byteLength;\n    return THREE.LoaderUtils.decodeText(new Uint8Array(buffer, from, to));\n  }\n\n  function append(a, b) {\n    for (var i = 0, j = a.length, l = b.length; i < l; i++, j++) {\n      a[j] = b[i];\n    }\n  }\n\n  function slice(a, b, from, to) {\n    for (var i = from, j = 0; i < to; i++, j++) {\n      a[j] = b[i];\n    }\n\n    return a;\n  } // inject array a2 into array a1 at index\n\n\n  function inject(a1, index, a2) {\n    return a1.slice(0, index).concat(a2).concat(a1.slice(index));\n  }\n\n  return FBXLoader;\n}();","var fetchScript = require('../../lib/fetch-script')();\n\nvar LOADER_SRC = 'https://rawgit.com/mrdoob/three.js/r86/examples/js/loaders/GLTFLoader.js';\n\nvar loadLoader = function () {\n  var promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}();\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from rawgit.\n */\n\n\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {\n    type: 'model'\n  },\n  init: function init() {\n    var _this = this;\n\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(function () {\n      _this.loader = new THREE.GLTFLoader();\n\n      _this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n  update: function update() {\n    var _this2 = this;\n\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n\n    if (!src) {\n      return;\n    }\n\n    this.remove();\n    this.loaderPromise.then(function () {\n      _this2.loader.load(src, function gltfLoaded(gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {\n          format: 'gltf',\n          model: self.model\n        });\n      });\n    });\n  },\n  remove: function remove() {\n    if (!this.model) {\n      return;\n    }\n\n    this.el.removeObject3D('mesh');\n  }\n});","require(\"core-js/modules/es6.promise\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\n/**\n * Source: https://github.com/Adobe-Marketing-Cloud/fetch-script\n */\nfunction getScriptId() {\n  return 'script_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n}\n\nfunction createScript(url, id) {\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.id = id;\n  script.src = url;\n  return script;\n}\n\nfunction removeScript(id) {\n  var script = document.getElementById(id);\n  var parent = script.parentNode;\n\n  try {\n    parent && parent.removeChild(script);\n  } catch (e) {// ignore\n  }\n}\n\nfunction appendScript(script) {\n  var firstScript = document.getElementsByTagName('script')[0];\n  firstScript.parentNode.insertBefore(script, firstScript);\n}\n\nfunction fetchScriptInternal(url, options, Promise) {\n  return new Promise(function (resolve, reject) {\n    var timeout = options.timeout || 5000;\n    var scriptId = getScriptId();\n    var script = createScript(url, scriptId);\n    var timeoutId = setTimeout(function () {\n      reject(new Error('Script request to ' + url + ' timed out'));\n      removeScript(scriptId);\n    }, timeout);\n\n    var disableTimeout = function disableTimeout(timeoutId) {\n      clearTimeout(timeoutId);\n    };\n\n    script.addEventListener('load', function (e) {\n      resolve({\n        ok: true\n      });\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n    script.addEventListener('error', function (e) {\n      reject(new Error('Script request to ' + url + ' failed ' + e));\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n    appendScript(script);\n  });\n}\n\nfunction fetchScript(settings) {\n  settings = settings || {};\n  return function (url, options) {\n    options = options || {};\n    return fetchScriptInternal(url, options, settings.Promise || Promise);\n  };\n}\n\nmodule.exports = fetchScript;","/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src: {\n      type: 'asset'\n    },\n    crossorigin: {\n      \"default\": ''\n    }\n  },\n  init: function init() {\n    this.model = null;\n  },\n  update: function update() {\n    var _this = this;\n\n    var loader;\n    var data = this.data;\n    if (!data.src) return;\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, function (object) {\n      // Enable skinning, if applicable.\n      object.traverse(function (o) {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!(o.geometry && o.geometry.bones || []).length;\n        }\n      });\n\n      _this.load(object);\n    });\n  },\n  load: function load(model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {\n      format: 'json',\n      model: model\n    });\n  },\n  remove: function remove() {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});","require('./checkpoint');\n\nrequire('./cube-env-map');\n\nrequire('./grab');\n\nrequire('./jump-ability');\n\nrequire('./kinematic-body');\n\nrequire('./mesh-smooth');\n\nrequire('./normal-material');\n\nrequire('./sphere-collider');","require(\"core-js/modules/es6.function.bind\");\n\nmodule.exports = AFRAME.registerComponent('checkpoint', {\n  schema: {\n    offset: {\n      \"default\": {\n        x: 0,\n        y: 0,\n        z: 0\n      },\n      type: 'vec3'\n    }\n  },\n  init: function init() {\n    this.active = false;\n    this.targetEl = null;\n    this.fire = this.fire.bind(this);\n    this.offset = new THREE.Vector3();\n  },\n  update: function update() {\n    this.offset.copy(this.data.offset);\n  },\n  play: function play() {\n    this.el.addEventListener('click', this.fire);\n  },\n  pause: function pause() {\n    this.el.removeEventListener('click', this.fire);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  fire: function fire() {\n    var targetEl = this.el.sceneEl.querySelector('[checkpoint-controls]');\n\n    if (!targetEl) {\n      throw new Error('No `checkpoint-controls` component found.');\n    }\n\n    targetEl.components['checkpoint-controls'].setCheckpoint(this.el);\n  },\n  getOffset: function getOffset() {\n    return this.offset.copy(this.data.offset);\n  }\n});","require(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\n/**\n * @param  {Array<THREE.Material>|THREE.Material} material\n * @return {Array<THREE.Material>}\n */\nfunction ensureMaterialArray(material) {\n  if (!material) {\n    return [];\n  } else if (Array.isArray(material)) {\n    return material;\n  } else if (material.materials) {\n    return material.materials;\n  } else {\n    return [material];\n  }\n}\n/**\n * @param  {THREE.Object3D} mesh\n * @param  {Array<string>} materialNames\n * @param  {THREE.Texture} envMap\n * @param  {number} reflectivity  [description]\n */\n\n\nfunction applyEnvMap(mesh, materialNames, envMap, reflectivity) {\n  if (!mesh) return;\n  materialNames = materialNames || [];\n  mesh.traverse(function (node) {\n    if (!node.isMesh) return;\n    var meshMaterials = ensureMaterialArray(node.material);\n    meshMaterials.forEach(function (material) {\n      if (material && !('envMap' in material)) return;\n      if (materialNames.length && materialNames.indexOf(material.name) === -1) return;\n      material.envMap = envMap;\n      material.reflectivity = reflectivity;\n      material.needsUpdate = true;\n    });\n  });\n}\n/**\n * Specifies an envMap on an entity, without replacing any existing material\n * properties.\n */\n\n\nmodule.exports = AFRAME.registerComponent('cube-env-map', {\n  multiple: true,\n  schema: {\n    path: {\n      \"default\": ''\n    },\n    extension: {\n      \"default\": 'jpg',\n      oneOf: ['jpg', 'png']\n    },\n    format: {\n      \"default\": 'RGBFormat',\n      oneOf: ['RGBFormat', 'RGBAFormat']\n    },\n    enableBackground: {\n      \"default\": false\n    },\n    reflectivity: {\n      \"default\": 1,\n      min: 0,\n      max: 1\n    },\n    materials: {\n      \"default\": []\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n    this.texture = new THREE.CubeTextureLoader().load([data.path + 'posx.' + data.extension, data.path + 'negx.' + data.extension, data.path + 'posy.' + data.extension, data.path + 'negy.' + data.extension, data.path + 'posz.' + data.extension, data.path + 'negz.' + data.extension]);\n    this.texture.format = THREE[data.format];\n\n    this.object3dsetHandler = function () {\n      var mesh = _this.el.getObject3D('mesh');\n\n      var data = _this.data;\n      applyEnvMap(mesh, data.materials, _this.texture, data.reflectivity);\n    };\n\n    this.el.addEventListener('object3dset', this.object3dsetHandler);\n  },\n  update: function update(oldData) {\n    var data = this.data;\n    var mesh = this.el.getObject3D('mesh');\n    var addedMaterialNames = [];\n    var removedMaterialNames = [];\n\n    if (data.materials.length) {\n      if (oldData.materials) {\n        addedMaterialNames = data.materials.filter(function (name) {\n          return !oldData.materials.includes(name);\n        });\n        removedMaterialNames = oldData.materials.filter(function (name) {\n          return !data.materials.includes(name);\n        });\n      } else {\n        addedMaterialNames = data.materials;\n      }\n    }\n\n    if (addedMaterialNames.length) {\n      applyEnvMap(mesh, addedMaterialNames, this.texture, data.reflectivity);\n    }\n\n    if (removedMaterialNames.length) {\n      applyEnvMap(mesh, removedMaterialNames, null, 1);\n    }\n\n    if (oldData.materials && data.reflectivity !== oldData.reflectivity) {\n      var maintainedMaterialNames = data.materials.filter(function (name) {\n        return oldData.materials.includes(name);\n      });\n\n      if (maintainedMaterialNames.length) {\n        applyEnvMap(mesh, maintainedMaterialNames, this.texture, data.reflectivity);\n      }\n    }\n\n    if (this.data.enableBackground && !oldData.enableBackground) {\n      this.setBackground(this.texture);\n    } else if (!this.data.enableBackground && oldData.enableBackground) {\n      this.setBackground(null);\n    }\n  },\n  remove: function remove() {\n    this.el.removeEventListener('object3dset', this.object3dsetHandler);\n    var mesh = this.el.getObject3D('mesh');\n    var data = this.data;\n    applyEnvMap(mesh, data.materials, null, 1);\n    if (data.enableBackground) this.setBackground(null);\n  },\n  setBackground: function setBackground(texture) {\n    this.el.sceneEl.object3D.background = texture;\n  }\n});","require(\"core-js/modules/es6.function.bind\");\n\n/* global CANNON */\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Handles events coming from the hand-controls.\n * Determines if the entity is grabbed or released.\n * Updates its position to move along the controller.\n */\nmodule.exports = AFRAME.registerComponent('grab', {\n  init: function init() {\n    this.system = this.el.sceneEl.systems.physics;\n    this.GRABBED_STATE = 'grabbed';\n    this.grabbing = false;\n    this.hitEl =\n    /** @type {AFRAME.Element}    */\n    null;\n    this.physics =\n    /** @type {AFRAME.System}     */\n    this.el.sceneEl.systems.physics;\n    this.constraint =\n    /** @type {CANNON.Constraint} */\n    null; // Bind event handlers\n\n    this.onHit = this.onHit.bind(this);\n    this.onGripOpen = this.onGripOpen.bind(this);\n    this.onGripClose = this.onGripClose.bind(this);\n  },\n  play: function play() {\n    var el = this.el;\n    el.addEventListener('hit', this.onHit);\n    el.addEventListener('gripdown', this.onGripClose);\n    el.addEventListener('gripup', this.onGripOpen);\n    el.addEventListener('trackpaddown', this.onGripClose);\n    el.addEventListener('trackpadup', this.onGripOpen);\n    el.addEventListener('triggerdown', this.onGripClose);\n    el.addEventListener('triggerup', this.onGripOpen);\n  },\n  pause: function pause() {\n    var el = this.el;\n    el.removeEventListener('hit', this.onHit);\n    el.removeEventListener('gripdown', this.onGripClose);\n    el.removeEventListener('gripup', this.onGripOpen);\n    el.removeEventListener('trackpaddown', this.onGripClose);\n    el.removeEventListener('trackpadup', this.onGripOpen);\n    el.removeEventListener('triggerdown', this.onGripClose);\n    el.removeEventListener('triggerup', this.onGripOpen);\n  },\n  onGripClose: function onGripClose() {\n    this.grabbing = true;\n  },\n  onGripOpen: function onGripOpen() {\n    var hitEl = this.hitEl;\n    this.grabbing = false;\n\n    if (!hitEl) {\n      return;\n    }\n\n    hitEl.removeState(this.GRABBED_STATE);\n    this.hitEl = undefined;\n    this.system.removeConstraint(this.constraint);\n    this.constraint = null;\n  },\n  onHit: function onHit(evt) {\n    var hitEl = evt.detail.el; // If the element is already grabbed (it could be grabbed by another controller).\n    // If the hand is not grabbing the element does not stick.\n    // If we're already grabbing something you can't grab again.\n\n    if (!hitEl || hitEl.is(this.GRABBED_STATE) || !this.grabbing || this.hitEl) {\n      return;\n    }\n\n    hitEl.addState(this.GRABBED_STATE);\n    this.hitEl = hitEl;\n    this.constraint = new CANNON.LockConstraint(this.el.body, hitEl.body);\n    this.system.addConstraint(this.constraint);\n  }\n});","require(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nvar ACCEL_G = -9.8,\n    // m/s^2\nEASING = -15; // m/s^2\n\n/**\n * Jump ability.\n */\n\nmodule.exports = AFRAME.registerComponent('jump-ability', {\n  dependencies: ['velocity'],\n\n  /* Schema\n  */\n  schema: {\n    on: {\n      \"default\": 'keydown:Space gamepadbuttondown:0'\n    },\n    playerHeight: {\n      \"default\": 1.764\n    },\n    maxJumps: {\n      \"default\": 1\n    },\n    distance: {\n      \"default\": 5\n    },\n    debug: {\n      \"default\": false\n    }\n  },\n  init: function init() {\n    this.velocity = 0;\n    this.numJumps = 0;\n    var beginJump = this.beginJump.bind(this),\n        events = this.data.on.split(' ');\n    this.bindings = {};\n\n    for (var i = 0; i < events.length; i++) {\n      this.bindings[events[i]] = beginJump;\n      this.el.addEventListener(events[i], beginJump);\n    }\n\n    this.bindings.collide = this.onCollide.bind(this);\n    this.el.addEventListener('collide', this.bindings.collide);\n  },\n  remove: function remove() {\n    for (var event in this.bindings) {\n      if (this.bindings.hasOwnProperty(event)) {\n        this.el.removeEventListener(event, this.bindings[event]);\n        delete this.bindings[event];\n      }\n    }\n\n    this.el.removeEventListener('collide', this.bindings.collide);\n    delete this.bindings.collide;\n  },\n  beginJump: function beginJump() {\n    if (this.numJumps < this.data.maxJumps) {\n      var data = this.data,\n          initialVelocity = Math.sqrt(-2 * data.distance * (ACCEL_G + EASING)),\n          v = this.el.getAttribute('velocity');\n      this.el.setAttribute('velocity', {\n        x: v.x,\n        y: initialVelocity,\n        z: v.z\n      });\n      this.numJumps++;\n      this.el.emit('jumpstart');\n    }\n  },\n  onCollide: function onCollide() {\n    if (this.numJumps > 0) this.el.emit('jumpend');\n    this.numJumps = 0;\n  }\n});","/* global CANNON */\n\n/**\n * Kinematic body.\n *\n * Managed dynamic body, which moves but is not affected (directly) by the\n * physics engine. This is not a true kinematic body, in the sense that we are\n * letting the physics engine _compute_ collisions against it and selectively\n * applying those collisions to the object. The physics engine does not decide\n * the position/velocity/rotation of the element.\n *\n * Used for the camera object, because full physics simulation would create\n * movement that feels unnatural to the player. Bipedal movement does not\n * translate nicely to rigid body physics.\n *\n * See: http://www.learn-cocos2d.com/2013/08/physics-engine-platformer-terrible-idea/\n * And: http://oxleygamedev.blogspot.com/2011/04/player-physics-part-2.html\n */\nvar EPS = 0.000001;\nmodule.exports = AFRAME.registerComponent('kinematic-body', {\n  dependencies: ['velocity'],\n\n  /*******************************************************************\n   * Schema\n   */\n  schema: {\n    mass: {\n      \"default\": 5\n    },\n    radius: {\n      \"default\": 1.3\n    },\n    linearDamping: {\n      \"default\": 0.05\n    },\n    enableSlopes: {\n      \"default\": true\n    },\n    enableJumps: {\n      \"default\": false\n    }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n  init: function init() {\n    this.system = this.el.sceneEl.systems.physics;\n    this.system.addComponent(this);\n    var el = this.el,\n        data = this.data,\n        position = new CANNON.Vec3().copy(el.object3D.getWorldPosition(new THREE.Vector3()));\n    this.body = new CANNON.Body({\n      material: this.system.getMaterial('staticMaterial'),\n      position: position,\n      mass: data.mass,\n      linearDamping: data.linearDamping,\n      fixedRotation: true\n    });\n    this.body.addShape(new CANNON.Sphere(data.radius), new CANNON.Vec3(0, data.radius, 0));\n    this.body.el = this.el;\n    this.el.body = this.body;\n    this.system.addBody(this.body);\n\n    if (el.hasAttribute('wasd-controls')) {\n      console.warn('[kinematic-body] Not compatible with wasd-controls, use movement-controls.');\n    }\n  },\n  remove: function remove() {\n    this.system.removeBody(this.body);\n    this.system.removeComponent(this);\n    delete this.el.body;\n  },\n\n  /*******************************************************************\n   * Update\n   */\n\n  /**\n   * Checks CANNON.World for collisions and attempts to apply them to the\n   * element automatically, in a player-friendly way.\n   *\n   * There's extra logic for horizontal surfaces here. The basic requirements:\n   * (1) Only apply gravity when not in contact with _any_ horizontal surface.\n   * (2) When moving, project the velocity against exactly one ground surface.\n   *     If in contact with two ground surfaces (e.g. ground + ramp), choose\n   *     the one that collides with current velocity, if any.\n   */\n  beforeStep: function beforeStep(t, dt) {\n    if (!dt) return;\n    var el = this.el;\n    var data = this.data;\n    var body = this.body;\n    if (!data.enableJumps) body.velocity.set(0, 0, 0);\n    body.position.copy(el.getAttribute('position'));\n  },\n  step: function () {\n    var velocity = new THREE.Vector3(),\n        normalizedVelocity = new THREE.Vector3(),\n        currentSurfaceNormal = new THREE.Vector3(),\n        groundNormal = new THREE.Vector3();\n    return function (t, dt) {\n      if (!dt) return;\n      var body = this.body,\n          data = this.data,\n          didCollide = false,\n          height,\n          groundHeight = -Infinity,\n          groundBody,\n          contacts = this.system.getContacts();\n      dt = Math.min(dt, this.system.data.maxInterval * 1000);\n      groundNormal.set(0, 0, 0);\n      velocity.copy(this.el.getAttribute('velocity'));\n      body.velocity.copy(velocity);\n\n      for (var i = 0, contact; contact = contacts[i]; i++) {\n        // 1. Find any collisions involving this element. Get the contact\n        // normal, and make sure it's oriented _out_ of the other object and\n        // enabled (body.collisionReponse is true for both bodies)\n        if (!contact.enabled) {\n          continue;\n        }\n\n        if (body.id === contact.bi.id) {\n          contact.ni.negate(currentSurfaceNormal);\n        } else if (body.id === contact.bj.id) {\n          currentSurfaceNormal.copy(contact.ni);\n        } else {\n          continue;\n        }\n\n        didCollide = body.velocity.dot(currentSurfaceNormal) < -EPS;\n\n        if (didCollide && currentSurfaceNormal.y <= 0.5) {\n          // 2. If current trajectory attempts to move _through_ another\n          // object, project the velocity against the collision plane to\n          // prevent passing through.\n          velocity.projectOnPlane(currentSurfaceNormal);\n        } else if (currentSurfaceNormal.y > 0.5) {\n          // 3. If in contact with something roughly horizontal (+/- 45) then\n          // consider that the current ground. Only the highest qualifying\n          // ground is retained.\n          height = body.id === contact.bi.id ? Math.abs(contact.rj.y + contact.bj.position.y) : Math.abs(contact.ri.y + contact.bi.position.y);\n\n          if (height > groundHeight) {\n            groundHeight = height;\n            groundNormal.copy(currentSurfaceNormal);\n            groundBody = body.id === contact.bi.id ? contact.bj : contact.bi;\n          }\n        }\n      }\n\n      normalizedVelocity.copy(velocity).normalize();\n\n      if (groundBody && (!data.enableJumps || normalizedVelocity.y < 0.5)) {\n        if (!data.enableSlopes) {\n          groundNormal.set(0, 1, 0);\n        } else if (groundNormal.y < 1 - EPS) {\n          groundNormal.copy(this.raycastToGround(groundBody, groundNormal));\n        } // 4. Project trajectory onto the top-most ground object, unless\n        // trajectory is > 45.\n\n\n        velocity.projectOnPlane(groundNormal);\n      } else if (this.system.driver.world) {\n        // 5. If not in contact with anything horizontal, apply world gravity.\n        // TODO - Why is the 4x scalar necessary.\n        // NOTE: Does not work if physics runs on a worker.\n        velocity.add(this.system.driver.world.gravity.scale(dt * 4.0 / 1000));\n      }\n\n      body.velocity.copy(velocity);\n      this.el.setAttribute('velocity', body.velocity);\n      this.el.setAttribute('position', body.position);\n    };\n  }(),\n\n  /**\n   * When walking on complex surfaces (trimeshes, borders between two shapes),\n   * the collision normals returned for the player sphere can be very\n   * inconsistent. To address this, raycast straight down, find the collision\n   * normal, and return whichever normal is more vertical.\n   * @param  {CANNON.Body} groundBody\n   * @param  {CANNON.Vec3} groundNormal\n   * @return {CANNON.Vec3}\n   */\n  raycastToGround: function raycastToGround(groundBody, groundNormal) {\n    var ray,\n        hitNormal,\n        vFrom = this.body.position,\n        vTo = this.body.position.clone();\n    ray = new CANNON.Ray(vFrom, vTo);\n\n    ray._updateDirection(); // TODO - Report bug.\n\n\n    ray.intersectBody(groundBody);\n    if (!ray.hasHit) return groundNormal; // Compare ABS, in case we're projecting against the inside of the face.\n\n    hitNormal = ray.result.hitNormalWorld;\n    return Math.abs(hitNormal.y) > Math.abs(groundNormal.y) ? hitNormal : groundNormal;\n  }\n});","/**\n * Apply this component to models that looks \"blocky\", to have Three.js compute\n * vertex normals on the fly for a \"smoother\" look.\n */\nmodule.exports = AFRAME.registerComponent('mesh-smooth', {\n  init: function init() {\n    this.el.addEventListener('model-loaded', function (e) {\n      e.detail.model.traverse(function (node) {\n        if (node.isMesh) node.geometry.computeVertexNormals();\n      });\n    });\n  }\n});","require(\"core-js/modules/es6.function.bind\");\n\n/**\n * Recursively applies a MeshNormalMaterial to the entity, such that\n * face colors are determined by their orientation. Helpful for\n * debugging geometry\n */\nmodule.exports = AFRAME.registerComponent('normal-material', {\n  init: function init() {\n    this.material = new THREE.MeshNormalMaterial({\n      flatShading: true\n    });\n    this.applyMaterial = this.applyMaterial.bind(this);\n    this.el.addEventListener('object3dset', this.applyMaterial);\n  },\n  remove: function remove() {\n    this.el.removeEventListener('object3dset', this.applyMaterial);\n  },\n  applyMaterial: function applyMaterial() {\n    var _this = this;\n\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) node.material = _this.material;\n    });\n  }\n});","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.map\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Implement bounding sphere collision detection for entities with a mesh.\n * Sets the specified state on the intersected entities.\n *\n * @property {string} objects - Selector of the entities to test for collision.\n * @property {string} state - State to set on collided entities.\n *\n */\nmodule.exports = AFRAME.registerComponent('sphere-collider', {\n  schema: {\n    objects: {\n      \"default\": ''\n    },\n    state: {\n      \"default\": 'collided'\n    },\n    radius: {\n      \"default\": 0.05\n    },\n    watch: {\n      \"default\": true\n    }\n  },\n  init: function init() {\n    /** @type {MutationObserver} */\n    this.observer = null;\n    /** @type {Array<Element>} Elements to watch for collisions. */\n\n    this.els = [];\n    /** @type {Array<Element>} Elements currently in collision state. */\n\n    this.collisions = [];\n    this.handleHit = this.handleHit.bind(this);\n    this.handleHitEnd = this.handleHitEnd.bind(this);\n  },\n  remove: function remove() {\n    this.pause();\n  },\n  play: function play() {\n    var sceneEl = this.el.sceneEl;\n\n    if (this.data.watch) {\n      this.observer = new MutationObserver(this.update.bind(this, null));\n      this.observer.observe(sceneEl, {\n        childList: true,\n        subtree: true\n      });\n    }\n  },\n  pause: function pause() {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n  },\n\n  /**\n   * Update list of entities to test for collision.\n   */\n  update: function update() {\n    var data = this.data;\n    var objectEls; // Push entities into list of els to intersect.\n\n    if (data.objects) {\n      objectEls = this.el.sceneEl.querySelectorAll(data.objects);\n    } else {\n      // If objects not defined, intersect with everything.\n      objectEls = this.el.sceneEl.children;\n    } // Convert from NodeList to Array\n\n\n    this.els = Array.prototype.slice.call(objectEls);\n  },\n  tick: function () {\n    var position = new THREE.Vector3(),\n        meshPosition = new THREE.Vector3(),\n        colliderScale = new THREE.Vector3(),\n        size = new THREE.Vector3(),\n        box = new THREE.Box3(),\n        distanceMap = new Map();\n    return function () {\n      var el = this.el,\n          data = this.data,\n          mesh = el.getObject3D('mesh'),\n          collisions = [];\n      var colliderRadius;\n\n      if (!mesh) {\n        return;\n      }\n\n      distanceMap.clear();\n      el.object3D.getWorldPosition(position);\n      el.object3D.getWorldScale(colliderScale);\n      colliderRadius = data.radius * scaleFactor(colliderScale); // Update collision list.\n\n      this.els.forEach(intersect); // Emit events and add collision states, in order of distance.\n\n      collisions.sort(function (a, b) {\n        return distanceMap.get(a) > distanceMap.get(b) ? 1 : -1;\n      }).forEach(this.handleHit); // Remove collision state from current element.\n\n      if (collisions.length === 0) {\n        el.emit('hit', {\n          el: null\n        });\n      } // Remove collision state from other elements.\n\n\n      this.collisions.filter(function (el) {\n        return !distanceMap.has(el);\n      }).forEach(this.handleHitEnd); // Store new collisions\n\n      this.collisions = collisions; // Bounding sphere collision detection\n\n      function intersect(el) {\n        var radius, mesh, distance, extent;\n\n        if (!el.isEntity) {\n          return;\n        }\n\n        mesh = el.getObject3D('mesh');\n\n        if (!mesh) {\n          return;\n        }\n\n        box.setFromObject(mesh).getSize(size);\n        extent = Math.max(size.x, size.y, size.z) / 2;\n        radius = Math.sqrt(2 * extent * extent);\n        box.getCenter(meshPosition);\n\n        if (!radius) {\n          return;\n        }\n\n        distance = position.distanceTo(meshPosition);\n\n        if (distance < radius + colliderRadius) {\n          collisions.push(el);\n          distanceMap.set(el, distance);\n        }\n      } // use max of scale factors to maintain bounding sphere collision\n\n\n      function scaleFactor(scaleVec) {\n        return Math.max.apply(null, scaleVec.toArray());\n      }\n    };\n  }(),\n  handleHit: function handleHit(targetEl) {\n    targetEl.emit('hit');\n    targetEl.addState(this.data.state);\n    this.el.emit('hit', {\n      el: targetEl\n    });\n  },\n  handleHitEnd: function handleHitEnd(targetEl) {\n    targetEl.emit('hitend');\n    targetEl.removeState(this.data.state);\n    this.el.emit('hitend', {\n      el: targetEl\n    });\n  }\n});","require('./nav-mesh');\n\nrequire('./nav-agent');\n\nrequire('./system');","require(\"core-js/modules/es6.function.bind\");\n\n/**\n * nav-mesh\n *\n * Waits for a mesh to be loaded on the current entity, then sets it as the\n * nav mesh in the pathfinding system.\n */\nmodule.exports = AFRAME.registerComponent('nav-mesh', {\n  init: function init() {\n    this.system = this.el.sceneEl.systems.nav;\n    this.hasLoadedNavMesh = false;\n    this.el.addEventListener('object3dset', this.loadNavMesh.bind(this));\n  },\n  play: function play() {\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\n  },\n  loadNavMesh: function loadNavMesh() {\n    var object = this.el.getObject3D('mesh');\n    var scene = this.el.sceneEl.object3D;\n    if (!object) return;\n    var navMesh;\n    object.traverse(function (node) {\n      if (node.isMesh) navMesh = node;\n    });\n    if (!navMesh) return;\n    var navMeshGeometry = navMesh.geometry.isBufferGeometry ? new THREE.Geometry().fromBufferGeometry(navMesh.geometry) : navMesh.geometry.clone();\n    scene.updateMatrixWorld();\n    navMeshGeometry.applyMatrix(navMesh.matrixWorld);\n    this.system.setNavMeshGeometry(navMeshGeometry);\n    this.hasLoadedNavMesh = true;\n  }\n});","module.exports = AFRAME.registerComponent('nav-agent', {\n  schema: {\n    destination: {\n      type: 'vec3'\n    },\n    active: {\n      \"default\": false\n    },\n    speed: {\n      \"default\": 2\n    }\n  },\n  init: function init() {\n    this.system = this.el.sceneEl.systems.nav;\n    this.system.addAgent(this);\n    this.group = null;\n    this.path = [];\n    this.raycaster = new THREE.Raycaster();\n  },\n  remove: function remove() {\n    this.system.removeAgent(this);\n  },\n  update: function update() {\n    this.path.length = 0;\n  },\n  updateNavLocation: function updateNavLocation() {\n    this.group = null;\n    this.path = [];\n  },\n  tick: function () {\n    var vDest = new THREE.Vector3();\n    var vDelta = new THREE.Vector3();\n    var vNext = new THREE.Vector3();\n    return function (t, dt) {\n      var el = this.el;\n      var data = this.data;\n      var raycaster = this.raycaster;\n      var speed = data.speed * dt / 1000;\n      if (!data.active) return; // Use PatrolJS pathfinding system to get shortest path to target.\n\n      if (!this.path.length) {\n        var position = this.el.object3D.position;\n        this.group = this.group || this.system.getGroup(position);\n        this.path = this.system.getPath(position, vDest.copy(data.destination), this.group) || [];\n        el.emit('navigation-start');\n      } // If no path is found, exit.\n\n\n      if (!this.path.length) {\n        console.warn('[nav] Unable to find path to %o.', data.destination);\n        this.el.setAttribute('nav-agent', {\n          active: false\n        });\n        el.emit('navigation-end');\n        return;\n      } // Current segment is a vector from current position to next waypoint.\n\n\n      var vCurrent = el.object3D.position;\n      var vWaypoint = this.path[0];\n      vDelta.subVectors(vWaypoint, vCurrent);\n      var distance = vDelta.length();\n      var gazeTarget;\n\n      if (distance < speed) {\n        // If <1 step from current waypoint, discard it and move toward next.\n        this.path.shift(); // After discarding the last waypoint, exit pathfinding.\n\n        if (!this.path.length) {\n          this.el.setAttribute('nav-agent', {\n            active: false\n          });\n          el.emit('navigation-end');\n          return;\n        }\n\n        vNext.copy(vCurrent);\n        gazeTarget = this.path[0];\n      } else {\n        // If still far away from next waypoint, find next position for\n        // the current frame.\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\n        gazeTarget = vWaypoint;\n      } // Look at the next waypoint.\n\n\n      gazeTarget.y = vCurrent.y;\n      el.object3D.lookAt(gazeTarget); // Raycast against the nav mesh, to keep the agent moving along the\n      // ground, not traveling in a straight line from higher to lower waypoints.\n\n      raycaster.ray.origin.copy(vNext);\n      raycaster.ray.origin.y += 1.5;\n      raycaster.ray.direction.y = -1;\n      var intersections = raycaster.intersectObject(this.system.getNavMesh());\n\n      if (!intersections.length) {\n        // Raycasting failed. Step toward the waypoint and hope for the best.\n        vCurrent.copy(vNext);\n      } else {\n        // Re-project next position onto nav mesh.\n        vDelta.subVectors(intersections[0].point, vCurrent);\n        vCurrent.add(vDelta.setLength(speed));\n      }\n    };\n  }()\n});","require(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.set\");\n\nvar _require = require('three-pathfinding'),\n    Pathfinding = _require.Pathfinding;\n\nvar pathfinder = new Pathfinding();\nvar ZONE = 'level';\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\n\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function init() {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function setNavMeshGeometry(geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach(function (agent) {\n      return agent.updateNavLocation();\n    });\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function getNavMesh() {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function addAgent(ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function removeAgent(ctrl) {\n    this.agents[\"delete\"](ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function getPath(start, end, groupID) {\n    return this.navMesh ? pathfinder.findPath(start, end, ZONE, groupID) : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function getGroup(position) {\n    return this.navMesh ? pathfinder.getGroup(ZONE, position) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function getNode(position, groupID) {\n    return this.navMesh ? pathfinder.getClosestNode(position, ZONE, groupID, true) : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function clampStep(start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});","import \"core-js/modules/es6.map\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.to-string\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/es6.string.sub\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.number.constructor\";\n\nvar e = function e() {};\n\ne.computeCentroids = function (e) {\n  var t, n, r;\n\n  for (t = 0, n = e.faces.length; t < n; t++) {\n    (r = e.faces[t]).centroid = new THREE.Vector3(0, 0, 0), r.centroid.add(e.vertices[r.a]), r.centroid.add(e.vertices[r.b]), r.centroid.add(e.vertices[r.c]), r.centroid.divideScalar(3);\n  }\n}, e.roundNumber = function (e, t) {\n  return Number(e.toFixed(t));\n}, e.sample = function (e) {\n  return e[Math.floor(Math.random() * e.length)];\n}, e.mergeVertexIds = function (e, t) {\n  var n = [];\n  if (e.forEach(function (e) {\n    t.indexOf(e) >= 0 && n.push(e);\n  }), n.length < 2) return [];\n  n.includes(e[0]) && n.includes(e[e.length - 1]) && e.push(e.shift()), n.includes(t[0]) && n.includes(t[t.length - 1]) && t.push(t.shift()), n = [], e.forEach(function (e) {\n    t.includes(e) && n.push(e);\n  });\n\n  for (var r = n[1], o = n[0], i = e.slice(); i[0] !== r;) {\n    i.push(i.shift());\n  }\n\n  for (var s = 0, u = t.slice(); u[0] !== o;) {\n    if (u.push(u.shift()), s++ > 10) throw new Error(\"Unexpected state\");\n  }\n\n  return u.shift(), u.pop(), i = i.concat(u);\n}, e.setPolygonCentroid = function (e, t) {\n  var n = new THREE.Vector3(),\n      r = t.vertices;\n  e.vertexIds.forEach(function (e) {\n    n.add(r[e]);\n  }), n.divideScalar(e.vertexIds.length), e.centroid.copy(n);\n}, e.cleanPolygon = function (e, t) {\n  for (var n = [], r = t.vertices, o = 0; o < e.vertexIds.length; o++) {\n    var i,\n        s,\n        u,\n        c = r[e.vertexIds[o]];\n    0 === o ? (i = e.vertexIds[1], s = e.vertexIds[e.vertexIds.length - 1]) : o === e.vertexIds.length - 1 ? (i = e.vertexIds[0], s = e.vertexIds[e.vertexIds.length - 2]) : (i = e.vertexIds[o + 1], s = e.vertexIds[o - 1]), u = r[s];\n    var h = r[i].clone().sub(c),\n        a = u.clone().sub(c),\n        d = h.angleTo(a);\n\n    if (d > Math.PI - .01 && d < Math.PI + .01) {\n      var f = [];\n      e.neighbours.forEach(function (t) {\n        t.vertexIds.includes(e.vertexIds[o]) || f.push(t);\n      }), e.neighbours = f;\n    } else n.push(e.vertexIds[o]);\n  }\n\n  e.vertexIds = n, this.setPolygonCentroid(e, t);\n}, e.isConvex = function (e, t) {\n  var n = t.vertices;\n  if (e.vertexIds.length < 3) return !1;\n\n  for (var r = !0, o = [], i = 0; i < e.vertexIds.length; i++) {\n    var s,\n        u,\n        c = n[e.vertexIds[i]];\n    0 === i ? (s = n[e.vertexIds[1]], u = n[e.vertexIds[e.vertexIds.length - 1]]) : i === e.vertexIds.length - 1 ? (s = n[e.vertexIds[0]], u = n[e.vertexIds[e.vertexIds.length - 2]]) : (s = n[e.vertexIds[i + 1]], u = n[e.vertexIds[i - 1]]);\n    var h = s.clone().sub(c),\n        a = u.clone().sub(c),\n        d = h.angleTo(a);\n    if (d === Math.PI || 0 === d) return !1;\n    var f = h.cross(a).y;\n    o.push(f);\n  }\n\n  return o.forEach(function (e) {\n    0 === e && (r = !1);\n  }), o.forEach(o[0] > 0 ? function (e) {\n    e < 0 && (r = !1);\n  } : function (e) {\n    e > 0 && (r = !1);\n  }), r;\n}, e.distanceToSquared = function (e, t) {\n  var n = e.x - t.x,\n      r = e.y - t.y,\n      o = e.z - t.z;\n  return n * n + r * r + o * o;\n}, e.isPointInPoly = function (e, t) {\n  for (var n = !1, r = -1, o = e.length, i = o - 1; ++r < o; i = r) {\n    (e[r].z <= t.z && t.z < e[i].z || e[i].z <= t.z && t.z < e[r].z) && t.x < (e[i].x - e[r].x) * (t.z - e[r].z) / (e[i].z - e[r].z) + e[r].x && (n = !n);\n  }\n\n  return n;\n}, e.isVectorInPolygon = function (e, t, n) {\n  var r = 1e5,\n      o = -1e5,\n      i = [];\n  return t.vertexIds.forEach(function (e) {\n    r = Math.min(n[e].y, r), o = Math.max(n[e].y, o), i.push(n[e]);\n  }), !!(e.y < o + .5 && e.y > r - .5 && this.isPointInPoly(i, e));\n}, e.triarea2 = function (e, t, n) {\n  return (n.x - e.x) * (t.z - e.z) - (t.x - e.x) * (n.z - e.z);\n}, e.vequal = function (e, t) {\n  return this.distanceToSquared(e, t) < 1e-5;\n};\n\nvar t = function t(e) {\n  this.content = [], this.scoreFunction = e;\n};\n\nt.prototype.push = function (e) {\n  this.content.push(e), this.sinkDown(this.content.length - 1);\n}, t.prototype.pop = function () {\n  var e = this.content[0],\n      t = this.content.pop();\n  return this.content.length > 0 && (this.content[0] = t, this.bubbleUp(0)), e;\n}, t.prototype.remove = function (e) {\n  var t = this.content.indexOf(e),\n      n = this.content.pop();\n  t !== this.content.length - 1 && (this.content[t] = n, this.scoreFunction(n) < this.scoreFunction(e) ? this.sinkDown(t) : this.bubbleUp(t));\n}, t.prototype.size = function () {\n  return this.content.length;\n}, t.prototype.rescoreElement = function (e) {\n  this.sinkDown(this.content.indexOf(e));\n}, t.prototype.sinkDown = function (e) {\n  for (var t = this.content[e]; e > 0;) {\n    var n = (e + 1 >> 1) - 1,\n        r = this.content[n];\n    if (!(this.scoreFunction(t) < this.scoreFunction(r))) break;\n    this.content[n] = t, this.content[e] = r, e = n;\n  }\n}, t.prototype.bubbleUp = function (e) {\n  for (var t = this.content.length, n = this.content[e], r = this.scoreFunction(n);;) {\n    var o = e + 1 << 1,\n        i = o - 1,\n        s = null,\n        u = void 0;\n    if (i < t) (u = this.scoreFunction(this.content[i])) < r && (s = i);\n    if (o < t) this.scoreFunction(this.content[o]) < (null === s ? r : u) && (s = o);\n    if (null === s) break;\n    this.content[e] = this.content[s], this.content[s] = n, e = s;\n  }\n};\n\nvar n = function n() {};\n\nn.init = function (e) {\n  for (var t = 0; t < e.length; t++) {\n    var n = e[t];\n    n.f = 0, n.g = 0, n.h = 0, n.cost = 1, n.visited = !1, n.closed = !1, n.parent = null;\n  }\n}, n.cleanUp = function (e) {\n  for (var t = 0; t < e.length; t++) {\n    var n = e[t];\n    delete n.f, delete n.g, delete n.h, delete n.cost, delete n.visited, delete n.closed, delete n.parent;\n  }\n}, n.heap = function () {\n  return new t(function (e) {\n    return e.f;\n  });\n}, n.search = function (e, t, n) {\n  this.init(e);\n  var r = this.heap();\n\n  for (r.push(t); r.size() > 0;) {\n    var o = r.pop();\n\n    if (o === n) {\n      for (var i = o, s = []; i.parent;) {\n        s.push(i), i = i.parent;\n      }\n\n      return this.cleanUp(s), s.reverse();\n    }\n\n    o.closed = !0;\n\n    for (var u = this.neighbours(e, o), c = 0, h = u.length; c < h; c++) {\n      var a = u[c];\n\n      if (!a.closed) {\n        var d = o.g + a.cost,\n            f = a.visited;\n\n        if (!f || d < a.g) {\n          if (a.visited = !0, a.parent = o, !a.centroid || !n.centroid) throw new Error(\"Unexpected state\");\n          a.h = a.h || this.heuristic(a.centroid, n.centroid), a.g = d, a.f = a.g + a.h, f ? r.rescoreElement(a) : r.push(a);\n        }\n      }\n    }\n  }\n\n  return [];\n}, n.heuristic = function (t, n) {\n  return e.distanceToSquared(t, n);\n}, n.neighbours = function (e, t) {\n  for (var n = [], r = 0; r < t.neighbours.length; r++) {\n    n.push(e[t.neighbours[r]]);\n  }\n\n  return n;\n};\n\nvar r = 1,\n    o = function o() {};\n\no.buildZone = function (t) {\n  var n = this,\n      r = this._buildNavigationMesh(t),\n      o = {};\n\n  r.vertices.forEach(function (t) {\n    t.x = e.roundNumber(t.x, 2), t.y = e.roundNumber(t.y, 2), t.z = e.roundNumber(t.z, 2);\n  }), o.vertices = r.vertices;\n\n  var i = this._buildPolygonGroups(r);\n\n  o.groups = [];\n\n  var s = function s(e, t) {\n    for (var n = 0; n < e.length; n++) {\n      if (t === e[n]) return n;\n    }\n  };\n\n  return i.forEach(function (t) {\n    var r = [];\n    t.forEach(function (o) {\n      var i = o.neighbours.map(function (e) {\n        return s(t, e);\n      }),\n          u = o.neighbours.map(function (e) {\n        return n._getSharedVerticesInOrder(o, e);\n      });\n      o.centroid.x = e.roundNumber(o.centroid.x, 2), o.centroid.y = e.roundNumber(o.centroid.y, 2), o.centroid.z = e.roundNumber(o.centroid.z, 2), r.push({\n        id: s(t, o),\n        neighbours: i,\n        vertexIds: o.vertexIds,\n        centroid: o.centroid,\n        portals: u\n      });\n    }), o.groups.push(r);\n  }), o;\n}, o._buildNavigationMesh = function (t) {\n  return e.computeCentroids(t), t.mergeVertices(), this._buildPolygonsFromGeometry(t);\n}, o._buildPolygonGroups = function (e) {\n  var t = [],\n      n = 0,\n      r = function r(e) {\n    e.neighbours.forEach(function (t) {\n      void 0 === t.group && (t.group = e.group, r(t));\n    });\n  };\n\n  return e.polygons.forEach(function (e) {\n    void 0 === e.group && (e.group = n++, r(e)), t[e.group] || (t[e.group] = []), t[e.group].push(e);\n  }), t;\n}, o._buildPolygonNeighbours = function (e, t, n) {\n  var r = new Set(),\n      o = n.get(e.vertexIds[0]),\n      i = n.get(e.vertexIds[1]),\n      s = n.get(e.vertexIds[2]);\n  o.forEach(function (e) {\n    (i.has(e) || s.has(e)) && r.add(t.polygons[e]);\n  }), i.forEach(function (e) {\n    s.has(e) && r.add(t.polygons[e]);\n  }), e.neighbours = Array.from(r);\n}, o._buildPolygonsFromGeometry = function (e) {\n  for (var t = this, n = [], o = e.vertices, i = e.faceVertexUvs, s = new Map(), u = 0; u < o.length; u++) {\n    s.set(u, new Set());\n  }\n\n  e.faces.forEach(function (e) {\n    n.push({\n      id: r++,\n      vertexIds: [e.a, e.b, e.c],\n      centroid: e.centroid,\n      normal: e.normal,\n      neighbours: []\n    }), s.get(e.a).add(n.length - 1), s.get(e.b).add(n.length - 1), s.get(e.c).add(n.length - 1);\n  });\n  var c = {\n    polygons: n,\n    vertices: o,\n    faceVertexUvs: i\n  };\n  return n.forEach(function (e) {\n    t._buildPolygonNeighbours(e, c, s);\n  }), c;\n}, o._getSharedVerticesInOrder = function (e, t) {\n  var n = e.vertexIds,\n      r = t.vertexIds,\n      o = new Set();\n  if (n.forEach(function (e) {\n    r.includes(e) && o.add(e);\n  }), o.size < 2) return [];\n  o.has(n[0]) && o.has(n[n.length - 1]) && n.push(n.shift()), o.has(r[0]) && o.has(r[r.length - 1]) && r.push(r.shift());\n  var i = [];\n  return n.forEach(function (e) {\n    r.includes(e) && i.push(e);\n  }), i;\n};\n\nvar i = function i() {\n  this.portals = [];\n};\n\ni.prototype.push = function (e, t) {\n  void 0 === t && (t = e), this.portals.push({\n    left: e,\n    right: t\n  });\n}, i.prototype.stringPull = function () {\n  var t,\n      n,\n      r,\n      o = this.portals,\n      i = [],\n      s = 0,\n      u = 0,\n      c = 0;\n  n = o[0].left, r = o[0].right, i.push(t = o[0].left);\n\n  for (var h = 1; h < o.length; h++) {\n    var a = o[h].left,\n        d = o[h].right;\n\n    if (e.triarea2(t, r, d) <= 0) {\n      if (!(e.vequal(t, r) || e.triarea2(t, n, d) > 0)) {\n        i.push(n), n = t = n, r = t, u = s = u, c = s, h = s;\n        continue;\n      }\n\n      r = d, c = h;\n    }\n\n    if (e.triarea2(t, n, a) >= 0) {\n      if (!(e.vequal(t, n) || e.triarea2(t, r, a) < 0)) {\n        i.push(r), n = t = r, r = t, u = s = c, c = s, h = s;\n        continue;\n      }\n\n      n = a, u = h;\n    }\n  }\n\n  return 0 !== i.length && e.vequal(i[i.length - 1], o[o.length - 1].left) || i.push(o[o.length - 1].left), this.path = i, i;\n};\n\nvar s,\n    u,\n    c,\n    h,\n    a,\n    d,\n    f = function f() {\n  this.zones = {};\n};\n\nf.createZone = function (e) {\n  return o.buildZone(e);\n}, f.prototype.setZoneData = function (e, t) {\n  this.zones[e] = t;\n}, f.prototype.getGroup = function (t, n) {\n  if (!this.zones[t]) return null;\n  var r = null,\n      o = Math.pow(50, 2);\n  return this.zones[t].groups.forEach(function (t, i) {\n    t.forEach(function (t) {\n      var s = e.distanceToSquared(t.centroid, n);\n      s < o && (r = i, o = s);\n    });\n  }), r;\n}, f.prototype.getRandomNode = function (t, n, r, o) {\n  if (!this.zones[t]) return new THREE.Vector3();\n  r = r || null, o = o || 0;\n  var i = [];\n  return this.zones[t].groups[n].forEach(function (t) {\n    r && o ? e.distanceToSquared(r, t.centroid) < o * o && i.push(t.centroid) : i.push(t.centroid);\n  }), e.sample(i) || new THREE.Vector3();\n}, f.prototype.getClosestNode = function (t, n, r, o) {\n  void 0 === o && (o = !1);\n  var i = this.zones[n].vertices,\n      s = null,\n      u = Infinity;\n  return this.zones[n].groups[r].forEach(function (n) {\n    var r = e.distanceToSquared(n.centroid, t);\n    r < u && (!o || e.isVectorInPolygon(t, n, i)) && (s = n, u = r);\n  }), s;\n}, f.prototype.findPath = function (e, t, r, o) {\n  var s = this.zones[r].groups[o],\n      u = this.zones[r].vertices,\n      c = this.getClosestNode(e, r, o),\n      h = this.getClosestNode(t, r, o, !0);\n  if (!c || !h) return null;\n\n  var a = n.search(s, c, h),\n      d = function d(e, t) {\n    for (var n = 0; n < e.neighbours.length; n++) {\n      if (e.neighbours[n] === t.id) return e.portals[n];\n    }\n  },\n      f = new i();\n\n  f.push(e);\n\n  for (var l = 0; l < a.length; l++) {\n    var v = a[l + 1];\n\n    if (v) {\n      var p = d(a[l], v);\n      f.push(u[p[0]], u[p[1]]);\n    }\n  }\n\n  f.push(t), f.stringPull();\n  var g = f.path.map(function (e) {\n    return new THREE.Vector3(e.x, e.y, e.z);\n  });\n  return g.shift(), g;\n}, f.prototype.clampStep = (c = new THREE.Vector3(), h = new THREE.Plane(), a = new THREE.Triangle(), d = new THREE.Vector3(), function (e, t, n, r, o, i) {\n  var f = this.zones[r].vertices,\n      l = this.zones[r].groups[o],\n      v = [n],\n      p = {};\n  p[n.id] = 0, s = void 0, d.set(0, 0, 0), u = Infinity, h.setFromCoplanarPoints(f[n.vertexIds[0]], f[n.vertexIds[1]], f[n.vertexIds[2]]), h.projectPoint(t, c), t.copy(c);\n\n  for (var g = v.pop(); g; g = v.pop()) {\n    a.set(f[g.vertexIds[0]], f[g.vertexIds[1]], f[g.vertexIds[2]]), a.closestPointToPoint(t, c), c.distanceToSquared(t) < u && (s = g, d.copy(c), u = c.distanceToSquared(t));\n    var x = p[g];\n    if (!(x > 2)) for (var I = 0; I < g.neighbours.length; I++) {\n      var b = l[g.neighbours[I]];\n      b.id in p || (v.push(b), p[b.id] = x + 1);\n    }\n  }\n\n  return i.copy(d), s;\n});\nexport { f as Pathfinding };","require('./a-grid');\n\nrequire('./a-hexgrid');\n\nrequire('./a-ocean');\n\nrequire('./a-tube');","/**\n * Flat grid.\n *\n * Defaults to 75x75.\n */\nmodule.exports = AFRAME.registerPrimitive('a-grid', {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane',\n      width: 75,\n      height: 75\n    },\n    rotation: {\n      x: -90,\n      y: 0,\n      z: 0\n    },\n    material: {\n      src: 'url(https://cdn.rawgit.com/donmccurdy/aframe-extras/v1.16.3/assets/grid.png)',\n      repeat: '75 75'\n    }\n  },\n  mappings: {\n    width: 'geometry.width',\n    height: 'geometry.height',\n    src: 'material.src'\n  }\n});","var vg = require('../../lib/hex-grid.min.js');\n\nvar defaultHexGrid = require('../../lib/default-hex-grid');\n/**\n * Hex grid.\n */\n\n\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-hexgrid', {\n  defaultComponents: {\n    'hexgrid': {}\n  },\n  mappings: {\n    src: 'hexgrid.src'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('hexgrid', {\n  dependencies: ['material'],\n  schema: {\n    src: {\n      type: 'asset'\n    }\n  },\n  init: function init() {\n    var _this = this;\n\n    var data = this.data;\n\n    if (data.src) {\n      fetch(data.src).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return _this.addMesh(json);\n      });\n    } else {\n      this.addMesh(defaultHexGrid);\n    }\n  },\n  addMesh: function addMesh(json) {\n    var grid = new vg.HexGrid();\n    grid.fromJSON(json);\n    var board = new vg.Board(grid);\n    board.generateTilemap();\n    this.el.setObject3D('mesh', board.group);\n    this.addMaterial();\n  },\n  addMaterial: function addMaterial() {\n    var materialComponent = this.el.components.material;\n    var material = (materialComponent || {}).material;\n    if (!material) return;\n    this.el.object3D.traverse(function (node) {\n      if (node.isMesh) {\n        node.material = material;\n      }\n    });\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  }\n});","require(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nvar vg = module.exports = {\n  VERSION: \"0.1.1\",\n  PI: Math.PI,\n  TAU: 2 * Math.PI,\n  DEG_TO_RAD: .0174532925,\n  RAD_TO_DEG: 57.2957795,\n  SQRT3: Math.sqrt(3),\n  TILE: \"tile\",\n  ENT: \"entity\",\n  STR: \"structure\",\n  HEX: \"hex\",\n  SQR: \"square\",\n  ABS: \"abstract\"\n};\nvg.Board = function (e, t) {\n  if (!e) throw new Error(\"You must pass in a grid system for the board to use.\");\n  this.tiles = [], this.tileGroup = null, this.group = new THREE.Object3D(), this.grid = null, this.overlay = null, this.finder = new vg.AStarFinder(t), vg.Loader.init(), this.setGrid(e);\n}, vg.Board.prototype = {\n  setEntityOnTile: function setEntityOnTile(e, t) {\n    var i = this.grid.cellToPixel(t.cell);\n    e.position.copy(i), e.position.y += e.heightOffset || 0, e.tile && (e.tile.entity = null), e.tile = t, t.entity = e;\n  },\n  addTile: function addTile(e) {\n    var t = this.tiles.indexOf(e);\n    -1 === t && (this.tiles.push(e), this.snapTileToGrid(e), e.position.y = 0, this.tileGroup.add(e.mesh), this.grid.add(e.cell), e.cell.tile = e);\n  },\n  removeTile: function removeTile(e) {\n    if (e) {\n      var t = this.tiles.indexOf(e);\n      this.grid.remove(e.cell), -1 !== t && this.tiles.splice(t, 1), e.dispose();\n    }\n  },\n  removeAllTiles: function removeAllTiles() {\n    if (this.tileGroup) for (var e = this.tileGroup.children, t = 0; t < e.length; t++) {\n      this.tileGroup.remove(e[t]);\n    }\n  },\n  getTileAtCell: function getTileAtCell(e) {\n    var t = this.grid.cellToHash(e);\n    return e.tile || (\"undefined\" != typeof this.grid.cells[t] ? this.grid.cells[t].tile : null);\n  },\n  snapToGrid: function snapToGrid(e) {\n    var t = this.grid.pixelToCell(e);\n    e.copy(this.grid.cellToPixel(t));\n  },\n  snapTileToGrid: function snapTileToGrid(e) {\n    if (e.cell) e.position.copy(this.grid.cellToPixel(e.cell));else {\n      var t = this.grid.pixelToCell(e.position);\n      e.position.copy(this.grid.cellToPixel(t));\n    }\n    return e;\n  },\n  getRandomTile: function getRandomTile() {\n    var e = vg.Tools.randomInt(0, this.tiles.length - 1);\n    return this.tiles[e];\n  },\n  findPath: function findPath(e, t, i) {\n    return this.finder.findPath(e.cell, t.cell, i, this.grid);\n  },\n  setGrid: function setGrid(e) {\n    this.group.remove(this.tileGroup), this.grid && e !== this.grid && (this.removeAllTiles(), this.tiles.forEach(function (e) {\n      this.grid.remove(e.cell), e.dispose();\n    }), this.grid.dispose()), this.grid = e, this.tiles = [], this.tileGroup = new THREE.Object3D(), this.group.add(this.tileGroup);\n  },\n  generateOverlay: function generateOverlay(e) {\n    var t = new THREE.LineBasicMaterial({\n      color: 0,\n      opacity: .3\n    });\n    this.overlay && this.group.remove(this.overlay), this.overlay = new THREE.Object3D(), this.grid.generateOverlay(e, this.overlay, t), this.group.add(this.overlay);\n  },\n  generateTilemap: function generateTilemap(e) {\n    this.reset();\n    var t = this.grid.generateTiles(e);\n    this.tiles = t, this.tileGroup = new THREE.Object3D();\n\n    for (var i = 0; i < t.length; i++) {\n      this.tileGroup.add(t[i].mesh);\n    }\n\n    this.group.add(this.tileGroup);\n  },\n  reset: function reset() {\n    this.removeAllTiles(), this.tileGroup && this.group.remove(this.tileGroup);\n  }\n}, vg.Board.prototype.constructor = vg.Board, vg.Cell = function (e, t, i, s) {\n  this.q = e || 0, this.r = t || 0, this.s = i || 0, this.h = s || 1, this.tile = null, this.userData = {}, this.walkable = !0, this._calcCost = 0, this._priority = 0, this._visited = !1, this._parent = null, this.uniqueID = vg.LinkedList.generateID();\n}, vg.Cell.prototype = {\n  set: function set(e, t, i) {\n    return this.q = e, this.r = t, this.s = i, this;\n  },\n  copy: function copy(e) {\n    return this.q = e.q, this.r = e.r, this.s = e.s, this.h = e.h, this.tile = e.tile || null, this.userData = e.userData || {}, this.walkable = e.walkable, this;\n  },\n  add: function add(e) {\n    return this.q += e.q, this.r += e.r, this.s += e.s, this;\n  },\n  equals: function equals(e) {\n    return this.q === e.q && this.r === e.r && this.s === e.s;\n  }\n}, vg.Cell.prototype.constructor = vg.Cell, vg.HexGrid = function (e) {\n  e = e || {}, this.type = vg.HEX, this.size = 5, this.cellSize = \"undefined\" == typeof e.cellSize ? 10 : e.cellSize, this.cells = {}, this.numCells = 0, this.extrudeSettings = null, this.autogenerated = !1;\n  var t,\n      i = [];\n\n  for (t = 0; 6 > t; t++) {\n    i.push(this._createVertex(t));\n  }\n\n  for (this.cellShape = new THREE.Shape(), this.cellShape.moveTo(i[0].x, i[0].y), t = 1; 6 > t; t++) {\n    this.cellShape.lineTo(i[t].x, i[t].y);\n  }\n\n  this.cellShape.lineTo(i[0].x, i[0].y), this.cellShape.autoClose = !0, this.cellGeo = new THREE.Geometry(), this.cellGeo.vertices = i, this.cellGeo.verticesNeedUpdate = !0, this.cellShapeGeo = new THREE.ShapeGeometry(this.cellShape), this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this._hashDelimeter = \".\", this._directions = [new vg.Cell(1, -1, 0), new vg.Cell(1, 0, -1), new vg.Cell(0, 1, -1), new vg.Cell(-1, 1, 0), new vg.Cell(-1, 0, 1), new vg.Cell(0, -1, 1)], this._diagonals = [new vg.Cell(2, -1, -1), new vg.Cell(1, 1, -2), new vg.Cell(-1, 2, -1), new vg.Cell(-2, 1, 1), new vg.Cell(-1, -1, 2), new vg.Cell(1, -2, 1)], this._list = [], this._vec3 = new THREE.Vector3(), this._cel = new vg.Cell(), this._conversionVec = new THREE.Vector3(), this._geoCache = [], this._matCache = [];\n}, vg.HexGrid.TWO_THIRDS = 2 / 3, vg.HexGrid.prototype = {\n  cellToPixel: function cellToPixel(e) {\n    return this._vec3.x = e.q * this._cellWidth * .75, this._vec3.y = e.h, this._vec3.z = -((e.s - e.r) * this._cellLength * .5), this._vec3;\n  },\n  pixelToCell: function pixelToCell(e) {\n    var t = e.x * (vg.HexGrid.TWO_THIRDS / this.cellSize),\n        i = (-e.x / 3 + vg.SQRT3 / 3 * e.z) / this.cellSize;\n    return this._cel.set(t, i, -t - i), this._cubeRound(this._cel);\n  },\n  getCellAt: function getCellAt(e) {\n    var t = e.x * (vg.HexGrid.TWO_THIRDS / this.cellSize),\n        i = (-e.x / 3 + vg.SQRT3 / 3 * e.z) / this.cellSize;\n    return this._cel.set(t, i, -t - i), this._cubeRound(this._cel), this.cells[this.cellToHash(this._cel)];\n  },\n  getNeighbors: function getNeighbors(e, t, i) {\n    var s,\n        n,\n        l = this._directions.length;\n\n    for (this._list.length = 0, s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._directions[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n\n    if (t) for (s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._diagonals[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n    return this._list;\n  },\n  getRandomCell: function getRandomCell() {\n    var e,\n        t = 0,\n        i = vg.Tools.randomInt(0, this.numCells);\n\n    for (e in this.cells) {\n      if (t === i) return this.cells[e];\n      t++;\n    }\n\n    return this.cells[e];\n  },\n  cellToHash: function cellToHash(e) {\n    return e.q + this._hashDelimeter + e.r + this._hashDelimeter + e.s;\n  },\n  distance: function distance(e, t) {\n    var i = Math.max(Math.abs(e.q - t.q), Math.abs(e.r - t.r), Math.abs(e.s - t.s));\n    return i += t.h - e.h;\n  },\n  clearPath: function clearPath() {\n    var e, t;\n\n    for (e in this.cells) {\n      t = this.cells[e], t._calcCost = 0, t._priority = 0, t._parent = null, t._visited = !1;\n    }\n  },\n  traverse: function traverse(e) {\n    var t;\n\n    for (t in this.cells) {\n      e(this.cells[t]);\n    }\n  },\n  generateTile: function generateTile(e, t, i) {\n    var s = Math.abs(e.h);\n    1 > s && (s = 1);\n    var n = this._geoCache[s];\n    n || (this.extrudeSettings.amount = s, n = new THREE.ExtrudeGeometry(this.cellShape, this.extrudeSettings), this._geoCache[s] = n);\n    var l = new vg.Tile({\n      size: this.cellSize,\n      scale: t,\n      cell: e,\n      geometry: n,\n      material: i\n    });\n    return e.tile = l, l;\n  },\n  generateTiles: function generateTiles(e) {\n    e = e || {};\n    var t = [],\n        i = {\n      tileScale: .95,\n      cellSize: this.cellSize,\n      material: null,\n      extrudeSettings: {\n        amount: 1,\n        bevelEnabled: !0,\n        bevelSegments: 1,\n        steps: 1,\n        bevelSize: .5,\n        bevelThickness: .5\n      }\n    };\n    i = vg.Tools.merge(i, e), this.cellSize = i.cellSize, this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this.autogenerated = !0, this.extrudeSettings = i.extrudeSettings;\n    var s, n, l;\n\n    for (s in this.cells) {\n      l = this.cells[s], n = this.generateTile(l, i.tileScale, i.material), n.position.copy(this.cellToPixel(l)), n.position.y = 0, t.push(n);\n    }\n\n    return t;\n  },\n  generateTilePoly: function generateTilePoly(e) {\n    e || (e = new THREE.MeshBasicMaterial({\n      color: 2405631\n    }));\n    var t = new THREE.Mesh(this.cellShapeGeo, e);\n    return this._vec3.set(1, 0, 0), t.rotateOnAxis(this._vec3, vg.PI / 2), t;\n  },\n  generate: function generate(e) {\n    e = e || {}, this.size = \"undefined\" == typeof e.size ? this.size : e.size;\n    var t, i, s, n;\n\n    for (t = -this.size; t < this.size + 1; t++) {\n      for (i = -this.size; i < this.size + 1; i++) {\n        s = -t - i, Math.abs(t) <= this.size && Math.abs(i) <= this.size && Math.abs(s) <= this.size && (n = new vg.Cell(t, i, s), this.add(n));\n      }\n    }\n  },\n  generateOverlay: function generateOverlay(e, t, i) {\n    var s,\n        n,\n        l,\n        r = this.cellShape.createPointsGeometry();\n\n    for (s = -e; e + 1 > s; s++) {\n      for (n = -e; e + 1 > n; n++) {\n        if (l = -s - n, Math.abs(s) <= e && Math.abs(n) <= e && Math.abs(l) <= e) {\n          this._cel.set(s, n, l);\n\n          var h = new THREE.Line(r, i);\n          h.position.copy(this.cellToPixel(this._cel)), h.rotation.x = 90 * vg.DEG_TO_RAD, t.add(h);\n        }\n      }\n    }\n  },\n  add: function add(e) {\n    var t = this.cellToHash(e);\n    if (!this.cells[t]) return this.cells[t] = e, this.numCells++, e;\n  },\n  remove: function remove(e) {\n    var t = this.cellToHash(e);\n    this.cells[t] && (delete this.cells[t], this.numCells--);\n  },\n  dispose: function dispose() {\n    this.cells = null, this.numCells = 0, this.cellShape = null, this.cellGeo.dispose(), this.cellGeo = null, this.cellShapeGeo.dispose(), this.cellShapeGeo = null, this._list = null, this._vec3 = null, this._conversionVec = null, this._geoCache = null, this._matCache = null;\n  },\n  load: function load(e, t, i) {\n    var s = this;\n    vg.Tools.getJSON({\n      url: e,\n      callback: function callback(e) {\n        s.fromJSON(e), t.call(i || null, e);\n      },\n      cache: !1,\n      scope: s\n    });\n  },\n  fromJSON: function fromJSON(e) {\n    var t,\n        i,\n        s = e.cells;\n\n    for (this.cells = {}, this.numCells = 0, this.size = e.size, this.cellSize = e.cellSize, this._cellWidth = 2 * this.cellSize, this._cellLength = .5 * vg.SQRT3 * this._cellWidth, this.extrudeSettings = e.extrudeSettings, this.autogenerated = e.autogenerated, t = 0; t < s.length; t++) {\n      i = new vg.Cell(), i.copy(s[t]), this.add(i);\n    }\n  },\n  toJSON: function toJSON() {\n    var e,\n        t,\n        i = {\n      size: this.size,\n      cellSize: this.cellSize,\n      extrudeSettings: this.extrudeSettings,\n      autogenerated: this.autogenerated\n    },\n        s = [];\n\n    for (t in this.cells) {\n      e = this.cells[t], s.push({\n        q: e.q,\n        r: e.r,\n        s: e.s,\n        h: e.h,\n        walkable: e.walkable,\n        userData: e.userData\n      });\n    }\n\n    return i.cells = s, i;\n  },\n  _createVertex: function _createVertex(e) {\n    var t = vg.TAU / 6 * e;\n    return new THREE.Vector3(this.cellSize * Math.cos(t), this.cellSize * Math.sin(t), 0);\n  },\n  _cubeRound: function _cubeRound(e) {\n    var t = Math.round(e.q),\n        i = Math.round(e.r),\n        s = Math.round(e.s),\n        n = Math.abs(t - e.q),\n        l = Math.abs(i - e.r),\n        r = Math.abs(s - e.s);\n    return n > l && n > r ? t = -i - s : l > r ? i = -t - s : s = -t - i, this._cel.set(t, i, s);\n  }\n}, vg.HexGrid.prototype.constructor = vg.HexGrid, vg.SqrGrid = function (e) {\n  e = e || {}, this.type = vg.SQR, this.size = 5, this.cellSize = \"undefined\" == typeof e.cellSize ? 10 : e.cellSize, this.cells = {}, this.numCells = 0, this.extrudeSettings = null, this.autogenerated = !1;\n  var t = [];\n  t.push(new THREE.Vector3()), t.push(new THREE.Vector3(-this.cellSize, this.cellSize)), t.push(new THREE.Vector3(this.cellSize, this.cellSize)), t.push(new THREE.Vector3(this.cellSize, -this.cellSize)), this.cellShape = new THREE.Shape(), this.cellShape.moveTo(-this.cellSize, -this.cellSize), this.cellShape.lineTo(-this.cellSize, this.cellSize), this.cellShape.lineTo(this.cellSize, this.cellSize), this.cellShape.lineTo(this.cellSize, -this.cellSize), this.cellShape.lineTo(-this.cellSize, -this.cellSize), this.cellGeo = new THREE.Geometry(), this.cellGeo.vertices = t, this.cellGeo.verticesNeedUpdate = !0, this.cellShapeGeo = new THREE.ShapeGeometry(this.cellShape), this._fullCellSize = 2 * this.cellSize, this._hashDelimeter = \".\", this._directions = [new vg.Cell(1, 0, 0), new vg.Cell(0, -1, 0), new vg.Cell(-1, 0, 0), new vg.Cell(0, 1, 0)], this._diagonals = [new vg.Cell(-1, -1, 0), new vg.Cell(-1, 1, 0), new vg.Cell(1, 1, 0), new vg.Cell(1, -1, 0)], this._list = [], this._vec3 = new THREE.Vector3(), this._cel = new vg.Cell(), this._conversionVec = new THREE.Vector3(), this._geoCache = [], this._matCache = [];\n}, vg.SqrGrid.prototype = {\n  cellToPixel: function cellToPixel(e) {\n    return this._vec3.x = e.q * this._fullCellSize, this._vec3.y = e.h, this._vec3.z = e.r * this._fullCellSize, this._vec3;\n  },\n  pixelToCell: function pixelToCell(e) {\n    var t = Math.round(e.x / this._fullCellSize),\n        i = Math.round(e.z / this._fullCellSize);\n    return this._cel.set(t, i, 0);\n  },\n  getCellAt: function getCellAt(e) {\n    var t = Math.round(e.x / this._fullCellSize),\n        i = Math.round(e.z / this._fullCellSize);\n    return this._cel.set(t, i), this.cells[this.cellToHash(this._cel)];\n  },\n  getNeighbors: function getNeighbors(e, t, i) {\n    var s,\n        n,\n        l = this._directions.length;\n\n    for (this._list.length = 0, s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._directions[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n\n    if (t) for (s = 0; l > s; s++) {\n      this._cel.copy(e), this._cel.add(this._diagonals[s]), n = this.cells[this.cellToHash(this._cel)], !n || i && !i(e, n) || this._list.push(n);\n    }\n    return this._list;\n  },\n  getRandomCell: function getRandomCell() {\n    var e,\n        t = 0,\n        i = vg.Tools.randomInt(0, this.numCells);\n\n    for (e in this.cells) {\n      if (t === i) return this.cells[e];\n      t++;\n    }\n\n    return this.cells[e];\n  },\n  cellToHash: function cellToHash(e) {\n    return e.q + this._hashDelimeter + e.r;\n  },\n  distance: function distance(e, t) {\n    var i = Math.max(Math.abs(e.q - t.q), Math.abs(e.r - t.r));\n    return i += t.h - e.h;\n  },\n  clearPath: function clearPath() {\n    var e, t;\n\n    for (e in this.cells) {\n      t = this.cells[e], t._calcCost = 0, t._priority = 0, t._parent = null, t._visited = !1;\n    }\n  },\n  traverse: function traverse(e) {\n    var t;\n\n    for (t in this.cells) {\n      e(this.cells[t]);\n    }\n  },\n  generateTile: function generateTile(e, t, i) {\n    var s = Math.abs(e.h);\n    1 > s && (s = 1);\n    var n = this._geoCache[s];\n    n || (this.extrudeSettings.amount = s, n = new THREE.ExtrudeGeometry(this.cellShape, this.extrudeSettings), this._geoCache[s] = n);\n    var l = new vg.Tile({\n      size: this.cellSize,\n      scale: t,\n      cell: e,\n      geometry: n,\n      material: i\n    });\n    return e.tile = l, l;\n  },\n  generateTiles: function generateTiles(e) {\n    e = e || {};\n    var t = [],\n        i = {\n      tileScale: .95,\n      cellSize: this.cellSize,\n      material: null,\n      extrudeSettings: {\n        amount: 1,\n        bevelEnabled: !0,\n        bevelSegments: 1,\n        steps: 1,\n        bevelSize: .5,\n        bevelThickness: .5\n      }\n    };\n    i = vg.Tools.merge(i, e), this.cellSize = i.cellSize, this._fullCellSize = 2 * this.cellSize, this.autogenerated = !0, this.extrudeSettings = i.extrudeSettings;\n    var s, n, l;\n\n    for (s in this.cells) {\n      l = this.cells[s], n = this.generateTile(l, i.tileScale, i.material), n.position.copy(this.cellToPixel(l)), n.position.y = 0, t.push(n);\n    }\n\n    return t;\n  },\n  generateTilePoly: function generateTilePoly(e) {\n    e || (e = new THREE.MeshBasicMaterial({\n      color: 2405631\n    }));\n    var t = new THREE.Mesh(this.cellShapeGeo, e);\n    return this._vec3.set(1, 0, 0), t.rotateOnAxis(this._vec3, vg.PI / 2), t;\n  },\n  generate: function generate(e) {\n    e = e || {}, this.size = \"undefined\" == typeof e.size ? this.size : e.size;\n    var t,\n        i,\n        s,\n        n = Math.ceil(this.size / 2);\n\n    for (t = -n; n > t; t++) {\n      for (i = -n; n > i; i++) {\n        s = new vg.Cell(t, i + 1), this.add(s);\n      }\n    }\n  },\n  generateOverlay: function generateOverlay(e, t, i) {\n    var s,\n        n,\n        l = Math.ceil(e / 2);\n\n    for (s = -l; l > s; s++) {\n      for (n = -l; l > n; n++) {\n        this._cel.set(s, n);\n\n        var r = new THREE.Line(this.cellGeo, i);\n        r.position.copy(this.cellToPixel(this._cel)), r.rotation.x = 90 * vg.DEG_TO_RAD, t.add(r);\n      }\n    }\n  },\n  add: function add(e) {\n    var t = this.cellToHash(e);\n    if (!this.cells[t]) return this.cells[t] = e, this.numCells++, e;\n  },\n  remove: function remove(e) {\n    var t = this.cellToHash(e);\n    this.cells[t] && (delete this.cells[t], this.numCells--);\n  },\n  dispose: function dispose() {\n    this.cells = null, this.numCells = 0, this.cellShape = null, this.cellGeo.dispose(), this.cellGeo = null, this.cellShapeGeo.dispose(), this.cellShapeGeo = null, this._list = null, this._vec3 = null, this._conversionVec = null, this._geoCache = null, this._matCache = null;\n  },\n  load: function load(e, t, i) {\n    vg.Tools.getJSON({\n      url: e,\n      callback: function callback(e) {\n        this.fromJSON(e), t.call(i || null, e);\n      },\n      cache: !1,\n      scope: this\n    });\n  },\n  fromJSON: function fromJSON(e) {\n    var t,\n        i,\n        s = e.cells;\n\n    for (this.cells = {}, this.numCells = 0, this.size = e.size, this.cellSize = e.cellSize, this._fullCellSize = 2 * this.cellSize, this.extrudeSettings = e.extrudeSettings, this.autogenerated = e.autogenerated, t = 0; t < s.length; t++) {\n      i = new vg.Cell(), i.copy(s[t]), this.add(i);\n    }\n  },\n  toJSON: function toJSON() {\n    var e,\n        t,\n        i = {\n      size: this.size,\n      cellSize: this.cellSize,\n      extrudeSettings: this.extrudeSettings,\n      autogenerated: this.autogenerated\n    },\n        s = [];\n\n    for (t in this.cells) {\n      e = this.cells[t], s.push({\n        q: e.q,\n        r: e.r,\n        s: e.s,\n        h: e.h,\n        walkable: e.walkable,\n        userData: e.userData\n      });\n    }\n\n    return i.cells = s, i;\n  }\n}, vg.SqrGrid.prototype.constructor = vg.SqrGrid, vg.Tile = function (e) {\n  e = e || {};\n  var t = {\n    cell: null,\n    geometry: null,\n    material: null\n  };\n  if (t = vg.Tools.merge(t, e), !t.cell || !t.geometry) throw new Error(\"Missing vg.Tile configuration\");\n  this.cell = t.cell, this.cell.tile && this.cell.tile !== this && this.cell.tile.dispose(), this.cell.tile = this, this.uniqueID = vg.Tools.generateID(), this.geometry = t.geometry, this.material = t.material, this.material || (this.material = new THREE.MeshPhongMaterial({\n    color: vg.Tools.randomizeRGB(\"30, 30, 30\", 13)\n  })), this.objectType = vg.TILE, this.entity = null, this.userData = {}, this.selected = !1, this.highlight = \"0x0084cc\", this.mesh = new THREE.Mesh(this.geometry, this.material), this.mesh.userData.structure = this, this.position = this.mesh.position, this.rotation = this.mesh.rotation, this.rotation.x = -90 * vg.DEG_TO_RAD, this.mesh.scale.set(t.scale, t.scale, 1), this.material.emissive ? this._emissive = this.material.emissive.getHex() : this._emissive = null;\n}, vg.Tile.prototype = {\n  select: function select() {\n    return this.material.emissive && this.material.emissive.setHex(this.highlight), this.selected = !0, this;\n  },\n  deselect: function deselect() {\n    return null !== this._emissive && this.material.emissive && this.material.emissive.setHex(this._emissive), this.selected = !1, this;\n  },\n  toggle: function toggle() {\n    return this.selected ? this.deselect() : this.select(), this;\n  },\n  dispose: function dispose() {\n    this.cell && this.cell.tile && (this.cell.tile = null), this.cell = null, this.position = null, this.rotation = null, this.mesh.parent && this.mesh.parent.remove(this.mesh), this.mesh.userData.structure = null, this.mesh = null, this.material = null, this.userData = null, this.entity = null, this.geometry = null, this._emissive = null;\n  }\n}, vg.Tile.prototype.constructor = vg.Tile, function () {\n  var e = function e() {\n    this.obj = null, this.next = null, this.prev = null, this.free = !0;\n  },\n      t = function t() {\n    this.first = null, this.last = null, this.length = 0, this.objToNodeMap = {}, this.uniqueID = Date.now() + \"\" + Math.floor(1e3 * Math.random()), this.sortArray = [];\n  };\n\n  t.generateID = function () {\n    return Math.random().toString(36).slice(2) + Date.now();\n  }, t.prototype = {\n    getNode: function getNode(e) {\n      return this.objToNodeMap[e.uniqueID];\n    },\n    addNode: function addNode(i) {\n      var s = new e();\n      if (!i.uniqueID) try {\n        i.uniqueID = t.generateID();\n      } catch (n) {\n        return console.error(\"[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier\"), null;\n      }\n      return s.obj = i, s.free = !1, this.objToNodeMap[i.uniqueID] = s, s;\n    },\n    swapObjects: function swapObjects(e, t) {\n      this.objToNodeMap[e.obj.uniqueID] = null, this.objToNodeMap[t.uniqueID] = e, e.obj = t;\n    },\n    add: function add(e) {\n      var t = this.objToNodeMap[e.uniqueID];\n\n      if (t) {\n        if (t.free === !1) return;\n        t.obj = e, t.free = !1, t.next = null, t.prev = null;\n      } else t = this.addNode(e);\n\n      if (this.first) {\n        if (!this.last) throw new Error(\"[LinkedList.add] No last in the list -- that shouldn't happen here\");\n        this.last.next = t, t.prev = this.last, this.last = t, t.next = null;\n      } else this.first = t, this.last = t, t.next = null, t.prev = null;\n\n      this.length++, this.showDebug && this.dump(\"after add\");\n    },\n    has: function has(e) {\n      return !!this.objToNodeMap[e.uniqueID];\n    },\n    moveUp: function moveUp(e) {\n      this.dump(\"before move up\");\n      var t = this.getNode(e);\n      if (!t) throw \"Oops, trying to move an object that isn't in the list\";\n\n      if (t.prev) {\n        var i = t.prev,\n            s = i.prev;\n        t == this.last && (this.last = i);\n        var n = t.next;\n        s && (s.next = t), t.next = i, t.prev = i.prev, i.next = n, i.prev = t, this.first == i && (this.first = t);\n      }\n    },\n    moveDown: function moveDown(e) {\n      var t = this.getNode(e);\n      if (!t) throw \"Oops, trying to move an object that isn't in the list\";\n\n      if (t.next) {\n        var i = t.next;\n        this.moveUp(i.obj), this.last == i && (this.last = t);\n      }\n    },\n    sort: function sort(e) {\n      var t,\n          i,\n          s = this.sortArray,\n          n = this.first;\n\n      for (s.length = 0; n;) {\n        s.push(n.obj), n = n.next;\n      }\n\n      for (this.clear(), s.sort(e), i = s.length, t = 0; i > t; t++) {\n        this.add(s[t]);\n      }\n    },\n    remove: function remove(e) {\n      var t = this.getNode(e);\n      return !t || t.free ? !1 : (t.prev && (t.prev.next = t.next), t.next && (t.next.prev = t.prev), t.prev || (this.first = t.next), t.next || (this.last = t.prev), t.free = !0, t.prev = null, t.next = null, this.length--, !0);\n    },\n    shift: function shift() {\n      var e = this.first;\n      return 0 === this.length ? null : (e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), this.first = e.next, e.next || (this.last = null), e.free = !0, e.prev = null, e.next = null, this.length--, e.obj);\n    },\n    pop: function pop() {\n      var e = this.last;\n      return 0 === this.length ? null : (e.prev && (e.prev.next = e.next), e.next && (e.next.prev = e.prev), this.last = e.prev, e.prev || (this.first = null), e.free = !0, e.prev = null, e.next = null, this.length--, e.obj);\n    },\n    concat: function concat(e) {\n      for (var t = e.first; t;) {\n        this.add(t.obj), t = t.next;\n      }\n    },\n    clear: function clear() {\n      for (var e = this.first; e;) {\n        e.free = !0, e = e.next;\n      }\n\n      this.first = null, this.length = 0;\n    },\n    dispose: function dispose() {\n      for (var e = this.first; e;) {\n        e.obj = null, e = e.next;\n      }\n\n      this.first = null, this.objToNodeMap = null;\n    },\n    dump: function dump(e) {\n      console.log(\"====================\" + e + \"=====================\");\n\n      for (var t = this.first; t;) {\n        console.log(\"{\" + t.obj.toString() + \"} previous=\" + (t.prev ? t.prev.obj : \"NULL\")), t = t.next();\n      }\n\n      console.log(\"===================================\"), console.log(\"Last: {\" + (this.last ? this.last.obj : \"NULL\") + \"} First: {\" + (this.first ? this.first.obj : \"NULL\") + \"}\");\n    }\n  }, t.prototype.constructor = t, vg.LinkedList = t;\n}(), function () {\n  var e = function e(_e, t, i, s, n) {\n    this._listener = t, this.isOnce = i, this.context = s, this.signal = _e, this._priority = n || 0;\n  };\n\n  e.prototype = {\n    active: !0,\n    params: null,\n    execute: function execute(e) {\n      var t, i;\n      return this.active && this._listener && (i = this.params ? this.params.concat(e) : e, t = this._listener.apply(this.context, i), this.isOnce && this.detach()), t;\n    },\n    detach: function detach() {\n      return this.isBound() ? this.signal.remove(this._listener, this.context) : null;\n    },\n    isBound: function isBound() {\n      return !!this.signal && !!this._listener;\n    },\n    _destroy: function _destroy() {\n      delete this.signal, delete this._listener, delete this.context;\n    },\n    toString: function toString() {\n      return \"[SignalBinding isOnce:\" + this.isOnce + \", isBound:\" + this.isBound() + \", active:\" + this.active + \"]\";\n    }\n  }, e.prototype.constructor = e;\n\n  var t = function t() {\n    this._bindings = [], this._prevParams = null;\n    var e = this;\n\n    this.dispatch = function () {\n      t.prototype.dispatch.apply(e, arguments);\n    };\n  };\n\n  t.prototype = {\n    memorize: !1,\n    _shouldPropagate: !0,\n    active: !0,\n    validateListener: function validateListener(e, t) {\n      if (\"function\" != typeof e) throw new Error(\"Signal: listener is a required param of {fn}() and should be a Function.\".replace(\"{fn}\", t));\n    },\n    _registerListener: function _registerListener(t, i, s, n) {\n      var l,\n          r = this._indexOfListener(t, s);\n\n      if (-1 !== r) {\n        if (l = this._bindings[r], l.isOnce !== i) throw new Error(\"You cannot add\" + (i ? \"\" : \"Once\") + \"() then add\" + (i ? \"Once\" : \"\") + \"() the same listener without removing the relationship first.\");\n      } else l = new e(this, t, i, s, n), this._addBinding(l);\n\n      return this.memorize && this._prevParams && l.execute(this._prevParams), l;\n    },\n    _addBinding: function _addBinding(e) {\n      var t = this._bindings.length;\n\n      do {\n        t--;\n      } while (this._bindings[t] && e._priority <= this._bindings[t]._priority);\n\n      this._bindings.splice(t + 1, 0, e);\n    },\n    _indexOfListener: function _indexOfListener(e, t) {\n      for (var i, s = this._bindings.length; s--;) {\n        if (i = this._bindings[s], i._listener === e && i.context === t) return s;\n      }\n\n      return -1;\n    },\n    has: function has(e, t) {\n      return -1 !== this._indexOfListener(e, t);\n    },\n    add: function add(e, t, i) {\n      return this.validateListener(e, \"add\"), this._registerListener(e, !1, t, i);\n    },\n    addOnce: function addOnce(e, t, i) {\n      return this.validateListener(e, \"addOnce\"), this._registerListener(e, !0, t, i);\n    },\n    remove: function remove(e, t) {\n      this.validateListener(e, \"remove\");\n\n      var i = this._indexOfListener(e, t);\n\n      return -1 !== i && (this._bindings[i]._destroy(), this._bindings.splice(i, 1)), e;\n    },\n    removeAll: function removeAll(e) {\n      \"undefined\" == typeof e && (e = null);\n\n      for (var t = this._bindings.length; t--;) {\n        e ? this._bindings[t].context === e && (this._bindings[t]._destroy(), this._bindings.splice(t, 1)) : this._bindings[t]._destroy();\n      }\n\n      e || (this._bindings.length = 0);\n    },\n    getNumListeners: function getNumListeners() {\n      return this._bindings.length;\n    },\n    halt: function halt() {\n      this._shouldPropagate = !1;\n    },\n    dispatch: function dispatch() {\n      if (this.active) {\n        var e,\n            t = Array.prototype.slice.call(arguments),\n            i = this._bindings.length;\n\n        if (this.memorize && (this._prevParams = t), i) {\n          e = this._bindings.slice(), this._shouldPropagate = !0;\n\n          do {\n            i--;\n          } while (e[i] && this._shouldPropagate && e[i].execute(t) !== !1);\n        }\n      }\n    },\n    forget: function forget() {\n      this._prevParams = null;\n    },\n    dispose: function dispose() {\n      this.removeAll(), delete this._bindings, delete this._prevParams;\n    },\n    toString: function toString() {\n      return \"[Signal active:\" + this.active + \" numListeners:\" + this.getNumListeners() + \"]\";\n    }\n  }, t.prototype.constructor = t, vg.Signal = t;\n}(), vg.AStarFinder = function (e) {\n  e = e || {};\n  var t = {\n    allowDiagonal: !1,\n    heuristicFilter: null\n  };\n  t = vg.Tools.merge(t, e), this.allowDiagonal = t.allowDiagonal, this.heuristicFilter = t.heuristicFilter, this.list = new vg.LinkedList();\n}, vg.AStarFinder.prototype = {\n  findPath: function findPath(e, t, i, s) {\n    var n, l, r, h, o, a;\n\n    for (i = i || this.heuristicFilter, s.clearPath(), this.list.clear(), this.list.add(e); this.list.length > 0;) {\n      if (this.list.sort(this.compare), n = this.list.shift(), n._visited = !0, n === t) return vg.PathUtil.backtrace(t);\n\n      for (r = s.getNeighbors(n, this.allowDiagonal, i), o = 0, a = r.length; a > o; o++) {\n        if (h = r[o], h.walkable && (l = n._calcCost + s.distance(n, h), !h._visited || l < h._calcCost)) {\n          if (h._visited = !0, h._parent = n, h._calcCost = l, h._priority = l + s.distance(t, h), h === t) return vg.PathUtil.backtrace(t);\n          this.list.add(h);\n        }\n      }\n    }\n\n    return null;\n  },\n  compare: function compare(e, t) {\n    return e._priority - t._priority;\n  }\n}, vg.AStarFinder.prototype.constructor = vg.AStarFinder, vg.PathUtil = {\n  backtrace: function backtrace(e) {\n    for (var t = [e]; e._parent;) {\n      e = e._parent, t.push(e);\n    }\n\n    return t.reverse();\n  },\n  biBacktrace: function biBacktrace(e, t) {\n    var i = this.backtrace(e),\n        s = this.backtrace(t);\n    return i.concat(s.reverse());\n  },\n  pathLength: function pathLength(e) {\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r = 0;\n\n    for (t = 1; t < e.length; ++t) {\n      i = e[t - 1], s = e[t], n = i[0] - s[0], l = i[1] - s[1], r += Math.sqrt(n * n + l * l);\n    }\n\n    return r;\n  },\n  interpolate: function interpolate(e, t, i, s) {\n    var n,\n        l,\n        r,\n        h,\n        o,\n        a,\n        c = Math.abs,\n        u = [];\n\n    for (r = c(i - e), h = c(s - t), n = i > e ? 1 : -1, l = s > t ? 1 : -1, o = r - h; e !== i || t !== s;) {\n      u.push([e, t]), a = 2 * o, a > -h && (o -= h, e += n), r > a && (o += r, t += l);\n    }\n\n    return u;\n  },\n  expandPath: function expandPath(e) {\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r,\n        h = [],\n        o = e.length;\n    if (2 > o) return h;\n\n    for (l = 0; o - 1 > l; ++l) {\n      for (t = e[l], i = e[l + 1], s = this.interpolate(t[0], t[1], i[0], i[1]), n = s.length, r = 0; n - 1 > r; ++r) {\n        h.push(s[r]);\n      }\n    }\n\n    return h.push(e[o - 1]), h;\n  },\n  smoothenPath: function smoothenPath(e, t) {\n    var i,\n        s,\n        n,\n        l,\n        r,\n        h,\n        o,\n        a,\n        c,\n        u,\n        d,\n        g,\n        p = t.length,\n        v = t[0][0],\n        f = t[0][1],\n        m = t[p - 1][0],\n        _ = t[p - 1][1];\n\n    for (i = v, s = f, r = [[i, s]], o = 2; p > o; ++o) {\n      for (c = t[o], n = c[0], l = c[1], u = this.interpolate(i, s, n, l), g = !1, a = 1; a < u.length; ++a) {\n        if (d = u[a], !e.isWalkableAt(d[0], d[1])) {\n          g = !0;\n          break;\n        }\n      }\n\n      g && (h = t[o - 1], r.push(h), i = h[0], s = h[1]);\n    }\n\n    return r.push([m, _]), r;\n  },\n  compressPath: function compressPath(e) {\n    if (e.length < 3) return e;\n    var t,\n        i,\n        s,\n        n,\n        l,\n        r,\n        h = [],\n        o = e[0][0],\n        a = e[0][1],\n        c = e[1][0],\n        u = e[1][1],\n        d = c - o,\n        g = u - a;\n\n    for (l = Math.sqrt(d * d + g * g), d /= l, g /= l, h.push([o, a]), r = 2; r < e.length; r++) {\n      t = c, i = u, s = d, n = g, c = e[r][0], u = e[r][1], d = c - t, g = u - i, l = Math.sqrt(d * d + g * g), d /= l, g /= l, (d !== s || g !== n) && h.push([t, i]);\n    }\n\n    return h.push([c, u]), h;\n  }\n}, vg.Loader = {\n  manager: null,\n  imageLoader: null,\n  crossOrigin: !1,\n  init: function init(e) {\n    this.crossOrigin = e || !1, this.manager = new THREE.LoadingManager(function () {}, function () {}, function () {\n      console.warn(\"Error loading images\");\n    }), this.imageLoader = new THREE.ImageLoader(this.manager), this.imageLoader.crossOrigin = e;\n  },\n  loadTexture: function loadTexture(e, t, i, s) {\n    var n = new THREE.Texture(null, t);\n    return this.imageLoader.load(e, function (e) {\n      n.image = e, n.needsUpdate = !0, i && i(n);\n    }, null, function (e) {\n      s && s(e);\n    }), n.sourceFile = e, n;\n  }\n}, vg.MouseCaster = function (e, t, i) {\n  this.down = !1, this.rightDown = !1, this.pickedObject = null, this.selectedObject = null, this.allHits = null, this.active = !0, this.shift = !1, this.ctrl = !1, this.wheel = 0, this.position = new THREE.Vector3(), this.screenPosition = new THREE.Vector2(), this.signal = new vg.Signal(), this.group = e, this._camera = t, this._raycaster = new THREE.Raycaster(), this._preventDefault = !1, i = i || document, i.addEventListener(\"mousemove\", this._onDocumentMouseMove.bind(this), !1), i.addEventListener(\"mousedown\", this._onDocumentMouseDown.bind(this), !1), i.addEventListener(\"mouseup\", this._onDocumentMouseUp.bind(this), !1), i.addEventListener(\"mousewheel\", this._onMouseWheel.bind(this), !1), i.addEventListener(\"DOMMouseScroll\", this._onMouseWheel.bind(this), !1);\n}, vg.MouseCaster.OVER = \"over\", vg.MouseCaster.OUT = \"out\", vg.MouseCaster.DOWN = \"down\", vg.MouseCaster.UP = \"up\", vg.MouseCaster.CLICK = \"click\", vg.MouseCaster.WHEEL = \"wheel\", vg.MouseCaster.prototype = {\n  update: function update() {\n    if (this.active) {\n      this._raycaster.setFromCamera(this.screenPosition, this._camera);\n\n      var e,\n          t,\n          i = this._raycaster.intersectObject(this.group, !0);\n\n      i.length > 0 ? (e = i[0], t = e.object.userData.structure, this.pickedObject != t && (this.pickedObject && this.signal.dispatch(vg.MouseCaster.OUT, this.pickedObject), this.pickedObject = t, this.selectedObject = null, this.signal.dispatch(vg.MouseCaster.OVER, this.pickedObject)), this.position.copy(e.point), this.screenPosition.z = e.distance) : (this.pickedObject && this.signal.dispatch(vg.MouseCaster.OUT, this.pickedObject), this.pickedObject = null, this.selectedObject = null), this.allHits = i;\n    }\n  },\n  preventDefault: function preventDefault() {\n    this._preventDefault = !0;\n  },\n  _onDocumentMouseDown: function _onDocumentMouseDown(e) {\n    return e = e || window.event, e.preventDefault(), this._preventDefault ? (this._preventDefault = !1, !1) : (this.pickedObject && (this.selectedObject = this.pickedObject), this.shift = e.shiftKey, this.ctrl = e.ctrlKey, this.down = 1 === e.which, this.rightDown = 3 === e.which, void this.signal.dispatch(vg.MouseCaster.DOWN, this.pickedObject));\n  },\n  _onDocumentMouseUp: function _onDocumentMouseUp(e) {\n    return e.preventDefault(), this._preventDefault ? (this._preventDefault = !1, !1) : (this.shift = e.shiftKey, this.ctrl = e.ctrlKey, this.signal.dispatch(vg.MouseCaster.UP, this.pickedObject), this.selectedObject && this.pickedObject && this.selectedObject.uniqueID === this.pickedObject.uniqueID && this.signal.dispatch(vg.MouseCaster.CLICK, this.pickedObject), this.down = 1 === e.which ? !1 : this.down, void (this.rightDown = 3 === e.which ? !1 : this.rightDown));\n  },\n  _onDocumentMouseMove: function _onDocumentMouseMove(e) {\n    e.preventDefault(), this.screenPosition.x = e.clientX / window.innerWidth * 2 - 1, this.screenPosition.y = 2 * -(e.clientY / window.innerHeight) + 1;\n  },\n  _onMouseWheel: function _onMouseWheel(e) {\n    if (this.active) {\n      e.preventDefault(), e.stopPropagation();\n      var t = 0;\n      void 0 !== e.wheelDelta ? t = e.wheelDelta : void 0 !== e.detail && (t = -e.detail), t > 0 ? this.wheel++ : this.wheel--, this.signal.dispatch(vg.MouseCaster.WHEEL, this.wheel);\n    }\n  }\n}, vg.MouseCaster.prototype.constructor = vg.MouseCaster, vg.Scene = function (e, t) {\n  var i = {\n    element: document.body,\n    alpha: !0,\n    antialias: !0,\n    clearColor: \"#fff\",\n    sortObjects: !1,\n    fog: null,\n    light: new THREE.DirectionalLight(16777215),\n    lightPosition: null,\n    cameraType: \"PerspectiveCamera\",\n    cameraPosition: null,\n    orthoZoom: 4\n  },\n      s = {\n    minDistance: 100,\n    maxDistance: 1e3,\n    zoomSpeed: 2,\n    noZoom: !1\n  };\n\n  if (i = vg.Tools.merge(i, e), \"boolean\" != typeof t && (s = vg.Tools.merge(s, t)), this.renderer = new THREE.WebGLRenderer({\n    alpha: i.alpha,\n    antialias: i.antialias\n  }), this.renderer.setClearColor(i.clearColor, 0), this.renderer.sortObjects = i.sortObjects, this.width = window.innerWidth, this.height = window.innerHeight, this.orthoZoom = i.orthoZoom, this.container = new THREE.Scene(), this.container.fog = i.fog, this.container.add(new THREE.AmbientLight(14540253)), i.lightPosition || i.light.position.set(-1, 1, -1).normalize(), this.container.add(i.light), \"OrthographicCamera\" === i.cameraType) {\n    var n = window.innerWidth / this.orthoZoom,\n        l = window.innerHeight / this.orthoZoom;\n    this.camera = new THREE.OrthographicCamera(n / -2, n / 2, l / 2, l / -2, 1, 5e3);\n  } else this.camera = new THREE.PerspectiveCamera(50, this.width / this.height, 1, 5e3);\n\n  this.contolled = !!t, this.contolled && (this.controls = new THREE.OrbitControls(this.camera, this.renderer.domElement), this.controls.minDistance = s.minDistance, this.controls.maxDistance = s.maxDistance, this.controls.zoomSpeed = s.zoomSpeed, this.controls.noZoom = s.noZoom), i.cameraPosition && this.camera.position.copy(i.cameraPosition), window.addEventListener(\"resize\", function () {\n    if (this.width = window.innerWidth, this.height = window.innerHeight, \"OrthographicCamera\" === this.camera.type) {\n      var e = this.width / this.orthoZoom,\n          t = this.height / this.orthoZoom;\n      this.camera.left = e / -2, this.camera.right = e / 2, this.camera.top = t / 2, this.camera.bottom = t / -2;\n    } else this.camera.aspect = this.width / this.height;\n\n    this.camera.updateProjectionMatrix(), this.renderer.setSize(this.width, this.height);\n  }.bind(this), !1), this.attachTo(i.element);\n}, vg.Scene.prototype = {\n  attachTo: function attachTo(e) {\n    e.style.width = this.width + \"px\", e.style.height = this.height + \"px\", this.renderer.setPixelRatio(window.devicePixelRatio), this.renderer.setSize(this.width, this.height), e.appendChild(this.renderer.domElement);\n  },\n  add: function add(e) {\n    this.container.add(e);\n  },\n  remove: function remove(e) {\n    this.container.remove(e);\n  },\n  render: function render() {\n    this.contolled && this.controls.update(), this.renderer.render(this.container, this.camera);\n  },\n  updateOrthoZoom: function updateOrthoZoom() {\n    if (this.orthoZoom <= 0) return void (this.orthoZoom = 0);\n    var e = this.width / this.orthoZoom,\n        t = this.height / this.orthoZoom;\n    this.camera.left = e / -2, this.camera.right = e / 2, this.camera.top = t / 2, this.camera.bottom = t / -2, this.camera.updateProjectionMatrix();\n  },\n  focusOn: function focusOn(e) {\n    this.camera.lookAt(e.position);\n  }\n}, vg.Scene.prototype.constructor = vg.Scene, vg.SelectionManager = function (e) {\n  this.mouse = e, this.onSelect = new vg.Signal(), this.onDeselect = new vg.Signal(), this.selected = null, this.toggleSelection = !1, this.mouse.signal.add(this.onMouse, this);\n}, vg.SelectionManager.prototype = {\n  select: function select(e, t) {\n    e && (t = t || !0, this.selected !== e && this.clearSelection(t), e.selected ? this.toggleSelection && (t && this.onDeselect.dispatch(e), e.deselect()) : e.select(), this.selected = e, t && this.onSelect.dispatch(e));\n  },\n  clearSelection: function clearSelection(e) {\n    e = e || !0, this.selected && (e && this.onDeselect.dispatch(this.selected), this.selected.deselect()), this.selected = null;\n  },\n  onMouse: function onMouse(e, t) {\n    switch (e) {\n      case vg.MouseCaster.DOWN:\n        t || this.clearSelection();\n        break;\n\n      case vg.MouseCaster.CLICK:\n        this.select(t);\n    }\n  }\n}, vg.SelectionManager.prototype.constructor = vg.SelectionManager, vg.Tools = {\n  clamp: function clamp(e, t, i) {\n    return Math.max(t, Math.min(i, e));\n  },\n  sign: function sign(e) {\n    return e && e / Math.abs(e);\n  },\n  random: function random(e, t) {\n    return 1 === arguments.length ? Math.random() * e - .5 * e : Math.random() * (t - e) + e;\n  },\n  randomInt: function randomInt(e, t) {\n    return 1 === arguments.length ? Math.random() * e - .5 * e | 0 : Math.random() * (t - e + 1) + e | 0;\n  },\n  normalize: function normalize(e, t, i) {\n    return (e - t) / (i - t);\n  },\n  getShortRotation: function getShortRotation(e) {\n    return e %= this.TAU, e > this.PI ? e -= this.TAU : e < -this.PI && (e += this.TAU), e;\n  },\n  generateID: function generateID() {\n    return Math.random().toString(36).slice(2) + Date.now();\n  },\n  isPlainObject: function isPlainObject(e) {\n    if (\"object\" != typeof e || e.nodeType || e === e.window) return !1;\n\n    try {\n      if (e.constructor && !Object.prototype.hasOwnProperty.call(e.constructor.prototype, \"isPrototypeOf\")) return !1;\n    } catch (t) {\n      return !1;\n    }\n\n    return !0;\n  },\n  merge: function merge(e, t) {\n    var i = this,\n        s = Array.isArray(t),\n        n = s && [] || {};\n    return s ? (e = e || [], n = n.concat(e), t.forEach(function (t, s) {\n      \"undefined\" == typeof n[s] ? n[s] = t : i.isPlainObject(t) ? n[s] = i.merge(e[s], t) : -1 === e.indexOf(t) && n.push(t);\n    }), n) : (e && i.isPlainObject(e) && Object.keys(e).forEach(function (t) {\n      n[t] = e[t];\n    }), Object.keys(t).forEach(function (s) {\n      t[s] && i.isPlainObject(t[s]) && e[s] ? n[s] = i.merge(e[s], t[s]) : n[s] = t[s];\n    }), n);\n  },\n  now: function now() {\n    return window.nwf ? window.nwf.system.Performance.elapsedTime : window.performance.now();\n  },\n  empty: function empty(e) {\n    for (; e.lastChild;) {\n      e.removeChild(e.lastChild);\n    }\n  },\n  radixSort: function radixSort(e, t, i, s) {\n    if (t = t || 0, i = i || e.length, s = s || 31, !(t >= i - 1 || 0 > s)) {\n      for (var n = t, l = i, r = 1 << s; l > n;) {\n        if (e[n] & r) {\n          --l;\n          var h = e[n];\n          e[n] = e[l], e[l] = h;\n        } else ++n;\n      }\n\n      this.radixSort(e, t, l, s - 1), this.radixSort(e, l, i, s - 1);\n    }\n  },\n  randomizeRGB: function randomizeRGB(e, t) {\n    var i,\n        s,\n        n = e.split(\",\"),\n        l = \"rgb(\";\n\n    for (t = this.randomInt(t), i = 0; 3 > i; i++) {\n      s = parseInt(n[i]) + t, 0 > s ? s = 0 : s > 255 && (s = 255), l += s + \",\";\n    }\n\n    return l = l.substring(0, l.length - 1), l += \")\";\n  },\n  getJSON: function getJSON(e) {\n    var t = new XMLHttpRequest(),\n        i = \"undefined\" == typeof e.cache ? !1 : e.cache,\n        s = i ? e.url : e.url + \"?t=\" + Math.floor(1e4 * Math.random()) + Date.now();\n    t.onreadystatechange = function () {\n      if (200 === this.status) {\n        var t = null;\n\n        try {\n          t = JSON.parse(this.responseText);\n        } catch (i) {\n          return;\n        }\n\n        return void e.callback.call(e.scope || null, t);\n      }\n\n      0 !== this.status && console.warn(\"[Tools.getJSON] Error: \" + this.status + \" (\" + this.statusText + \") :: \" + e.url);\n    }, t.open(\"GET\", s, !0), t.setRequestHeader(\"Accept\", \"application/json\"), t.setRequestHeader(\"Content-Type\", \"application/json\"), t.send(\"\");\n  }\n};","module.exports = {\n  \"size\": 5,\n  \"cellSize\": 10,\n  \"extrudeSettings\": {\n    \"amount\": 1,\n    \"bevelEnabled\": true,\n    \"bevelSegments\": 1,\n    \"steps\": 1,\n    \"bevelSize\": 0.5,\n    \"bevelThickness\": 0.5\n  },\n  \"autogenerated\": true,\n  \"cells\": [{\n    \"q\": -1,\n    \"r\": 0,\n    \"s\": 1,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": -1,\n    \"s\": 1,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": 0,\n    \"s\": 0,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 1,\n    \"r\": -1,\n    \"s\": 0,\n    \"h\": 1,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": -1,\n    \"r\": 1,\n    \"s\": 0,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 0,\n    \"r\": 1,\n    \"s\": -1,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }, {\n    \"q\": 1,\n    \"r\": 0,\n    \"s\": -1,\n    \"h\": 0,\n    \"walkable\": true,\n    \"userData\": {}\n  }]\n};","/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {\n      x: -90,\n      y: 0,\n      z: 0\n    }\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {\n      \"default\": 10,\n      min: 0\n    },\n    depth: {\n      \"default\": 10,\n      min: 0\n    },\n    // Density of waves.\n    density: {\n      \"default\": 10\n    },\n    // Wave amplitude and variance.\n    amplitude: {\n      \"default\": 0.1\n    },\n    amplitudeVariance: {\n      \"default\": 0.3\n    },\n    // Wave speed and variance.\n    speed: {\n      \"default\": 1\n    },\n    speedVariance: {\n      \"default\": 2\n    },\n    // Material.\n    color: {\n      \"default\": '#7AD2F7',\n      type: 'color'\n    },\n    opacity: {\n      \"default\": 0.8\n    }\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings  unavailable as dependencies  are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function play() {\n    var el = this.el,\n        data = this.data;\n    var material = el.components.material;\n    var geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    geometry.mergeVertices();\n    this.waves = [];\n\n    for (var v, i = 0, l = geometry.vertices.length; i < l; i++) {\n      v = geometry.vertices[i];\n      this.waves.push({\n        z: v.z,\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        shading: THREE.FlatShading\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n  remove: function remove() {\n    this.el.removeObject3D('mesh');\n  },\n  tick: function tick(t, dt) {\n    if (!dt) return;\n    var verts = this.mesh.geometry.vertices;\n\n    for (var v, vprops, i = 0; v = verts[i]; i++) {\n      vprops = this.waves[i];\n      v.z = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      vprops.ang += vprops.speed * dt;\n    }\n\n    this.mesh.geometry.verticesNeedUpdate = true;\n  }\n});","require(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\n/**\n * Tube following a custom path.\n *\n * Usage:\n *\n * ```html\n * <a-tube path=\"5 0 5, 5 0 -5, -5 0 -5\" radius=\"0.5\"></a-tube>\n * ```\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-tube', {\n  defaultComponents: {\n    tube: {}\n  },\n  mappings: {\n    path: 'tube.path',\n    segments: 'tube.segments',\n    radius: 'tube.radius',\n    'radial-segments': 'tube.radialSegments',\n    closed: 'tube.closed'\n  }\n});\nmodule.exports.Component = AFRAME.registerComponent('tube', {\n  schema: {\n    path: {\n      \"default\": []\n    },\n    segments: {\n      \"default\": 64\n    },\n    radius: {\n      \"default\": 1\n    },\n    radialSegments: {\n      \"default\": 8\n    },\n    closed: {\n      \"default\": false\n    }\n  },\n  init: function init() {\n    var el = this.el,\n        data = this.data;\n    var material = el.components.material;\n\n    if (!data.path.length) {\n      console.error('[a-tube] `path` property expected but not found.');\n      return;\n    }\n\n    var curve = new THREE.CatmullRomCurve3(data.path.map(function (point) {\n      point = point.split(' ');\n      return new THREE.Vector3(Number(point[0]), Number(point[1]), Number(point[2]));\n    }));\n    var geometry = new THREE.TubeGeometry(curve, data.segments, data.radius, data.radialSegments, data.closed);\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial();\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    this.el.setObject3D('mesh', this.mesh);\n  },\n  update: function update(prevData) {\n    if (!Object.keys(prevData).length) return;\n    this.remove();\n    this.init();\n  },\n  remove: function remove() {\n    if (this.mesh) this.el.removeObject3D('mesh');\n  }\n});"],"sourceRoot":""}